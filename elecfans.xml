<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>电子发烧友 - 最近文章</title>      <link>https://www.elecfans.com/article/special/</link>      <description>电子发烧友</description>      <generator>python elecfans.py @Pi20</generator>      <item>    <title><![CDATA[比斯特综合性能测试机提升电池组性能验证效率精度]]></title>    <link>https://www.elecfans.com/d/7641946.html</link>    <guid>https://www.elecfans.com/d/7641946.html</guid>    <pubDate>2026-02-06 16:37:00</pubDate>    <description><![CDATA[<p>
	在<a href="https://m.elecfans.com/v/tag/293/" target="_blank"><u>新能源</u></a>汽车与储能系统爆发式增长的背景下，电池组作为重要能量载体，其性能验证的效率与精度直接决定了产品迭代速度与市场竞争力。传统分散式检测设备因存在装夹重复、数据孤岛、误差累积等问题，已难以满足行业对“全流程溯源、动态一致性评估、安全风险预警”的严苛需求。深圳比斯特<a href="https://www.elecfans.com/v/tag/1687/" target="_blank"><u>自动化设备</u></a>有限公司推出的综合性能测试机，凭通过技术创新重新定义了电池性能测试的标准，在保证测试精度的同时，提升了验证效率。</p>
<p>
	<img src="https://file1.elecfans.com/web3/M00/46/D6/wKgZPGlksRaAWtA4AFX4Si_ACB4700.png" alt="wKgZPGlksRaAWtA4AFX4Si_ACB4700.png"/>BT-电池组综合性能测试机</p>
<p>
	一、从“单点检测”到“系统级验证”的跨越<br/>
	1.一站式集成设计：单工位完成全流程测试<br/>
	传统检测模式需多台设备串联作业，单组电池组检测耗时长达数小时，且重复装夹易引入<a href="https://www.elecfans.com/v/tag/1472/" target="_blank"><u>机械</u></a>误差。比斯特测试机通过模块化设计，将<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>性能、功能安全、环境适应性等检测模块集成于同一平台，电芯只需一次装夹即可完成电压、内阻、充放电效率、过充过放保护、负载带载等关键指标测试。<br/>
	2.分布式同步采集架构：毫秒级捕捉动态参数<br/>
	电池组在真实工况下的性能衰减往往源于电芯间微秒级的响应差异，比斯特测试机采用分布式测量架构，通过24位<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a><a href="https://www.elecfans.com/tags/adc/" target="_blank"><u>ADC</u></a>模块与四线制采样技术，实现电压（精度±0.05%FS）、<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>（精度±0.1%FS）、温度（±0.5℃）多参数的同步采集，采样频率达10kHZ。<br/>
	3.边缘计算与云平台协同：实时生成深度报告<br/>
	设备搭载自主研发的<a href="https://www.elecfans.com/tags/c#/" target="_blank"><u>C#</u></a>WPF<a href="https://bbs.elecfans.com/zhuti_1184_1.html" target="_blank"><u>上位机</u></a>系统，可本地完成实时数据处理与故障诊断。测试数据存储至SQL数据库，支持与MES系统对接，自动生成充放电曲线、测试数据、合格判定等测试结果的可视化报告。</p>
<p>
	二、重构电池组性能验证流程<br/>
	柔性化配置适应多元需求：设备支持7.2V-100V电压范围、0.01A-100A电流档位的自由组合，覆盖三元锂、磷酸铁锂、钠离子等主流电池体系，可实现“一机多用”。<br/>
	自动化工装与防错机制：采用压力感应定位装置与智能防呆设计，确保电池组装夹稳定，避免接触不良导致的误判。设备内置过充、过放、短路等故障<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>场景，可自动注入过充、短路、温度突变等异常工况，验证BMS保护策略的响应速度与冗余度。<br/>
	数据链贯通生产全周期：测试结果自动生成CSV文件并存储至MES系统，支持测试数据与SPC统计分析。设备通过构建“电芯-模组-电池组”三级数据关联模型，企业可追溯性能衰退根源至具体生产批次，将售后故障定位时间从72小时压缩至2小时。</p>
<p>
	三、比斯特测试机的技术创新架构<br/>
	在硬件层面，测试机采用高精度数据采集系统和热管理模块，通过模块化设计，可根据不同电池规格和测试需求灵活配置测试通道，可支持多通道并行测试，大幅提升了测试吞吐量。<br/>
	在软件层面，测试平台搭载了自主研发的测试管理系统，能够提供标准测试流程，还支持用户自定义测试方案。内置的系统能够实时分析测试数据，自动识别异常情况，并对电池健康状态进行预测。<br/>
	测试流程的优化则体现在全自动化测试能力上，从从电池组上料、接线、测试到数据分析、报告生成，整个过程无需人工干预。系统自动识别电池类型和规格，匹配相应的测试程序，大幅减少了人为操作可能引入的误差，同时将测试准备时间缩短了60%以上。</p>
<p>
	在追求能源转型和交通电动化的道路上，电池技术的进步离不开精确高效的测试验证手段。深圳比斯特自动化设备有限公司的电池组综合性能测试机，通过技术创新解决了传统测试方法的瓶颈问题，在提升测试效率的同时确保了测试精度，为电池行业的高质量发展提供了有力支撑。<br/><br/>
	审核编辑 黄宇</p>]]></description></item><item>    <title><![CDATA[RK平台Linux系统压测操作步骤]]></title>    <link>https://www.elecfans.com/d/7401337.html</link>    <guid>https://www.elecfans.com/d/7401337.html</guid>    <pubDate>2026-02-06 16:38:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h2>
		</h2>
	
		<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、压测的重要性与核心目的</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为什么必须做压测？</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台多应用于<a href="https://www.elecfans.com/soft/data/21-22/" target="_blank"><u>嵌入式</u></a>设备（如<a href="https://www.elecfans.com/v/tag/204/" target="_blank"><u>工业控制</u></a>器、智能终端、<a href="https://www.elecfans.com/soft/data/39-96/" target="_blank"><u>消费电子</u></a>），这类设备常面临</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">复杂工况</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（高低温、高负载、长期运行）与</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">严苛可靠性要求</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，压测是量产前不可或缺的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">风险拦截环节</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，核心原因包括：</span></span></font></span></p>
	<p>
		<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixyAbF6WAAAy3P-rYbc808.png" style="text-align:center;" alt="wKgZPGkaixyAbF6WAAAy3P-rYbc808.png"/></p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件隐患提前暴露</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：避免因</span></span></font><span><span style="background-color:rgb(255,255,255);">IO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">电压不匹配、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1729" target="_blank"><u>DDR</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>干扰、<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>纹波超标等问题，导致设备量产后面临死机、重启、硬件烧毁等故障；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">软件稳定性验证</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：排查多模块协同（如</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>CPU</u></a>+DDR+<a href="https://www.elecfans.com/tags/wi-fi/" target="_blank"><u>Wi-Fi</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、长期高负载下的内存泄漏、线程死锁、驱动兼容性问题；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">性能达标保障</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：确保磁盘读写、</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/gpu/" target="_blank"><u>GPU</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">渲染、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">算力等关键指标满足产品设计需求，避免用户使用时出现卡顿、响应慢等体验问题；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">4.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">成本风险控制</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：若未做压测，设备量产后面临售后<a href="https://m.elecfans.com/v/tag/1215/" target="_blank"><u>维修</u></a>、召回，成本是前期压测投入的</span></span></font><span><span style="background-color:rgb(255,255,255);">10-100</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">倍，且损害品牌口碑。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">压测的核心价值</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">5.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">被动修复</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">转为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">主动预防</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：在实验室环境<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>设备全生命周期可能遇到的极端场景，提前解决</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">90%</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">以上的稳定性问题；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">6.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">量化设备可靠性：通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“10</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">台设备</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">×24</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">小时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">高低温循环</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等标准化压测，验证设备连续运行无故障时长，为量产提供数据支撑；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">7.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">适配场景拓展：通过用户场景压测，确保设备在真实使用场景（如词典笔</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">扫描</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">-</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">翻译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">-</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">待机</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、工业设备</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据采集</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">-</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">传输</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">-</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">存储</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）下稳定运行。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:'等线';font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">二</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、压测前准备</span></span></font></span></b></h2>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">8.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">开启测试工具配置</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：在</span></span></font><span><span style="background-color:rgb(255,255,255);">Buildroot</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中启用所需测试包，执行如下配置命令，确保</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、内存、<a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a>、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Wi-Fi</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等测试功能可用：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	
		<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 启用CPU和内存压力测试工具</span></span></code><code><span><span class="code-snippet__attr">BR2_PACKAGE_STRESSAPPTEST</span>=y</span></code><code><span><span class="code-snippet__comment"># 启用内存正确性测试工具</span></span></code><code><span><span class="code-snippet__attr">BR2_PACKAGE_MEM<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>TE</u></a>STER</span>=y</span></code><code><span><span class="code-snippet__comment"># 启用包含多模块测试的套件</span></span></code><code><span><span class="code-snippet__attr">BR2_PACKAGE_<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>ROCKCHIP</u></a>_TEST</span>=y</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置测试目录权限</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：确保</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/userdata/rockchip-test</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录具备可读写权限，用于存储压测日志和数据。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">开启串口日志保存</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：连接产品串口，开启串口<a href="https://bbs.elecfans.com/zhuti_1184_1.html" target="_blank"><u>上位机</u></a>的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">保存所有日志</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">功能，便于后续问题分析。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:'等线';font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">三</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、软件稳定性压测</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">基础工具使用</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">stressapptest</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（内存</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">磁盘压力测试）</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">典型执行命令：测试</span></span></font><span><span style="background-color:rgb(255,255,255);">256MB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内存，运行</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">热复制</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">线程，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">20</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">秒后退出，命令如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">stressapptest</span>-s<span class="code-snippet__number">20</span>-M<span class="code-snippet__number">256</span>-m<span class="code-snippet__number">8</span>-W</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">常用参数说明：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">-M</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">指定测试</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/ram/" target="_blank"><u>RAM</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">大小，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">-s</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">指定运行秒数，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">-m</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">指定内存复制线程数，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">-l</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">指定日志输出文件。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">关闭测试：执行</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">killall stressapptest</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">memtester</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（内存正确性测试）</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行命令格式：指定测试内存大小（单位</span></span></font><span><span style="background-color:rgb(255,255,255);">B/K/M/G</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）和循环次数，示例如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>memtester<span class="code-snippet__selector-attr">[-p 物理地址基址 [-d 设备]</span>] &lt;内存大小&gt;<span class="code-snippet__selector-attr">[B/K/M/G]</span><span class="code-snippet__selector-attr">[循环次数]</span></span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试项包含：</span></span></font><span><span style="background-color:rgb(255,255,255);">Stuck <a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>Ad</u></a>dress</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Random Value</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Compare XOR</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">18</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">项内存校验。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">注意事项：</span></span></font><span><span style="background-color:rgb(255,255,255);">memtester</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">出错不会自动停止，需实时观测程序打印；关闭测试执行</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">killall memtester</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">多模块专项测试（基于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Rockchip test</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">套件）</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DDR</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行方式一：通过套件脚本启动</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">运行套件入口脚本：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">bash /rockchip-test/rockchip_test.sh</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“1”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">选择</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DDR</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试，再根据设备变频能力选场景（不支持变频选</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“3”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，支持选</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“5”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">c.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“1”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">选择</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">memtester</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试，开始执行。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行方式二：直接运行脚本</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：执行</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">bash /rockchip-test/ddr/memtester_test.sh</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，默认测试系统可用内存的一半。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">DDR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">变频测试</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">自动变频：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">bash /rockchip-test/ddr/ddr_freq_scaling.sh</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，脚本会循环切换频率（如</span></span></font><span><span style="background-color:rgb(255,255,255);">528000000 Hz</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">324000000 Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">指定频率：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">bash /rockchip-test/ddr/ddr_freq_scaling.sh 528000000</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，频率需在支持列表内，否则会打印可用频率；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">关闭变频测试：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">killall bash</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动测试：运行</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">bash /rockchip-test/rockchip_test.sh</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，输入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“2”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">选择</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试，根据变频能力选场景（不支持选</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“1”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，支持选</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“3”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">CPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">变频测试</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">自动变频：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">bash /rockchip-test/cpu/cpu_freq_scaling.sh</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，切换频率如</span></span></font><span><span style="background-color:rgb(255,255,255);">816000 KHz</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1104000 KHz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">指定频率：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">bash /rockchip-test/cpu/cpu_freq_scaling.sh 1104000</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，频率不在支持列表时会打印可用值；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">关闭测试：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">killall bash</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Flash</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行逻辑：在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">$test_dir/src_test_data</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">生成</span></span></font><span><span style="background-color:rgb(255,255,255);">7</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">5MB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">以内随机源数据，拷贝到</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">$test_dir/des_test_data</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><span><span style="background-color:rgb(255,255,255);">5</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个子目录，对比</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MD5</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">值，循环</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">200</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">次。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">4</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）待机唤醒测试</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">前提条件：系统需有正常工作的</span></span></font><span><span style="background-color:rgb(255,255,255);">RTC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行逻辑：默认循环</span></span></font><span><span style="background-color:rgb(255,255,255);">10000</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">次，每次待机唤醒时间为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3-6</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">秒随机值。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">5</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">reboot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行逻辑：默认重启</span></span></font><span><span style="background-color:rgb(255,255,255);">10000</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">次，每次启动后</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">秒自动关机；若开启</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">CONFIG_PSTORE_RAM</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，会检查每次关机日志是否有崩溃异常；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">提前关闭：执行</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">echo off &gt; /userdata/rockchip_test/reboot_cnt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">6</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Camera</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">方式一：</span></span></font><span><span style="background-color:rgb(255,255,255);">rkisp_demo</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">脚本</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">启用配置：</span></span></font></span></p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">BR2_PACKAGE_CAMERA_ENGINE_RK<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>AI</u></a>Q_RKISP_DEMO=y</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行脚本：</span></span></font></span></p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">bash /rockchip-test/camera/camera_stresstest_rkisp_demo.sh</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，循环抓取</span></span></font><span><span style="background-color:rgb(255,255,255);">ISP CIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>数据各</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">100</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">帧。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">方式二：</span></span></font><span><span style="background-color:rgb(255,255,255);">v4l2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">脚本</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">启用配置：</span></span></font></span></p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">BR2_PACKAGE_LIBV4L_U<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>LS=y</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行脚本：</span></span></font></span></p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">bash /rockchip-test/camera/camera_stresstest_v4l2.sh</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，以</span></span></font><span><span style="background-color:rgb(255,255,255);">640x480</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">分辨率循环抓取</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1515" target="_blank"><u>USB</u></a> ISP CIF</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口数据各</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">5</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">帧，校验文件大小。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">7</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Video</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">准备工作：将测试视频文件放入</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/userdata/videos</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（优先）或</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/mnt/udisk/videos</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行测试：运行</span></span></font><span><span style="background-color:rgb(255,255,255);">Video</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试脚本，循环播放目标目录下的视频文件。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">8</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Wi-Fi Bt</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行逻辑：运行对应测试脚本，自动循环执行</span></span></font><span><span style="background-color:rgb(255,255,255);">Wi-Fi</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Bt</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的开启、关闭操作。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:'等线';font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">四</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、性能测试</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">磁盘读写测试</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">eMMC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">读写</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">前提：用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">fdisk -l</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看可读写分区（如</span></span></font><span><span style="background-color:rgb(255,255,255);">mmcblk0p8</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">写测试：</span></span></font></span></p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dd if=/dev/zero of=/dev/mmcblk0p8 bs=1M count=2000 oflag=direct,nonblock</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">读测试：</span></span></font></span></p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dd if=/dev/mmcblk0p8 of=/dev/null bs=1M count=2000 iflag=direct,nonblock</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">U</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">盘读写</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">写测试：</span></span></font></span></p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dd if=/dev/zero of=/dev/<a href="https://www.hqchip.com/app/1522" target="_blank"><u>sd</u></a>a1 bs=1M count=2000 oflag=direct,nonblock</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">/dev/sda1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">U</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">盘分区）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">读测试：</span></span></font></span></p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dd if=/dev/sda1 of=/dev/null bs=1M count=2000 iflag=direct,nonblock</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">性能模式设置</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">开启高性能模式：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">echo pe<a href="https://www.elecfans.com/tongxin/rf/" target="_blank"><u>rf</u></a>ormance | tee $(find /sys/ -name *governor)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">3. CPU/DDR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">频率查看</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行命令：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">cat /sys/kernel/debug/clk/clk_summary |grep -E "cpu|<a href="https://m.hqchip.com/app/1378" target="_blank"><u>arm</u></a>|ddr"</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">4. GPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">跑分</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">全屏跑分：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sh /rockchip-test/gpu/test_fullscreen_glmark2.sh</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">后台跑分（不显示画面）：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sh /rockchip-test/gpu/test_offscreen_glmark2.sh</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:'等线';font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">五</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、硬件稳定性测试</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1. IO-DOMAINS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">检查</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心要求：确保所有</span></span></font><span><span style="background-color:rgb(255,255,255);">GPIO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">电源域的软件配置电压与硬件供电一致（如软件设</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1.8V</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">则硬件需供</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1.8V</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">参考文档：对应芯片平台文档（如</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3568</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">参考</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">Rockchip_RK356X_Introduction_IO_Power_Domains_Configuration_CN.pdf</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">电源测试</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试内容：若电源方案偏离参考设计（如用分立电源），需测试冷启动</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">重启时的上电时序、高负载下电源纹波，重点关注</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VDD_<a href="https://www.elecfans.com/tags/Cirrus logic/" target="_blank"><u>LOGIC</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VDD_ARM</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等核心电源。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">信号测试</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">设计要求：</span></span></font><span><span style="background-color:rgb(255,255,255);">DDR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">设计按对应模板，颗粒选</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">AVL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">列表（通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">redmine</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">获取）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">图纸审核：硬件图纸完成后，提交审核（如通过</span></span></font><span><span style="background-color:rgb(255,255,255);">redmine</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">4.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高低温测试</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试环境：产品工作温度的高温上限和低温下限；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试内容：在高低温下执行</span></span></font><span><span style="background-color:rgb(255,255,255);">CPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">压力测试、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DDR</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">压力测试、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">reboot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试、冷启动测试。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:'等线';font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">六</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、用户场景压测</span></span></font></span></b></h2>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">构建逻辑：结合产品实际功能，用基础脚本组合场景；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">示例（词典笔场景）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__keyword">while</span><span class="code-snippet__literal">true</span>;<span class="code-snippet__keyword">do</span></span></code><code><span><span class="code-snippet__comment"># 模拟扫描识别（采图）</span></span></code><code><span> v4l2-ctl --stream-mmap --stream-to=/tmp/s<a href="https://www.hqchip.com/app/2004" target="_blank"><u>can</u></a>.jpg --stream-count=1</span></code><code><span><span class="code-snippet__comment"># 模拟播放翻译结果</span></span></code><code><span> aplay /tmp/translate.wav</span></code><code><span><span class="code-snippet__comment"># 模拟待机</span></span></code><code><span> pm-suspend</span></code><code><span><span class="code-snippet__comment"># 模拟RTC唤醒（10秒后唤醒）</span></span></code><code><span> rtcwake -m no -s 10</span></code><code><span><span class="code-snippet__comment"># 随机开关Wi-Fi</span></span></code><code><span><span class="code-snippet__keyword">if</span>[ $((RANDOM %<span class="code-snippet__number">2</span>)) -eq 0 ];<span class="code-snippet__keyword">then</span></span></code><code><span>  nmcli r wifi on</span></code><code><span><span class="code-snippet__keyword">else</span></span></code><code><span>  nmcli r wifi off</span></code><code><span><span class="code-snippet__keyword">fi</span></span></code><code><span><span class="code-snippet__keyword">done</span></span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心思路：覆盖</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">开机</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">-</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心功能</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">-</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">待机</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">-</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">唤醒</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">-</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">辅助功能（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Wi-Fi</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的完整用户操作链。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[分布式光伏发电接入配电网技术规定中关于“四可”装置的内容解析]]></title>    <link>https://www.elecfans.com/d/7641948.html</link>    <guid>https://www.elecfans.com/d/7641948.html</guid>    <pubDate>2026-02-06 16:39:00</pubDate>    <description><![CDATA[<div class="vditor-preview__action"/><div class="vditor-reset"><p>随着分布式光伏发电装机规模的快速增长，其对配电网安全稳定运行的影响日益凸显。《分布式光伏发电接入配电网技术规定》（GB/T 38946-2020）作为核心国标，首次系统性明确了“四可”（可观、可测、可调、可控）装置的技术要求，将其从行业推荐性能力升级为刚性并网门槛。详细了解光伏四可装置可咨询:1.3.7-5.0.0.4-6.2.0.0。这些规定既搭建了统一的技术框架，又为地方电网差异化落地预留空间，是分布式光伏合规并网、高效消纳的核心遵循。</p><p><strong>一、可观：全量数据可视化，筑牢调控基础</strong></p><p>“可观”是“四可”能力的前提，核心要求是实现光伏电站运行状态的全维度、实时监控，打破传统电站“黑箱运行”困境。根据GB/T 38946-2020条款，分布式光伏系统需具备全景数据采集与上传能力，确保电网端与运营方同步掌握电站动态。</p><p><strong>国标明确的核心内容包括</strong> ：</p><ul><li>一是采集范围需覆盖30+项关键参数，涵盖发电功率、三相电压<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>、设备温度、辐照强度、<a href="https://www.elecfans.com/tags/逆变器/" target="_blank"><u>逆变器</u></a>运行状态等，实现“能量流+设备状态+环境条件”的全要素监测；</li><li>二是数据传输要求实时性，<a href="https://m.elecfans.com/v/tag/873/" target="_blank"><u>高压</u></a>并网项目（10kV及以上）需满足1秒级数据刷新，低压项目不低于15秒级，且支持远程监控系统实时调取；</li><li>三是兼容性要求，数据采集终端需支持DL/T 698.45等国网标准协议，确保与电网调度平台无缝对接。</li></ul><p>地方电网在此基础上进一步细化，例如华东地区要求工商业光伏按生产线细分能耗数据，西北地区则强调户外电站需补充风速、环境温度等气象数据，为电网源网荷储协同调度提供支撑。</p><p><strong>二、可测：精准计量+预测，支撑科学调度</strong></p><p>“可测”聚焦数据精度与预判能力，要求光伏系统不仅能精准计量电能，还能为电网调度提供短期出力预测支撑，避免因出力波动引发电网电压、频率失衡。GB/T 38946-2020对测量精度、预测能力及计量规范均作出强制性要求。</p><p><img src="https://file1.elecfans.com/web3/M00/4B/13/wKgZPGmFqC-AC_j-AAY7XwYYUJY96.jpeg" alt=""/></p><p><strong>技术条款明确</strong> ：</p><ul><li>其一，<a href="https://www.hqchip.com/app/1709" target="_blank"><u>电能计量</u></a>精度需达到0.5级及以上，区分“自发自用、余电上网、电网购电”多向流量计量，误差控制在±0.5%以内，核心依赖符合标准的智能电表与逆变器检测模块；</li><li>其二，具备短期发电量预测能力，需提前4-24小时预判出力趋势，预测误差日均不超过10%，为电网负荷平衡规划提供数据依据；</li><li>其三，电能质量监测需覆盖谐波、电压偏差等指标，其中谐波电流总畸变率不得超过5%，防止影响电网电能质量。</li></ul><p>实操中，老旧电站需重点改造测量设备——部分早期逆变器不具备0.5级以上测量能力，需更换检测模块或整机，否则无法通过并网验收。</p><p><strong>三、可调：柔性响应指令，适配电网需求</strong></p><p>“可调”是应对光伏出力波动、提升电网消纳能力的核心，要求系统接到电网指令后，能灵活调整有功、无功功率，实现从“被动适应”到“主动支撑”的转变。GB/T 38946-2020对调节范围、精度及响应速度作出明确界定。</p><p><img src="https://file1.elecfans.com/web3/M00/4B/13/wKgZPGmFqC-AfF0QAAbHUug-9DQ18.jpeg" alt=""/></p><p><strong>核心规定包括：</strong></p><ul><li><strong>一是功率调节范围</strong> ，有功功率需支持0-100%额定功率连续可调，无功功率调节需满足<a href="https://m.hqchip.com/app/1717" target="_blank"><u>功率因数</u></a>在0.95-1.0之间动态调整，适配电网电压、频率补偿需求；</li><li><strong>二是调节精度与稳定性</strong> ，有功功率调节精度需达到±1%额定功率，输出功率波动幅度控制在额定功率的10%/分钟以内，避免功率骤变对电网造成冲击；</li><li><strong>三是响应时效</strong> ，低压项目响应时间不超过2秒，高压项目需缩短至1秒内，确保快速跟进电网调度指令。</li></ul><p>不同场景解决方案存在差异：户用项目可通过规约<a href="https://www.hqchip.com/app/1718" target="_blank"><u>转换器</u></a>实现基础调节，工商业10kV并网项目需配置AGC（自动发电控制）系统，集中式电站则需AGC与AVC（自动电压控制）协同，实现有功、无功精准调控。</p><p><strong>四、可控：远程智控+安全兜底，保障电网安全</strong></p><p>“可控”是电网安全运行的底线，要求光伏系统具备远程操作与应急保护能力，既能响应电网有序调控，又能在故障时快速隔离风险。GB/T 38946-2020将防孤岛保护、远程控制<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>等作为强制性条款。</p><p><img src="https://file1.elecfans.com/web3/M00/4B/14/wKgZO2mFqC-AbpMzAATYy2IzQnc87.jpeg" alt=""/></p><p><strong>关键内容包括：</strong></p><ul><li><strong>一是远程控制功能</strong> ，需支持电网调度<a href="https://www.hqchip.com/tags" target="_blank"><u>中心</u></a>远程启停、功率限值设定等操作，并网开关需具备远程控制接口，指令执行成功率不低于99.5%；</li><li><strong>二是防孤岛保护</strong> ，电网故障断电时，系统需在0.2秒内与电网解列，避免向电网反送电造成人员伤亡或设备损坏，且保护装置需定期校验，确保动作可靠；</li><li><strong>三是分级控制策略</strong> ，支持“先高压、后低压”“优先调控工商业项目”的电网调控逻辑，具备超容发电治理能力，持续30分钟超报装容量时自动触发调节指令。</li></ul><p>此外，国标要求<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>链路采用SM2/SM3国密<a href="https://m.elecfans.com/v/tag/2562/" target="_blank"><u>算法</u></a>加密，防止数据泄露与指令篡改，确保远程控制的安全性与可靠性。</p><p><strong>五、合规落地：国标与地方规范的协同衔接</strong></p><p>GB/T 38946-2020搭建了“四可”装置的通用框架，地方电网公司结合区域特性进一步细化要求，形成“国标打底、地方补位”的合规体系。例如，<a href="https://m.elecfans.com/v/tag/293/" target="_blank"><u>新能源</u></a>渗透率高的西北地区，要求集中式电站可调响应时间≤1秒；负荷密集的华东地区，侧重工商业项目能耗数据细分；户用项目门槛最低，核心满足“可观+基础可测”，部分省份补充过压保护功能即可。</p><p>从实践价值来看，满足“四可”要求的项目不仅能顺利并网，还能降低收益风险——如浙江省明确，具备“四可”能力的项目消纳补偿分摊系数仅为0.5，不具备的则为1，直接影响项目盈利水平。同时，“四可”改造能提升发电效率约5%，降低运维成本20%，实现合规与收益的双重提升。</p><p>《分布式光伏发电接入配电网技术规定》中关于“四可”装置的内容，本质是通过标准化技术要求，实现分布式光伏与配电网的协同共生。从可观的全量监测到可测的精准计量，从可调的柔性响应到可控的安全兜底，“四可”形成完整技术闭环，既破解了光伏规模化并网带来的消纳难题，又为光伏参与电力市场化交易奠定基础。随着新型<a href="https://m.elecfans.com/v/tag/4675/" target="_blank"><u>电力系统</u></a>建设推进，“四可”装置将不再是单纯的并网门槛，更成为分布式光伏高质量发展的核心支撑。</p><p>以上是由光伏四可装置/一次调频装置服务厂家西格电力分享，欢迎您阅读、点赞。</p><p>审核编辑 黄宇</p></div>]]></description></item><item>    <title><![CDATA[深度剖析MAX17523A：工业电源保护的理想之选]]></title>    <link>https://www.elecfans.com/d/7641955.html</link>    <guid>https://www.elecfans.com/d/7641955.html</guid>    <pubDate>2026-02-06 16:40:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641955" value="https://file1.elecfans.com/web2/M00/82/14/poYBAGOT8UOAVpsaAA7WNDOa6Wg251.pdf"/><h1>
	深度剖析MAX17523/MAX17523A：工业<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>保护的理想之选</h1>
<p>
	在电子设备的设计中，电源保护是至关重要的一环。特别是在工业环境下，复杂多变的电源状况对设备的稳定性和可靠性提出了极高的要求。今天，我们就来深入探讨<a href="https://bbs.elecfans.com/group_65" target="_blank"><u>Analog</u></a> Devices公司推出的MAX17523/MAX17523A这两款可调过压和过流保护器件，看看它们是如何为系统提供可靠保护的。</p>
<p>
	文件下载：<a href="javascript:;" data-annex="annex0_7641955" target="_blank">MAX17523A.pdf</a></p>
<h2>
	一、产品概述</h2>
<p>
	MAX17523/MAX17523A属于Olympus系列IC，是业界最小且功能强大的集成系统保护解决方案。它们能够有效保护系统免受高达±40V的正负输入电压故障影响，内置的低导通电阻（典型值190mΩ）集成FET，可降低功耗并提高效率。</p>
<h3>
	主要特性</h3>
<ol><li>
		<strong>宽输入电源范围</strong>：MAX17523的输入范围为+4.5V至+36V，MAX17523A为+4.2V至+36V，能适应多种电源环境。</li>
	<li>
		<strong>负输入耐受能力</strong>：可承受-36V的负输入电压，增强了系统的抗干扰能力。</li>
	<li>
		<strong>低导通电阻</strong>：典型值190mΩ的RON，减少了功率损耗。</li>
	<li>
		<strong>反向<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>控制</strong>：具备反向电流控制输入，防止反向电流对系统造成损害。</li>
	<li>
		<strong>热过载保护</strong>：当器件温度过高时，自动关闭以保护器件安全。</li>
	<li>
		<strong>宽温度范围</strong>：工作温度范围为-40°C至+125°C，适用于各种恶劣工业环境。</li>
</ol><h2>
	二、灵活的设计选项</h2>
<h3>
	1. 可调OVLO和UVLO阈值</h3>
<p>
	用户可以通过外部<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>灵活设置过压锁定（OVLO）和欠压锁定（UVLO）阈值，满足不同应用的需求。MAX17523的可调过压范围为6V至36V，可调欠压范围为4.4V至24V；MAX17523A的可调过压范围同样为6V至36V，可调欠压范围为4.2V至24V。</p>
<h3>
	2. 可<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>正向电流限制</h3>
<p>
	电流限制范围为0.15A至1A，可根据实际应用进行精确设置，有效保护系统免受过流损害。</p>
<h3>
	3. 可编程过流故障响应</h3>
<p>
	提供三种过流故障响应模式：自动重试（Autoretry）、锁存关闭（Latch-Off）和连续（Con<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>ti</u></a>nuous）。不同的模式适用于不同的应用场景，例如自动重试模式可在故障消除后自动恢复供电，锁存关闭模式则需要手动复位，而连续模式则持续限制电流。</p>
<h3>
	4. 双使能输入</h3>
<p>
	具备EN和HVEN两个使能输入，方便用户进行灵活的<a href="https://m.hqchip.com/app/1730" target="_blank"><u>开关控制</u></a>。</p>
<h2>
	三、<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性详解</h2>
<h3>
	1. 输入电压和电流</h3>
<p>
	MAX17523A的输入电压范围为4.2V至36V，MAX17523为4.5V至36V。在关机状态下，输入电流和输出电流都非常低，有效降低了功耗。</p>
<h3>
	2. 过压和欠压阈值</h3>
<p>
	内部预设的OVLO阈值为33V（典型值），UVLO阈值为19V（典型值）。用户也可以通过外部电阻进行调整，以满足特定的应用需求。</p>
<h3>
	3. 电流限制和精度</h3>
<p>
	电流限制范围为0.15A至1A，不同电流区间的精度有所不同，0.15A ≤ ILIM &lt; 0.3A时，精度为±20%；0.3A ≤ ILIM &lt; 1.0A时，精度为±10%。</p>
<h3>
	4. 开关时间和响应时间</h3>
<p>
	开关的开启时间、关闭时间以及过压、过流时的响应时间都非常短，能够快速响应故障并保护系统。例如，过压开关关闭时间典型值为3µs，过流开关关闭时间在消隐时间后典型值也为3µs。</p>
<h2>
	四、工作模式分析</h2>
<h3>
	1. 自动重试模式（Autoretry）</h3>
<p>
	当电流达到阈值时，消隐时间（tBLANK，典型值21ms）开始计时。如果过流情况持续到消隐时间结束，FLAG<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>将被置低，同时进入重试时间（tRETRY，典型值620ms），在此期间FET关闭。重试时间结束后，FET重新开启。如果故障仍然存在，将重复上述过程。这种模式在过流或短路情况下能有效降低系统功耗，通过公式[LO<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a> =I<em>{LIM}left[fr<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>{t</em>{BLANK }}{t<em>{BLANK }+t</em>{RETRY }}right]]可计算平均输出电流，以21ms的tBLANK和620ms的tRETRY为例，占空比为3.3%，可实现96.7%的功率节省。</p>
<h3>
	2. 锁存关闭模式（Latch-Off）</h3>
<p>
	当电流达到阈值，消隐时间开始计时。如果过流情况在消隐时间内未消失，开关将关闭并保持关闭状态。要重新开启开关，需要通过切换控制逻辑EN或HVEN的电压状态，或者对输入电压进行循环操作。此模式下，器件锁存关闭时OUT引脚会有高达24µA的泄漏电流。</p>
<h3>
	3. 连续模式（Continuous）</h3>
<p>
	当电流达到阈值时，器件将输出电流限制在设定的电流值。如果过流情况持续到消隐时间结束，FLAG信号置低；当过载情况消除后，FLAG信号恢复。</p>
<h2>
	五、应用注意事项</h2>
<h3>
	1. 设置电流限制</h3>
<p>
	通过连接SETI引脚到地的电阻来设置电流限制值，公式为[R<em>{SETI}(k Omega)=frac{6100}{I</em>{LIM}(mA)}]。若SETI引脚悬空，则电流限制为0A；若SETI引脚接地，FLAG信号将被置低。</p>
<h3>
	2. 输入旁路<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a></h3>
<p>
	为了限制瞬间输出短路时的输入电压降，需要在IN引脚和地之间连接至少0.47µF的电容。电容值越大，输入电压的下冲就越小。</p>
<h3>
	3. 热插拔保护</h3>
<p>
	在热插拔应用中，由于寄生电缆电感和输入电容的存在，会导致输入电压过冲和振铃。为了保护器件，建议在输入<a href="https://m.hqchip.com/app/1529" target="_blank"><u>端子</u></a>附近使用能够将输入浪涌限制在40V的瞬态电压抑制器（<a href="https://m.hqchip.com/app/1587" target="_blank"><u>TVS</u></a>）。</p>
<h3>
	4. 输出电容</h3>
<p>
	为了确保在全温度范围和可编程电流限制范围内稳定运行，需要在OUT引脚和地之间连接4.7µF的陶瓷电容。但过大的输出电容可能会因电容上的dv/dt减小而导致误判过流情况，可通过公式[C<em>{MAX }(mu F)=frac{I</em>{LIM}(mA) × t<em>{BLANK(TYP)}(ms)}{V</em>{IN}(V)}]计算可连接到OUT的最大电容值。</p>
<h3>
	5. 输出续流<a href="https://m.hqchip.com/app/1554" target="_blank"><u>二极管</u></a></h3>
<p>
	在需要保护电感负载或长电缆突然短路到地的应用中，建议在OUT端子和地之间连接一个<a href="https://www.hqchip.com/app/1558" target="_blank"><u>肖特基</u></a>二极管，以防止短路事件中因电感反冲导致OUT端出现负尖峰。</p>
<h3>
	6. 布局和散热</h3>
<p>
	为了优化开关对输出短路情况的响应时间，应尽量缩短所有走线，减少寄生电感的影响。输入和输出电容应尽可能靠近器件放置（不超过5mm），IN和OUT应通过宽而短的走线连接到电源总线。同时，为了提高系统的热容量并降低热阻，建议从裸露焊盘到接地平面设置热过孔。</p>
<h2>
	六、总结</h2>
<p>
	MAX17523/MAX17523A凭借其宽输入电源范围、灵活的设计选项、可靠的保护功能以及良好的电气特性，成为工业电源保护领域的理想选择。无论是<a href="https://www.elecfans.com/v/tag/117/" target="_blank"><u>传感器</u></a>系统、状态监测、工厂传感器还是过程分析等应用，都能为系统提供稳定可靠的电源保护。在实际设计中，我们需要根据具体的应用需求，合理设置各项参数，并注意布局和散热等问题，以充分发挥这两款器件的性能优势。</p>
<p>
	大家在使用MAX17523/MAX17523A的过程中遇到过哪些问题呢？或者对于电源保护设计还有哪些疑问？欢迎在评论区留言讨论。</p>]]></description></item><item>    <title><![CDATA[MAX16972A：汽车高速USB保护与充电检测的理想之选]]></title>    <link>https://www.elecfans.com/d/7641957.html</link>    <guid>https://www.elecfans.com/d/7641957.html</guid>    <pubDate>2026-02-06 16:40:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641957" value="https://file1.elecfans.com/web2/M00/A8/54/wKgZomUVW4aANgGoABouoOFD71o735.pdf"/><h1>
	MAX16972/MAX16972A：汽车高速<a href="https://www.hqchip.com/app/1515" target="_blank"><u>USB</u></a>保护与充电检测的理想之选</h1>
<p>
	在<a href="https://bbs.elecfans.com/group_78" target="_blank"><u>汽车电子</u></a>领域，USB<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>的应用越来越广泛，从汽车收音机、导航系统到USB集线器等，都离不开USB数据和<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>的稳定传输。然而，汽车环境复杂，USB接口面临着静电放电（<a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a>）、短路等多种风险。<a href="https://bbs.elecfans.com/group_264" target="_blank"><u>Maxim</u></a> In<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>grated推出的MAX16972/MAX16972A芯片，为汽车应用中的USB接口提供了可靠的保护和充电检测解决方案。</p>
<p>
	文件下载：<a href="javascript:;" data-annex="annex0_7641957" target="_blank">MAX16972A.pdf</a></p>
<h2>
	产品概述</h2>
<p>
	MAX16972/MAX16972A专为汽车收音机、导航、连接性和USB集线器等应用中的低压内部USB数据和电源线路提供高ESD和短路保护。它支持高速USB（480Mbps）和全速USB（12Mbps）操作，还集成了快速充电电路，可支持苹果设备的快速充电以及高速USB主机充电器<a href="https://m.hqchip.com/app/1808" target="_blank"><u>端口</u></a>检测协议。</p>
<h2>
	关键特性</h2>
<h3>
	1. 强大的短路保护</h3>
<p>
	该芯片具备多种短路保护功能，包括受保护的HVBUS、HVD+和HVD-输出端的电池短路保护，以及受保护的HVD+和HVD-输出端的HVBUS短路保护。能够承受高达+18V的电池短路情况，同时在HVBUS输出端提供接地短路和过流保护，保护内部BUS电源轨免受过大<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>故障的影响。</p>
<h3>
	2. 高ESD保护</h3>
<p>
	在所有受保护的HVBUS、HVD+和HVD-输出端，芯片提供了高达±15kV的空气间隙法和±8kV的接触法ESD保护，有效抵御静电干扰，确保设备在复杂环境下的稳定性。</p>
<h3>
	3. 低<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>开关与集成<a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a></h3>
<p>
	每个芯片包含两个低导通电阻（4.0Ω）的高速USB开关、一个限流的低压31mΩ BUS开关，并集成了<a href="https://m.elecfans.com/v/tag/873/" target="_blank"><u>高压</u></a>外部<a href="https://m.hqchip.com/app/1708" target="_blank"><u>电源开关</u></a>控制器。BUS开关能够启动高电容的非合规USB负载，为不同类型的设备提供稳定的电源支持。</p>
<h3>
	4. 智能充电检测</h3>
<p>
	芯片集成了苹果<a href="https://m.elecfans.com/v/tag/4103/" target="_blank"><u>iPhone</u></a>/iP<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a>快速充电终端电阻和符合USB 2.0电池充电规范的主机充电器端口检测电路，能够自动识别不同的充电模式，实现无缝的设备集成。支持USB-IF BC1.2充电下游端口（CDP）和专用充电端口（<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>P）模式，以及中国电信行业标准YD/T 1591 - 209和USB On-The-Go（OTG）功能。</p>
<h2>
	<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性</h2>
<h3>
	1. 电源供应</h3>
<ul><li>
		<strong>BUS电源范围</strong>：4.75V - 5.5V</li>
	<li>
		<strong>IN电源范围</strong>：3V - 3.6V</li>
	<li>
		<strong>IN过压锁定</strong>：3.8V</li>
</ul><h3>
	2. <a href="https://www.hqchip.com/app/1734" target="_blank"><u>电荷泵</u></a></h3>
<ul><li>
		<strong>空载输出电压</strong>：8V - 10.5V</li>
	<li>
		<strong>输出阻抗</strong>：50kΩ</li>
	<li>
		<strong>输出直流电流</strong>：20μA</li>
</ul><h3>
	3. USB开关特性</h3>
<ul><li>
		<strong><a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a><a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>范围</strong>：0V - 3.6V</li>
	<li>
		<strong>导通电阻</strong>：4Ω</li>
	<li>
		<strong>通道间导通电阻匹配</strong>：0.03Ω - 0.2Ω</li>
	<li>
		<strong>导通电阻平坦度</strong>：0.02Ω</li>
</ul><h3>
	4. 热保护</h3>
<ul><li>
		<strong>热关断温度</strong>：160°C</li>
	<li>
		<strong>热关断迟滞</strong>：20°C</li>
</ul><h2>
	工作模式</h2>
<h3>
	1. 禁用模式</h3>
<p>
	这是芯片的最低功耗模式，在此模式下，USB BUS电源、HVD+到D+和HVD-到D-的数据路径均被禁用。在进入或退出苹果iPhone/iPad快速充电模式之前，系统软件必须选择禁用模式至少100ms，以确保硬件和软件的真正复位。</p>
<h3>
	2. USB-IF专用充电端口（DCP）和苹果2.1A自动检测模式</h3>
<p>
	芯片具备iPad/DCP自动检测模式，可模拟专用iPad 2.1A充电和USB-IF专用充电端口（DCP）。在该模式下，高压保护的HVD+和HVD-引脚与低压D+和D-引脚断开连接，并连接到内部电阻分压器，提供符合苹果标准的iPad偏置电压。</p>
<h3>
	3. USB低速/全速（LS/FS）模式与自动主机充电器端口保护</h3>
<p>
	当USB兼容便携式设备检测到VBUS后，可通过向HVD+施加电压并检查HVD-上的电压来判断主机设备是否为充电器。在低/全速模式下，当设备枚举时D+或D-为高电平，将禁用自动充电器检测电路，直到检测到USB断开连接才会重新启用。</p>
<h3>
	4. USB高速（HS）模式</h3>
<p>
	该模式为USB高速（480Mbps）数据信号提供真正的直通操作，并禁用USB主机充电器端口检测电路。</p>
<h2>
	应用信息</h2>
<h3>
	1. 正向电流限制</h3>
<p>
	芯片允许通过一个电阻设置电源开关的电流限制，正向电流限制范围为500mA - 3A。在选择RISET电阻时，需要根据应用中的最大预期电流进行调整，并考虑一定的余量，以防止在最大预期电流下触发电流限制。</p>
<h3>
	2. 外部n沟道DMOS器件选择</h3>
<p>
	外部功率DMOS器件必须是20V VGS类型，电荷泵产生约7V VGS，可确保非逻辑电平器件的低导通电阻。</p>
<h3>
	3. 电源旁路<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a></h3>
<ul><li>
		<strong>HVBUS</strong>：使用0.1μF陶瓷电容尽可能靠近<a href="https://www.hqchip.com/app/1515" target="_blank"><u>USB连接器</u></a>旁路到GND，提供±15kV（HBM）ESD保护。在0.1μF陶瓷<a href="https://www.hqchip.com/app/1515" target="_blank"><u>连接器</u></a>电容和HVBUS节点之间放置铁氧体磁珠以降低EMI，并在HVBUS节点与GND之间串联一个1Ω电阻和10μF电容，避免HVBUS上的过冲。</li>
	<li>
		<strong>BUS</strong>：使用最小100μF、低ESR陶瓷电容旁路到GND，避免在热插拔HVBUS上的放电电容时BUS出现大的电压降。</li>
	<li>
		<strong>IN</strong>：使用1μF陶瓷电容旁路到GND，并在逻辑电源和IN节点之间放置一个1kΩ电阻，确保最佳的ESD性能。</li>
</ul><h3>
	4. 布线长度</h3>
<p>
	USB外设与HVBUS、HVD+和HVD-之间的布线长度应在0.5m - 5m范围内，以确保正常工作。该长度范围对应约650nH - 6.5mH的电感，有助于限制电池短路和接地短路事件中的电流上升率。</p>
<h3>
	5. USB数据线迹布局</h3>
<p>
	在USB高速模式下，需要仔细进行<a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>布局，确保90Ω受控差分阻抗匹配的等长迹线。在HVD_和D_引脚插入调谐电感和电容，以消除寄生电容，具体值取决于布局情况。</p>
<h2>
	总结</h2>
<p>
	MAX16972/MAX16972A芯片凭借其强大的保护功能、智能的充电检测和灵活的工作模式，为汽车应用中的USB接口提供了全面的解决方案。<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>在设计汽车USB相关电路时，可充分利用该芯片的特性，提高系统的可靠性和稳定性。你在使用类似芯片时遇到过哪些问题呢？欢迎在评论区分享你的经验。</p>]]></description></item><item>    <title><![CDATA[MAX16972：汽车高速USB保护器的卓越之选]]></title>    <link>https://www.elecfans.com/d/7641958.html</link>    <guid>https://www.elecfans.com/d/7641958.html</guid>    <pubDate>2026-02-06 16:40:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641958" value="https://file1.elecfans.com/web2/M00/A8/54/wKgZomUVW4aANgGoABouoOFD71o735.pdf"/><h1>
	MAX16972/MAX16972A：汽车高速<a href="https://www.hqchip.com/app/1515" target="_blank"><u>USB</u></a>保护器的卓越之选</h1>
<p>
	在如今的<a href="https://bbs.elecfans.com/group_78" target="_blank"><u>汽车电子</u></a>领域，USB<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>的应用越来越广泛，从汽车收音机、导航系统到各种连接设备和USB集线器，都离不开可靠的USB数据和<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>保护。<a href="https://bbs.elecfans.com/group_264" target="_blank"><u>Maxim</u></a> In<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>grated推出的MAX16972/MAX16972A 3A汽车高速USB保护器，以其出色的性能和多样的功能，成为了众多<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>的首选。接下来，我们就来深入了解一下这款产品。</p>
<p>
	文件下载：<a href="javascript:;" data-annex="annex0_7641958" target="_blank">MAX16972.pdf</a></p>
<h2>
	一、产品概述</h2>
<p>
	MAX16972/MAX16972A专为汽车应用而设计，为低压内部USB数据和电源线提供了高<a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a>和短路保护。它支持高速USB（480Mbps）和全速USB（12Mbps）操作，并且集成了相关电路，可实现对遵循苹果方法或高速USB主机充电器<a href="https://m.hqchip.com/app/1808" target="_blank"><u>端口</u></a>检测协议的消费设备的快速充电。此外，该产品还支持USB OTG功能。</p>
<h2>
	二、产品特性亮点</h2>
<h3>
	（一）强大的保护功能</h3>
<ol><li>
		<strong>短路保护</strong>：在受保护的HVBUS、HVD + 和HVD - 输出端提供了到电池的短路保护，以及HVD + 和HVD - 输出端到HVBUS的短路保护，能够承受高达+18V的到电池短路情况。同时，HVBUS输出端还提供了到地短路和过流保护，可保护内部BUS电源轨免受过度<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>故障的影响。</li>
	<li>
		<strong>ESD保护</strong>：在所有受保护的HVBUS、HVD + 和HVD - 输出端，提供了高达±15kV（空气间隙法）和±8kV（接触法）的高ESD保护，能有效抵御静电干扰。
		<h3>
			（二）高性能开关设计</h3>
	</li>
	<li>
		<strong>低导通电阻</strong>：具备两个低4.0Ω导通电阻的高速USB开关，以及一个电流限制的低压31mΩ BUS开关，能有效降低线路压降，满足USB电压规范。</li>
	<li>
		<strong>高带宽</strong>：拥有900MHz带宽的USB 2.0数据开关，确保数据传输的高速与稳定。
		<h3>
			（三）智能充电模式</h3>
		<p>
			通过智能状态机实现充电模式的自动转换，集成了苹果<a href="https://m.elecfans.com/v/tag/4103/" target="_blank"><u>iPhone</u></a> 1.0A专用充电模式、iP<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a> 2.1A专用充电模式，以及USB - IF BC1.2充电下游端口（CDP）和专用充电端口（<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>P）模式等，同时还支持中国<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>行业标准YD/T 1591 - 209。</p>
	</li>
</ol><h2>
	三、<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性剖析</h2>
<h3>
	（一）电源参数</h3>
<p>
	BUS电源供应范围为4.75 - 5.5V，IN电源供应范围为3 - 3.6V，并且具备IN过压锁定功能，当IN电压上升到3.8V时会触发锁定。</p>
<h3>
	（二）充电泵参数</h3>
<p>
	充电泵空载输出电压为8 - 10.5V，输出阻抗为50kΩ，输出直流电流在特定条件下为20μA。</p>
<h3>
	（三）数据开关参数</h3>
<p>
	<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a><a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>范围在0 - 3.6V，保护触发阈值为3.7 - 3.85V，保护响应时间为6μs，导通电阻为4Ω等，这些参数保证了数据传输的准确性和稳定性。</p>
<h3>
	（四）BUS<a href="https://m.hqchip.com/app/1708" target="_blank"><u>电源开关</u></a>参数</h3>
<p>
	包括V BUS 切换时间、HVBUS保护触发阈值、电压保护响应时间等一系列参数，确保了电源开关的可靠运行和对过压、欠压等情况的及时响应。</p>
<h2>
	四、工作模式解析</h2>
<h3>
	（一）禁用模式</h3>
<p>
	这是设备的最低功耗模式，此时USB BUS电源以及HVD + 到D + 和HVD - 到D - 的数据路径均被禁用。</p>
<h3>
	（二）USB - IF专用充电端口（DCP）和苹果自动检测模式</h3>
<ol><li>
		<strong>iPad/DCP自动检测模式</strong>：可模拟专用iPad 2.1A充电和USB - IF专用充电端口，通过监测HVD + 和HVD - 的电压来确定连接设备的类型，并相应地调整充电模式。</li>
	<li>
		<strong>iPhone/DCP自动检测模式</strong>：类似iPad模式，可模拟专用iPhone 1.0A充电和USB - IF专用充电端口。
		<h3>
			（三）USB低速/全速（LS/FS）模式</h3>
		<p>
			带有自动主机充电器端口保护功能，便携式设备连接后可通过特定方式检测主机是否为充电器，在设备枚举时，若D + 或D - 为逻辑高电平，则禁用自动充电器检测电路，确保USB通信不受干扰。</p>
		<h3>
			（四）USB高速（HS）模式</h3>
		<p>
			提供真正的直通操作，用于USB高速（480Mbps）数据信号传输，并禁用USB主机充电器端口检测电路。</p>
	</li>
</ol><h2>
	五、应用设计要点</h2>
<h3>
	（一）正向电流限制</h3>
<p>
	通过一个<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>可以设置电源开关的电流限制，典型电流限制会有±20%到±25%的变化，在设计时需要根据应用中的最大预期电流来确定最坏情况下的最小电流限制值，并预留5%的余量。通过特定公式可以计算出所需的(RISET)电阻值。</p>
<h3>
	（二）外部n - 通道DMOS设备选择</h3>
<p>
	外部电源DMOS设备必须是20V VGS类型，以确保<a href="https://www.hqchip.com/app/1734" target="_blank"><u>电荷泵</u></a>能产生约7V VGS，从而保证非逻辑电平设备的低导通电阻。</p>
<h3>
	（三）电源旁路<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a></h3>
<p>
	不同引脚需要连接不同规格的旁路电容，如HVBUS到GND需连接0.1μF陶瓷电容，BUS到GND需连接至少100μF低ESR陶瓷电容，IN到GND需连接1μF陶瓷电容等，这些电容能有效提供ESD保护，避免电压过冲和压降问题。</p>
<h3>
	（四）线路长度和布局</h3>
<p>
	USB外设与HVBUS、HVD + 和HVD - 之间的线长应在0.5m到5m范围内，以限制短路事件中的电流变化率。在USB高速模式下，需要精心设计<a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>布局，确保90Ω受控差分阻抗的等长走线，并可在HVD_和D_引脚插入调谐电感和电容来消除寄生电容。</p>
<h2>
	六、ESD保护与测试</h2>
<p>
	MAX16972/MAX16972A在HVD + 、HVD - 和HVBUS上具备±15kV的ESD保护能力，采用了先进的结构，在正常操作、关机和掉电等所有状态下都能承受高ESD。其ESD测试主要包括人体模型和IEC 61000 - 4 - 2两种，人体模型测试在设备未供电时进行，而IEC 61000 - 4 - 2测试在设备供电时进行，IEC测试的峰值电流更高，因此该标准下测量的ESD耐受电压通常低于人体模型。</p>
<h2>
	七、总结</h2>
<p>
	MAX16972/MAX16972A汽车高速USB保护器以其全面的保护功能、高性能的开关设计、智能的充电模式以及丰富的电气特性，为汽车USB应用提供了可靠的解决方案。在实际设计中，电子工程师需要根据具体的应用需求，合理选择设备的工作模式，注意正向电流限制、外部设备选择、电源旁路电容、线路长度和布局等设计要点，以充分发挥该产品的优势。同时，其出色的ESD保护能力也能有效提高设备的可靠性和稳定性。在如今汽车电子不断发展的时代，MAX16972/MAX16972A无疑是汽车USB保护领域的一款优秀产品。</p>
<p>
	大家在使用MAX16972/MAX16972A进行设计时，有没有遇到过什么独特的问题或者有什么巧妙的解决方案呢？欢迎在评论区分享交流。</p>]]></description></item><item>    <title><![CDATA[深入解析RK平台Debug串口实现：从硬件交互到安全适配]]></title>    <link>https://www.elecfans.com/d/7401336.html</link>    <guid>https://www.elecfans.com/d/7401336.html</guid>    <pubDate>2026-02-06 16:40:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在<a href="https://www.elecfans.com/v/tag/232/" target="_blank"><u>嵌入式开发</u></a>中，</span></span></font><span><span style="background-color:rgb(255,255,255);">Debug</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">串口是排查问题的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">生命线</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，尤其在系统崩溃、内核挂死等极端场景下，稳定可靠的串口调试功能往往是定位问题的关键。</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>Rockchip</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rk_fiq_debugger.c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">实现了一套高效、可靠的</span></span></font><span><span style="background-color:rgb(255,255,255);">Debug</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">串口机制，不仅支持基础的收发功能，还针对实时性、安全性做了深度优化。本文将从代码层面解析其实现原理。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixyAZCKMAAB6W6uip7k603.png" alt="wKgZPGkaixyAZCKMAAB6W6uip7k603.png"/><p>
		</p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、核心功能：</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/uart/" target="_blank"><u>UART</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件交互层</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">Debug</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">串口的本质是通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UART</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（通用异步收发传输器）实现数据交互，其核心功能包括初始化</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UART</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、发送字符、接收字符和缓冲区管理。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1. UART</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化：奠定<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>基础</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">debug_port_init</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数负责</span></span></font><span><span style="background-color:rgb(255,255,255);">UART</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的硬件初始化，主要完成以下工作：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">波特率配置</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：根据需求设置波特率（支持</span></span></font><span><span style="background-color:rgb(255,255,255);">115200</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1500000</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等常见速率），通过写入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UART_DLL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（除数锁存低位）和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UART_DLM</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（除数锁存高位）<a href="https://www.elecfans.com/tags/寄存器/" target="_blank"><u>寄存器</u></a>实现。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">寄存器复位</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font><span><span style="background-color:rgb(255,255,255);">UART_SRR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（软件复位寄存器）复位</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UART</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，确保初始状态一致。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工作模式配置</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：设置</span></span></font><span><span style="background-color:rgb(255,255,255);">UART_LCR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（线路控制寄存器）配置数据格式（默认</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">位数据位），关闭环路模式，启用接收中断（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UART_IER_RDI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">FIFO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">控制</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font><span><span style="background-color:rgb(255,255,255);">UART_FCR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">FIFO</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">控制寄存器）启用接收</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">FIFO</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，避免单字符中断频繁触发导致的性能问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
					</li>
				<li>
					</li>
				<li>
					</li>
				<li>
					</li>
				<li>
					</li>
				<li>
					</li>
				<li>
					</li>
				<li>
					</li>
			</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// 关键初始化代码片段</span></span></code><code><span><span class="code-snippet__title">rk_fiq_wri<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a></span>(t,<span class="code-snippet__number">0x07</span>,<span class="code-snippet__variable">UART_SRR</span>);<span class="code-snippet__comment">// 复位UART</span></span></code><code><span><span class="code-snippet__title">udelay</span>(<span class="code-snippet__number">10</span>);</span></code><code><span><span class="code-snippet__title">rk_fiq_write</span>(t,<span class="code-snippet__number">0x83</span>,<span class="code-snippet__variable">UART_LCR</span>);<span class="code-snippet__comment">// 进入波特率配置模式</span></span></code><code><span><span class="code-snippet__title">rk_fiq_write</span>(t, dll,<span class="code-snippet__variable">UART_DLL</span>); <span class="code-snippet__comment">// 设置波特率除数</span></span></code><code><span><span class="code-snippet__title">rk_fiq_write</span>(t, dlm,<span class="code-snippet__variable">UART_DLM</span>);</span></code><code><span><span class="code-snippet__title">rk_fiq_write</span>(t,<span class="code-snippet__number">0x03</span>,<span class="code-snippet__variable">UART_LCR</span>);<span class="code-snippet__comment">// 恢复数据格式配置</span></span></code><code><span><span class="code-snippet__title">rk_fiq_write</span>(t,<span class="code-snippet__variable">UART_IER_RDI</span>,<span class="code-snippet__variable">UART_IER</span>);<span class="code-snippet__comment">// 启用接收中断</span></span></code></pre>
		<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据发送：确保可靠输出</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">debug_putc</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数实现单字符发送，核心逻辑是</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">轮询等待发送缓冲区非满</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，避免数据丢失：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过读取</span></span></font><span><span style="background-color:rgb(255,255,255);">UART_USR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（状态寄存器）的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">UART_USR_TX_FIFO_NOT_FULL</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">位，判断发送</span></span></font><span><span style="background-color:rgb(255,255,255);">FIFO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">是否有空闲空间。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若缓冲区满，则短暂延时（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">udelay(10)</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）后重试，最多重试</span></span></font><span><span style="background-color:rgb(255,255,255);">10000</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">次（避免无限阻塞）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">缓冲区空闲时，将字符写入</span></span></font><span><span style="background-color:rgb(255,255,255);">UART_TX</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（发送寄存器）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">对于批量数据发送，</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">debug_put</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数通过循环调用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">debug_putc</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">实现，并自动在换行符</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">n</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">前添加回车符</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">r</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，适配终端显示习惯。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据接收：处理输入与特殊指令</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">debug_getc</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数负责接收字符，同时支持特殊指令检测（如触发调试中断的</span></span></font><span><span style="background-color:rgb(255,255,255);">"fiq"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">指令）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">先读取</span></span></font><span><span style="background-color:rgb(255,255,255);">UART_IIR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（中断识别寄存器）和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UART_USR</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（状态寄存器），判断中断类型和接收状态。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若检测到接收超时（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">UART_IIR_RX_<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>MEOUT</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）但无实际数据，通过读取</span></span></font><span><span style="background-color:rgb(255,255,255);">UART_RX</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">寄存器清除无效中断，避免死循环。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">正常接收时，将字符存入缓冲区，若检测到连续输入</span></span></font><span><span style="background-color:rgb(255,255,255);">"fiq"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（无下划线或空格），返回</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">FIQ_DEBUGGER_BREAK</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">触发调试中断。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、高级特性：线程化与缓冲区优化</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在高负载场景下，直接操作</span></span></font><span><span style="background-color:rgb(255,255,255);">UART</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件可能导致阻塞（如发送缓冲区满时）。</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">CONFIG_RK_CONSOLE_THRE<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置项，引入线程化处理机制，提升调试可靠性。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">双</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">FIFO</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">缓冲区：解耦生产与消费</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">定义两个<a href="https://www.hqchip.com/app/1093" target="_blank"><u>环形</u></a>缓冲区（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">fifo</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">tty_fifo</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），大小均为</span></span></font><span><span style="background-color:rgb(255,255,255);">64KB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，分别用于普通调试信息和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TTY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备数据。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">发送数据时，先写入</span></span></font><span><span style="background-color:rgb(255,255,255);">FIFO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">kfifo_in</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），由专门的线程负责将</span></span></font><span><span style="background-color:rgb(255,255,255);">FIFO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据写入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UART</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件，避免主流程阻塞。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若</span></span></font><span><span style="background-color:rgb(255,255,255);">FIFO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">满，则统计丢弃的消息数（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">console_dropped_messages</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），并在后续空闲时提示。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">控制台线程：异步处理发送逻辑</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">console_thread</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">作为后台线程，负责将</span></span></font><span><span style="background-color:rgb(255,255,255);">FIFO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中的数据发送到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UART</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">线程处于</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">TASK_INTERRUPTIBLE</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">状态，仅在</span></span></font><span><span style="background-color:rgb(255,255,255);">FIFO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">有数据或需退出时被唤醒（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">wake_up_process</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">循环读取</span></span></font><span><span style="background-color:rgb(255,255,255);">FIFO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据，调用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">console_putc</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">发送，每发送一行（遇到</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">n</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）刷新一次，平衡效率与实时性。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">处理完数据后，通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">console_flush</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">等待</span></span></font><span><span style="background-color:rgb(255,255,255);">UART</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件完成发送（检测</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">UART_LSR_TEMT</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">位确认发送完成）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">线程唤醒逻辑还做了死锁防护：通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">console_thread_running</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">标记避免在</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">usleep_range</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">期间唤醒，防止</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>pi</u></a>_lock</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">console_lock</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的嵌套死锁。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、安全与兼容性：</span></span></font><span><span style="background-color:rgb(255,255,255);">TrustZone</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">与多</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>CPU</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">适配</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在支持</span></span></font><span><span style="background-color:rgb(255,255,255);">TrustZone</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（安全区）的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台上，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Debug</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">串口需兼容安全世界与非安全世界的交互，并支持多</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心间的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">FIQ</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（快速中断）迁移。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1. <a href="https://www.hqchip.com/app/1522" target="_blank"><u>SD</u></a>EI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：软件委派异常<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a></span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">当启用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">CONFIG_FIQ_DEBUGGER_TRUST_ZONE</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">CONFIG_<a href="https://m.hqchip.com/app/1378" target="_blank"><u>ARM</u></a>_SDE_INTERFACE</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，通过</span></span></font><span><span style="background-color:rgb(255,255,255);">SDEI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Software Delegated Exception Interface</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）实现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">FIQ</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的安全管理：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">注册</span></span></font><span><span style="background-color:rgb(255,255,255);">SDEI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">事件回调（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">fiq_sdei_event_callb<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>k</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），将</span></span></font><span><span style="background-color:rgb(255,255,255);">FIQ</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">处理逻辑委派给内核。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">fiq_debugger_sdei_enable</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数初始化</span></span></font><span><span style="background-color:rgb(255,255,255);">SDEI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">事件，配置事件路由（绑定到指定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持</span></span></font><span><span style="background-color:rgb(255,255,255);">FIQ</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在不同</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心间迁移（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">_rk_fiq_dbg_sdei_switch_cpu</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），通过</span></span></font><span><span style="background-color:rgb(255,255,255);">SDEI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">事件通知安全世界完成路由切换。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1731" target="_blank"><u>电源管理</u></a>与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">离线适配</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为确保调试功能在系统低功耗或</span></span></font><span><span style="background-color:rgb(255,255,255);">CPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">离线时可用，驱动做了针对性处理：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">CPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">离线</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">fiq_debugger_cpu_offine_migrate_fiq</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数，在</span></span></font><span><span style="background-color:rgb(255,255,255);">CPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">离线前将</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">FIQ</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">迁移到其他在线</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">休眠唤醒</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：注册</span></span></font><span><span style="background-color:rgb(255,255,255);">PM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通知器（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">fiq_dbg_sdei_pm_nb</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），在系统休眠前将</span></span></font><span><span style="background-color:rgb(255,255,255);">FIQ</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">迁移到指定核心，唤醒后恢复。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">** idle</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">状态</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">**</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">fiq_debugger_cpuidle_resume_fiq</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数，在</span></span></font><span><span style="background-color:rgb(255,255,255);">CPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">idle</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">状态恢复时重新启用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">FIQ</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、设备树与初始化流程</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动通过设备树（</span></span></font><span><span style="background-color:rgb(255,255,255);">Device Tree</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）获取硬件信息，初始化流程如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">rk_fiqdbg_probe</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数解析设备树，读取</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rockchip,serial-id</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（指定调试串口</span></span></font><span><span style="background-color:rgb(255,255,255);">ID</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rockchip,baudrate</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（波特率）等参数。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查找对应</span></span></font><span><span style="background-color:rgb(255,255,255);">UART</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点，验证其是否禁用（避免与正常串口功能冲突），获取物理地址、中断号等资源。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">apb_pclk</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">bau<a href="https://m.hqchip.com/app/1703" target="_blank"><u>dc</u></a>lk</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），映射</span></span></font><span><span style="background-color:rgb(255,255,255);">UART</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">寄存器地址（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">of_iomap</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">4.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rk_serial_debug_init</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">完成最终初始化，注册平台设备（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">platform_device_register</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">总结</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Debug</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">串口驱动通过分层设计实现了高可靠性与灵活性：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件层</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：直接操作</span></span></font><span><span style="background-color:rgb(255,255,255);">UART</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">寄存器，确保收发正确性；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">缓冲层</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font><span><span style="background-color:rgb(255,255,255);">FIFO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和后台线程解耦数据生产与硬件发送，提升系统响应性；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">安全层</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：适配</span></span></font><span><span style="background-color:rgb(255,255,255);">TrustZone</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDEI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，支持多</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">场景下的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">FIQ</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">迁移，确保极端场景下的调试可用性。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">这套实现不仅满足了日常开发的调试需求，更在系统崩溃、低功耗等特殊场景下提供了关键的问题定位能力，是</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台稳定性的重要保障。</span></span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[比斯特锂电池保护板测试机覆盖保护板各项功能与耐久性测试]]></title>    <link>https://www.elecfans.com/d/7641959.html</link>    <guid>https://www.elecfans.com/d/7641959.html</guid>    <pubDate>2026-02-06 16:41:00</pubDate>    <description><![CDATA[<p>
	<a href="https://www.hqchip.com/app/1712" target="_blank"><u>电池管理</u></a>系统（BMS）中的关键组件——<a href="https://m.elecfans.com/v/tag/2692/" target="_blank"><u>锂电池</u></a>保护板（PCM）扮演着守护电池安全与性能的主要角色。逐渐在<a href="https://m.elecfans.com/v/tag/293/" target="_blank"><u>新能源</u></a>汽车、储能系统及<a href="https://www.elecfans.com/soft/data/39-96/" target="_blank"><u>消费电子</u></a>产品中备受应用，锂电池保护板的可靠性与稳定性已成为决定整个电池系统安全运行的关键因素。深圳比斯特<a href="https://www.elecfans.com/v/tag/1687/" target="_blank"><u>自动化设备</u></a>有限公司凭借深厚的技术积累和行业洞察，研发出新一代锂电池保护板测试机，通过覆盖保护板各项功能测试与耐久性验证，为锂电池行业提供了可靠的质量保障解决方案。</p>
<p>
	<img src="https://file1.elecfans.com/web3/M00/43/EF/wKgZO2lM-JOABwgYAABwR0HmLT8367.png" alt="wKgZO2lM-JOABwgYAABwR0HmLT8367.png"/>BT-锂电池保护板测试机</p>
<p>
	一、锂电池保护板的作用与测试挑战<br/>
	锂电池保护板作为电池管理系统系统中的关键部件，承担着过充保护、过放保护、过流保护、短路保护、温度保护等多项重要功能。在复杂的实际应用场景中，保护板需要在各种异常情况下及时切断电路，防止电池损坏甚至发生安全事故。<br/>
	然而传统的测试方法往往面临三大挑战：其一，测试覆盖不完全，许多测试设备只注重基本保护功能验证，缺乏对保护板在极端工况下的响应能力和耐久性的系统性测试。其二，测试精度与效率难以兼得，<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>测试往往耗时较长，而快速测试又难以保证测试深度。其三，测试过程自动化程度不足，人工干预环节多，导致测试结果的一致性和可靠性难以保证。</p>
<p>
	二、技术创新与系统架构<br/>
	在硬件架构方面，测试机配备高精度程控<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>与电子负载系统，能够<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>电池组在各种充放电状态下的电压、<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>特性。精密测量模块实现微安级<a href="https://m.hqchip.com/app/1782" target="_blank"><u>电流检测</u></a>与毫伏级电压测量，确保测试数据的准确性。多通道温度控制单元可模拟0℃至85℃的环境条件，从多方面验证保护板在不同温度环境下的工作性能。<br/>
	在测试流程方面，系统实现了从参数配置、测试执行、数据存储、报告生成的全流程半自动化。操作人员只需通过人机交互界面选择测试方案，设备即可自动完成所有测试项目，包括保护电压阈值测试、保护电流响应时间测试、自耗电流测试、均衡功能测试等。</p>
<p>
	三、功能性测试体系覆盖广<br/>
	比斯特测试机通过精确控制充放电电压，模拟电池电压逐渐升高至过充保护点或降低至过放保护点的过程，精确测量保护板的响应阈值与动作时间。系统采用逐步逼近法，以5mV的分辨率逐步改变测试电压，确保保护点测量的准确性。同时，设备记录从触发条件出现到保护动作完成的整个过程，验证保护板响应速度是否符合设计要求。<br/>
	过流与短路保护测试模拟实际使用中可能出现的异常大电流情况。测试机可生成高达数百安培的瞬时电流，模拟不同级别的过流情况，验证保护板在不同过流条件下的保护特性。<br/>
	短路保护测试则是通过模拟电池正负极直接短路的极端情况，验证保护板在毫秒级时间内切断电路的能力。在测试过程中，设备实时记录电流波形与保护响应时间，为保护板设计优化提供数据支持。<br/>
	温度保护测试通过高精度温控系统，在保护板表面或关键<a href="https://m.hqchip.com/ic/0" target="_blank"><u>元器件</u></a>周围建立可控的温度场。测试系统监测保护板在温度上升或下降过程中的工作状态变化，精确把控温度保护触发点，验证温度保护功能的有效性。</p>
<p>
	四、耐久性验证方案系统化<br/>
	循环寿命测试：测试机可<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>设定不同的测试循环，如充放电循环保护测试、过流过压交替测试等，验证保护板在数万次甚至数十万次保护动作后性能是否衰减。测试过程中，系统自动记录每次保护动作的参数，监测保护阈值、响应时间等关键指标的变化趋势。<br/>
	环境适应性测试：通过环境试验箱与测试机的联动，可进行高温高湿测试、低温测试、温度循环测试、振动测试等综合环境试验。这些测试验证保护板在极端温度、湿度变化和<a href="https://www.elecfans.com/v/tag/1472/" target="_blank"><u>机械</u></a>应力下的功能完整性，确保其能够适应汽车、户外储能等复杂应用场景。<br/>
	长期可靠性测试：测试系统采用高温老化、循环充放电加速测试等方法，在较短时间内模拟保护板长期使用后的状态，提前发现潜在的设计缺陷或材料问题。</p>
<p>
	深圳比斯特自动化设备有限公司的锂电池保护板测试机，通过全方面覆盖保护板各项功能测试与系统化耐久性验证，为锂电池行业提供了专业、可靠的测试解决方案。在精度与效率、广度与深度之间，比斯特测试机找到了一个合适的平衡点，既满足了大规模生产对测试效率的要求，又保证了研发和质量控制对测试深度的需求。<br/><br/>
	审核编辑 黄宇</p>]]></description></item><item>    <title><![CDATA[RK平台ROS2适配全指南：从编译到运行，手把手搞定嵌入式机器人开发]]></title>    <link>https://www.elecfans.com/d/7401334.html</link>    <guid>https://www.elecfans.com/d/7401334.html</guid>    <pubDate>2026-02-06 16:42:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在<a href="https://www.elecfans.com/soft/data/21-22/" target="_blank"><u>嵌入式</u></a><a href="https://bbs.elecfans.com/group_756" target="_blank"><u>机器人</u></a>与<a href="https://bbs.elecfans.com/group_640" target="_blank"><u>智能硬件</u></a>领域，<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>瑞芯微</u></a>（</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>Rockchip</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK356x</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3588</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1378" target="_blank"><u>arm</u></a>64</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片凭借高性能、低功耗的优势，成为众多<a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>的首选硬件平台；而</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/v/tag/1528/" target="_blank"><u>ROS2</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Robot Opera<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>ti</u></a>ng System 2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）作为新一代机器人<a href="https://www.elecfans.com/v/tag/527/" target="_blank"><u>操作系统</u></a>，在分布式<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>、实时性、多语言支持上的升级，更是嵌入式机器人开发的核心框架。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">但不少开发者在将</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://m.elecfans.com/v/tag/1004/" target="_blank"><u>ROS</u></a>2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">适配到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台时，常会遇到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“<a href="https://www.hqchip.com/app/1522" target="_blank"><u>SD</u></a>K</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本不兼容</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">交叉编译报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端运行缺失依赖</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等问题。本文基于瑞芯微官方《</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Rockchip <a href="https://bbs.elecfans.com/group_300" target="_blank"><u>Linux</u></a> SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">说明》文档，从适配逻辑、完整流程到避坑技巧，手把手教你搞定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">适配。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、适配基础：先搞懂</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持清单</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在开始适配前，必须先明确</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件、系统、</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本的匹配关系</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，避免因版本不兼容走弯路。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixuAQFzuAAGQ91GVbYc962.png" alt="wKgZPGkaixuAQFzuAAGQ91GVbYc962.png"/><h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持的硬件芯片</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台目前仅支持</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">arm64</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">位芯片</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，已验证的型号包括：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK356x</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">系列（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3562</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3568</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK3588</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">系列</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">其他同架构</span></span></font><span><span style="background-color:rgb(255,255,255);">arm64</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片（内核版本无限制）</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="Arial"><span><span style="background-color:rgb(255,255,255);"/></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">注意：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">32</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">位</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">arm</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">暂未支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译，属于待完善项。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">匹配的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Linux SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">镜像</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK Linux SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">基于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Buildroot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">构建，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的编译依赖</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">提供的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/python/" target="_blank"><u>Python</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">bullet</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">opencv</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等基础包，且需与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">镜像的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本严格一致（避免交叉编译时库版本冲突）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">已验证的</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">匹配关系如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Linux SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Python</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">匹配</span></span></font><span><span style="background-color:rgb(255,255,255);">Docker</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">镜像</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">额外要求</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">linux-5.10-stan-rkr1</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">3.10.5</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">jammy-ros2-build</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">需要添加</span></span></font><span><span style="background-color:rgb(255,255,255);">ros2_dep.config</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">补丁</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">linux-4.19-gen-rkr3</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">3.8.6</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">focal-ros2-build</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">需更新</span></span></font><span><span style="background-color:rgb(255,255,255);">lttng-tools</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">等依赖到指定版本</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">已验证的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">发行版</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台已实测通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本，源码可直接从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">GitHub</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">下载，版本信息如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">发行版</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本号</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">下载链接（</span></span></font><span><span style="background-color:rgb(255,255,255);">GitHub</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Foxy</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">ros2-release-foxy-20230620</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">https://github.com/ros2/ros2/releases/tag/release-foxy-20230620</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Gal<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>tic</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">ros2-release-galactic-20221209</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">https://github.com/ros2/ros2/releases/tag/release-galactic-20221209</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Humble</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">ros2-release-humble-20230724</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">https://github.com/ros2/ros2/releases/tag/release-humble-20230724</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Iron</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">ros2-release-iron-20230912</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">https://github.com/ros2/ros2/releases/tag/release-iron-20230912</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、核心逻辑：为什么用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“Docker+SDK”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">分离编译？</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">很多开发者会疑惑：直接在</span></span></font><span><span style="background-color:rgb(255,255,255);">RK SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">里编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">不行吗？为什么要引入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">？</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">这背后是</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">团队为</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">降低维护成本、提升版本灵活性</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">设计的适配逻辑：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.1 ROS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">官方方案的痛点</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">官方虽提供了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">arm64</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">交叉编译的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">镜像（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">Docke<a href="https://www.elecfans.com/tongxin/rf/" target="_blank"><u>rf</u></a>ile_ubuntu_arm64_prebuilt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），但仅支持</span></span></font><span><span style="background-color:rgb(255,255,255);">Ubuntu 18.04</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Bionic</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）系统，而</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK Linux SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">基于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Buildroot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">定制，与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Ubuntu 18.04</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的库结构差异极大，直接使用会导致大量依赖冲突。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.2 RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">方案的优势：解耦</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">采用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">提供依赖</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+ Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的分离模式：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK Linux SDK</span></span></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：仅负责编译</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">所需的基础依赖（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Eigen</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">OpenCV</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），不直接编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">本体，避免</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">升级对</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的影响；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Docker</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">容器</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：提供统一的</span></span></font><span><span style="background-color:rgb(255,255,255);">Ubuntu</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译环境，结合</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的交叉工具链与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Sysroot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，确保</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译产物能适配</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">最终通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">重新打包</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">将</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">集成到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端，实现灵活升级（换</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本只需换</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译，无需重构</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、手把手适配流程：</span></span></font><span><span style="background-color:rgb(255,255,255);">4</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">步从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">运行</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">接下来进入实操环节，全程基于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“RK3562 + Linux 5.10 SDK + ROS2 Iron”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">示例，其他型号可参考适配。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">3.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第一步：编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，集成</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">依赖</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">先确保</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">已包含</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的基础依赖，关键是配置</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">ros2_dep.config</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">文件。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">1.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">检查</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">添加</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ros2_dep.config</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">ros2_dep.config</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">是</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">依赖的配置文件，存放于</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">buildroot/configs/rockchip/</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录下，包含</span></span></font><span><span style="background-color:rgb(255,255,255);">LTTNG</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等必需依赖的开关。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">若存在该文件：检查是否包含</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">LTTNG_TOOLS</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2 Iron</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">必需），若缺失则手动添加：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 编辑ros2_dep.config</span></span></code><code><span><span class="code-snippet__built_in">t<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>ai</u></a>l</span>-f buildroot/configs/rockchip/ros2_dep.config</span></code><code><span><span class="code-snippet__comment"># 添加以下内容（支持tracetools功能）</span></span></code><code><span>BR2_PACKAGE_LTTNG_TOOLS=y</span></code><code><span>BR2_PACKAGE_LTTNG_LIBUST=y</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">若不存在该文件：需给</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">打</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个补丁（补丁文件可从</span></span></font></span><u><span style="font-family:Arial;color:rgb(5,99,193);text-decoration:underline;"><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">官方链接</span></span></font></span></u><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">下载）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 进入SDK的buildroot目录</span></span></code><code><span><span class="code-snippet__built_in">cd</span>buildroot</span></code><code><span><span class="code-snippet__comment"># 打补丁（添加libasio依赖和ros2_dep.config）</span></span></code><code><span>patch -p1 &lt; ../linux-sdk-patches/buildroot/0001-package-add-libasio.patch</span></code><code><span>patch -p1 &lt; ../linux-sdk-patches/buildroot/0002-configs-rockchip-add-ros2-build-dependencies.patch</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">1.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">将</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ros2_dep.config</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">集成到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">修改</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">defconfig</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">文件（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK356x</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">机器人方案的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rockchip_rk356x_robot_defconfig</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），引入</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">ros2_dep.config</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 编辑defconfig</span></span></code><code><span>vim buildroot/configs/rockchip/rockchip_rk356x_robot_defconfig</span></code><code><span><span class="code-snippet__comment"># 在文件中添加一行（引入ROS2依赖配置）</span></span></code><code><span><span class="code-snippet__comment">#include "ros2_dep.config"</span></span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">1.3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">完整编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译命令，生成包含</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">依赖的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 进入SDK根目录</span></span></code><code><span><span class="code-snippet__built_in">cd</span>/path/to/rk-linux-sdk</span></code><code><span><span class="code-snippet__comment"># 编译rootfs（根据芯片型号选择defconfig）</span></span></code><code><span>./build.sh rockchip_rk356x_robot_defconfig</span></code><code><span><span class="code-snippet__comment"># 编译完成后，rootfs输出在buildroot/output/rockchip_rk356x_robot/</span></span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">3.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第二步：搭建</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译环境</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">基于匹配的</span></span></font><span><span style="background-color:rgb(255,255,255);">Docker</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">镜像，搭建</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的交叉编译环境。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">2.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">安装</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">并配置用户组</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font><span><span style="background-color:rgb(255,255,255);">Ubuntu PC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（建议</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">20.04</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">及以上）上安装</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，避免每次执行需</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">sudo</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 安装Docker</span></span></code><code><span><span class="code-snippet__attribute">sudo</span>apt install docker.io</span></code><code><span><span class="code-snippet__comment"># 将当前用户加入docker组（无需sudo）</span></span></code><code><span>sudo usermod -aG docker<span class="code-snippet__variable">$USER</span></span></code><code><span>newgrp docker <span class="code-snippet__comment"># 生效用户组</span></span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">2.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">导入匹配的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">镜像</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">先确认</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本，再导入对应</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">镜像（镜像从</span></span></font></span><u><span style="font-family:Arial;color:rgb(5,99,193);text-decoration:underline;"><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">官方链接</span></span></font></span></u><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">下载）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 查看SDK的Python版本（示例输出：Python 3.10.5）</span></span></code><code><span>./buildroot/output/rockchip_rk356x_robot/host/bin/python --version</span></code><code><span><span class="code-snippet__comment"># 导入匹配的镜像（Python 3.10.5对应jammy-ros2-build）</span></span></code><code><span>gunzip jammy-ros2-build.tar.gz <span class="code-snippet__comment"># 解压镜像</span></span></code><code><span>docker image lo<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a> -i jammy-ros2-build.tar <span class="code-snippet__comment"># 导入镜像</span></span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">2.3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">容器并挂载</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出目录</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动容器时，需将</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">output</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录（含交叉工具链、</span></span></font><span><span style="background-color:rgb(255,255,255);">rootfs</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）挂载到容器内，确保编译时能调用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">资源：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 启动容器，挂载SDK的output目录（source替换为你的SDK output路径）</span></span></code><code><span>docker run -it --mount<span class="code-snippet__built_in">type</span>=<span class="code-snippet__built_in">bind</span>,<span class="code-snippet__built_in">source</span>=/home/yourname/rk-sdk/buildroot/output/rockchip_rk356x_robot/,target=/buildroot jammy-ros2-build</span></code><code><span><span class="code-snippet__comment"># 进入容器后，默认用户为builder，密码：rockchip</span></span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">2.4</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">拷贝编译脚本与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">源码到容器</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">从</span></span></font></span><u><span style="font-family:Arial;color:rgb(5,99,193);text-decoration:underline;"><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">官方链接</span></span></font></span></u><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">下载</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">ros2-build-scripts.tar.gz</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（编译脚本）和</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">ros2-sources.tar.gz</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">源码），拷贝到容器内并解压：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 1. 在Ubuntu PC端，查找容器ID（示例容器ID：c519d9d668f9）</span></span></code><code><span>docker container<span class="code-snippet__built_in">ls</span></span></code><code><span><span class="code-snippet__comment"># 2. 拷贝文件到容器的/tmp目录</span></span></code><code><span>docker container<span class="code-snippet__built_in">cp</span>ros2-build-scripts.tar.gz c519d9d668f9:/tmp/</span></code><code><span>docker container<span class="code-snippet__built_in">cp</span>ros2-sources.tar.gz c519d9d668f9:/tmp/</span></code><code><span><span class="code-snippet__comment"># 3. 在容器内解压文件到/opt/ros目录</span></span></code><code><span>tar zxf /tmp/ros2-build-scripts.tar.gz -C /</span></code><code><span>tar zxf /tmp/ros2-sources.tar.gz -C /</span></code><code><span><span class="code-snippet__comment"># 解压后，/opt/ros下会有cross-com<a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>pi</u></a>le（交叉编译配置）和各ROS2版本目录</span></span></code><code><span><span class="code-snippet__built_in">ls</span>/opt/ros <span class="code-snippet__comment"># 输出：cross-compile foxy galactic humble iron</span></span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">2.5</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">修改脚本的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本号</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">确保编译脚本的</span></span></font><span><span style="background-color:rgb(255,255,255);">Python</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">一致（示例</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3.10.5</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，无需修改；若为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3.8.6</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">则需将</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“310”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">改为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“38”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__meta">#</span>编辑交叉编译配置文件</span></code><code><span>vim /opt/ros/cross-compile/cross-compile.mixin</span></code><code><span><span class="code-snippet__meta">#</span>检查Python版本相关配置（如3.10对应310）</span></code><code><span><span class="code-snippet__meta">#</span>示例：将所有<span class="code-snippet__string">"3.10"</span>改为<span class="code-snippet__string">"3.8"</span>（若SDK为Python 3.8.6）</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">3.3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第三步：编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，解决交叉编译关键问题</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">进入</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本目录（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Iron</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），执行编译脚本，重点处理</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“TRY_RUN</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">手动配置</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">3.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行编译前准备</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 进入ROS2 Iron目录</span></span></code><code><span><span class="code-snippet__built_in">cd</span>/opt/ros/iron</span></code><code><span><span class="code-snippet__comment"># 准备源码（脚本会检查源码完整性）</span></span></code><code><span>./prepare-source.sh</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">3.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行编译脚本</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 开始编译ROS2（耗时约15-30分钟，取决于PC性能）</span></span></code><code><span>./build-ros2.sh</span></code><code><span><span class="code-snippet__comment"># 编译成功的标志：输出类似以下内容</span></span></code><code><span>Summary: 317 packages finished [15min 37s]</span></code><code><span>build ros quit &amp; cleanup</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键问题：处理</span></span></font><span><span style="background-color:rgb(255,255,255);">TRY_RUN</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">手动配置</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">交叉编译时，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">fastrtps</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rosbag2_cpp</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">会触发</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">TRY_RUN</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">报错（因无法在</span></span></font><span><span style="background-color:rgb(255,255,255);">PC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">端运行</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">arm64</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">程序），需手动在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端执行程序并记录结果。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h5>
		<b><span style="font-family:Arial;font-weight:bold;font-size:12pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">案例</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">fastrtps</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TRY_RUN</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">报错</span></span></font></span></b></h5>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">报错信息：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>CMake Error: TRY_RUN() invoked<span class="code-snippet__keyword">in</span><span class="code-snippet__keyword">cross</span><span class="code-snippet__operator">-</span>compiling mode, please<span class="code-snippet__keyword">set</span>SM_RUN_RESULT<span class="code-snippet__keyword">and</span>SM_RUN_RESULT__TRYRUN_OUTPUT</span></code></pre>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决步骤：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">将容器内的测试程序（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/buildroot/build/ros/fastrtps/cmTC_4f573</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）拷贝到</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端执行程序，记录输出：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># RK板端执行</span></span></code><code><span>/tmp/cmTC_4f573-SM_RUN_RESULT <span class="code-snippet__comment"># 输出：PTHREAD_RWLOCK_PREFER_READER_NP</span></span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在容器内编辑</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">TryRunResults.cmake</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，填入结果：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>vim<span class="code-snippet__regexp">/buildroot/</span>build<span class="code-snippet__regexp">/ros/</span>fastrtps<span class="code-snippet__operator">/</span><span class="code-snippet__type">TryRunResults</span>.cmake</span></code><code><span># 添加以下内容</span></code><code><span><span class="code-snippet__keyword">set</span>(<span class="code-snippet__type">SM_RUN_RESULT</span><span class="code-snippet__string">"0"</span><span class="code-snippet__type">CACHE</span><span class="code-snippet__type">STRING</span><span class="code-snippet__string">"PTHREAD_RWLOCK_PREFER_READER_NP"</span><span class="code-snippet__type">FORCE</span>)</span></code><code><span><span class="code-snippet__keyword">set</span>(<span class="code-snippet__type">SM_RUN_RESULT__TRYRUN_OUTPUT</span><span class="code-snippet__string">"0"</span><span class="code-snippet__type">CACHE</span><span class="code-snippet__type">STRING</span><span class="code-snippet__string">"PTHREAD_RWLOCK_PREFER_READER_NP"</span><span class="code-snippet__type">FORCE</span>)</span></code></pre>
	<h5>
		<b><span style="font-family:Arial;font-weight:bold;font-size:12pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">案例</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rosbag2_cpp</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TRY_RUN</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">报错</span></span></font></span></b></h5>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">类似处理，在</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端执行测试程序后，填入结果（示例输出为缺失</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">liblsan.so</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>vim<span class="code-snippet__regexp">/buildroot/</span>build<span class="code-snippet__regexp">/ros/</span>rosbag2_cpp<span class="code-snippet__operator">/</span><span class="code-snippet__type">TryRunResults</span>.cmake</span></code><code><span><span class="code-snippet__keyword">set</span>(<span class="code-snippet__type">HAVE_SANITIZE<a href="https://www.elecfans.com/tags/rs/" target="_blank"><u>RS</u></a>_EXITCODE</span><span class="code-snippet__string">"127"</span><span class="code-snippet__type">CACHE</span><span class="code-snippet__type">STRING</span><span class="code-snippet__string">"error while lo<a href="https://www.elecfans.com/tags/adi/" target="_blank"><u>adi</u></a>ng shared libraries: liblsan.so.0"</span><span class="code-snippet__type">FORCE</span>)</span></code><code><span><span class="code-snippet__keyword">set</span>(<span class="code-snippet__type">HAVE_SANITIZERS_EXITCODE__TRYRUN_OUTPUT</span><span class="code-snippet__string">"127"</span><span class="code-snippet__type">CACHE</span><span class="code-snippet__type">STRING</span><span class="code-snippet__string">"error while loading shared libraries: liblsan.so.0"</span><span class="code-snippet__type">FORCE</span>)</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">可选：单独编译某个</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">包</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">若只需编译特定包（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">demo_nodes_cpp</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），可使用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">colcon build --packages-select</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 单独编译demo_nodes_cpp</span></span></code><code><span><span class="code-snippet__attribute">colcon</span>build --packages-<span class="code-snippet__literal">select</span>demo_nodes_cpp --cmake-args -<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>MAKE_TOOLCHAIN_FILE=/buildroot/share/buildroot/toolchainfile.cmake</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">3.4</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第四步：打包</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，板端运行</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译完成后，</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">产物已存放在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/buildroot/target/opt/ros</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录，需重新打包</span></span></font><span><span style="background-color:rgb(255,255,255);">rootfs</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">并烧录到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">4.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">重新打包</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font><span><span style="background-color:rgb(255,255,255);">Ubuntu PC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">根目录，执行打包命令：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 进入SDK根目录</span></span></code><code><span><span class="code-snippet__built_in">cd</span>/path/to/rk-linux-sdk</span></code><code><span><span class="code-snippet__comment"># 重新打包rootfs（生成rootfs.img）</span></span></code><code><span>./build.sh rootfs</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">4.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">烧录</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">并运行</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">将</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rootfs.img</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">烧录到</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端（使用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">烧录工具），启动后执行以下命令运行</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2 Hello World</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 进入ROS2目录</span></span></code><code><span><span class="code-snippet__built_in">cd</span>/opt/ros/iron</span></code><code><span><span class="code-snippet__comment"># 设置环境变量（指定ROS2路径和工作目录）</span></span></code><code><span><span class="code-snippet__built_in">export</span>COLCON_CURRENT_PREFIX=/opt/ros/iron</span></code><code><span><span class="code-snippet__built_in">export</span>ROS_HOME=/userdata/</span></code><code><span><span class="code-snippet__built_in">source</span>./local_setup.sh <span class="code-snippet__comment"># 加载ROS2环境</span></span></code><code><span><span class="code-snippet__comment"># 验证ROS2环境（列出已安装包）</span></span></code><code><span>ros2 pkg list</span></code><code><span><span class="code-snippet__comment"># 运行Hello World（启动listener后台进程，再启动talker）</span></span></code><code><span>ros2 run demo_nodes_cpp listener &amp;</span></code><code><span>ros2 run demo_nodes_cpp talker</span></code><code><span><span class="code-snippet__comment"># 成功输出（类似以下内容）</span></span></code><code><span>[INFO] [1501839280.834017748] [talker]: Publishing:<span class="code-snippet__string">'Hello World: 1'</span></span></code><code><span>[INFO] [1501839280.839280957] [listener]: I heard: [Hello World: 1]</span></code></pre>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、避坑宝典：</span></span></font><span><span style="background-color:rgb(255,255,255);">10</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个常见报错的解决方案</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">适配过程中难免遇到编译或运行报错，以下是</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">官方已验证的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">10</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个高频问题及解决方案，按报错场景分类。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">4.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译环境类报错</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译主机内存不足</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译中途卡顿或报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“out of memory”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：开启</span></span></font><span><span style="background-color:rgb(255,255,255);">z<a href="https://www.elecfans.com/tags/ram/" target="_blank"><u>ram</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">交换空间（示例分配</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">12G</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>sudo -i su</span></code><code><span>modprobe zram</span></code><code><span><span class="code-snippet__built_in">echo</span>12G &gt; /sys/block/zram0/disksize</span></code><code><span>mkswap /dev/zram0</span></code><code><span>swapon /dev/zram0</span></code><code><span>free -h <span class="code-snippet__comment"># 验证交换空间已生效</span></span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">2. pkg-config</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">找不到</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译</span></span></font><span><span style="background-color:rgb(255,255,255);">tracetools</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“Could NOT find PkgConfig”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">Docker</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中未安装</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pkgconf</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（非</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pkg-config</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），或</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">host-pkgconf</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本冲突；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：在</span></span></font><span><span style="background-color:rgb(255,255,255);">Docker</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中安装</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">pkgconf</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，并指定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">pkgconfig</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">路径：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># Docker中安装pkgconf</span></span></code><code><span>sudo apt install pkgconf</span></code><code><span><span class="code-snippet__comment"># 设置PKG_CONFIG_PATH（指向SDK的sysroot）</span></span></code><code><span><span class="code-snippet__built_in">export</span>PKG_CONFIG_PATH=/buildroot/host/aarch64-buildroot-linux-gnu/sysroot/usr/lib/pkgconfig</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">4.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端运行类报错</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端报</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“GLIBCXX_3.4.30 not found”</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：运行</span></span></font><span><span style="background-color:rgb(255,255,255);">ros2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">命令时，提示</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">libstdc++.so.6: version 'GLIBCXX_3.4.30' not found</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译使用的工具链与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的工具链版本不匹配；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：必须使用</span></span></font><span><span style="background-color:rgb(255,255,255);">RK Linux SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">自带的交叉工具链编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">挂载的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/buildroot</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录已包含该工具链）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">4.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译结果出现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">x86_64</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">动态库</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">库（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">_rclpy_pybind11.cpython-310-x86_64-linux-gnu.so</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）是</span></span></font><span><span style="background-color:rgb(255,255,255);">x86</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">架构，无法在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">arm64</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">板端运行；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">pybind11</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">交叉编译时默认使用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">路径；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：修改</span></span></font><span><span style="background-color:rgb(255,255,255);">pybind11</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置，指定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">arm64</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">模块后缀：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 1. 在pybind11_vendor/CMakeLists.txt中添加</span></span></code><code><span><span class="code-snippet__attribute">list</span>(APPEND extra_cmake_args<span class="code-snippet__string">"-DPYBIND11_PYTHONLIBS_OVERWRI<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>TE</u></a>=OFF"</span>)</span></code><code><span><span class="code-snippet__attribute">list</span>(APPEND extra_cmake_args<span class="code-snippet__string">"-DPYTHON_MODULE_EXTENSION=.cpython-310-aarch64-linux-gnu.so"</span>)</span></code><code><span><span class="code-snippet__comment"># 2. 在cross-compile.mixin中添加相同参数</span></span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">4.3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">依赖与配置类报错</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">5. CMake</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">找不到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">exlibConfig.cmake</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译</span></span></font><span><span style="background-color:rgb(255,255,255);">ament_cmake_vendor_package</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“Could not find exlibConfig.cmake”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：交叉工具链路径与</span></span></font><span><span style="background-color:rgb(255,255,255);">CMAKE_PREFIX_PATH</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">冲突；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译时不指定</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">CMAKE_TOOLCHAIN_FILE</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（依赖</span></span></font><span><span style="background-color:rgb(255,255,255);">Docker</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">挂载的环境自动识别）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">6. google_benchmark</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">缺少</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">limits</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">头文件</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译</span></span></font><span><span style="background-color:rgb(255,255,255);">foxy</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本时，报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“‘numeric_limits’ is not a member of ‘std’”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">benchmark_register.h</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">缺失</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);"><limits/></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">头文件；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：在该头文件中添加</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><a href="https://www.elecfans.com/outside?redirect=#" target="_blank"><span style="background-color:rgb(255,255,255);">#include</span></a><span style="background-color:rgb(255,255,255);"><limits/></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，或使用</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">提供的补丁包。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">7. _FORTIFY_SOURCE</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译报错</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译</span></span></font><span><span style="background-color:rgb(255,255,255);">mimick_vendor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“_FORTIFY_SOURCE requires compiling with optimization (-O)”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具链定义了</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">_FORTIFY_SOURCE</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，但未开启编译优化；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：删除工具链中的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">_FORTIFY_SOURCE</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">定义，或在编译时添加</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">-O2</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">优化参数。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">8.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">需要设置</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CMAKE_INCLUDE_PATH</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译</span></span></font><span><span style="background-color:rgb(255,255,255);">orocos_kdl_vendor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“EIGEN3_INCLUDE_DIR NO<a href="https://m.hqchip.com/app/1522" target="_blank"><u>TF</u></a>OUND”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">CMake</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">无法找到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">中的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Eigen</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">头文件；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：指定</span></span></font><span><span style="background-color:rgb(255,255,255);">CMAKE_INCLUDE_PATH</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">指向</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">sysroot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>export<span class="code-snippet__type">CMAKE_INCLUDE_PATH</span><span class="code-snippet__operator">=</span>'<span class="code-snippet__regexp">/buildroot/</span>host<span class="code-snippet__regexp">/aarch64-buildroot-linux-gnu/</span>sysroot<span class="code-snippet__regexp">/usr/</span>include<span class="code-snippet__operator">/</span>'</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">9. tracetools</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">找不到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">lttng-ust</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译</span></span></font><span><span style="background-color:rgb(255,255,255);">tracetools</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“<a href="https://www.hqchip.com/app/2004" target="_blank"><u>can</u></a>not find -llttng-ust-common”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">pkg-config</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">找到了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">lttng</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，而非</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">lttng</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：设置</span></span></font><span><span style="background-color:rgb(255,255,255);">PKG_CONFIG_PATH</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">指向</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">pkgconfig</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录（同问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的解决方案）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">10.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">交叉编译时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">numpy</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">路径错误</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译</span></span></font><span><span style="background-color:rgb(255,255,255);">action_msgs</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，警告</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“unsafe header path: /usr/local/lib/<a href="https://www.elecfans.com/v/tag/3495/" target="_blank"><u>python3</u></a>.10/dist-packages/numpy/core/include”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">Python</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">使用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">端的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">numpy</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">路径；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：在</span></span></font><span><span style="background-color:rgb(255,255,255);">cross-compile.mixin</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中预设</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">numpy</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">include</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">路径（指向</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">sysroot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">五、待完善方向：这些功能还在优化中</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">目前</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">适配仍有</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个待完善项，开发者需注意：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">删除不必要的安装文件</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译后的</span></span></font><span><span style="background-color:rgb(255,255,255);">ROS2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录包含</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">cmake</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、头文件、静态库等冗余文件，未来可优化为仅保留运行必需的动态库和脚本；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">arm32</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">位</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rootfs</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：当前仅支持</span></span></font><span><span style="background-color:rgb(255,255,255);">arm64</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">32</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">位芯片（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3288</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）的适配仍在开发中。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">六、总结与建议</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">适配核心是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">提供依赖</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+ Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+ rootfs</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">集成</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，既解决了官方</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">镜像与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统的兼容性问题，又实现了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的解耦维护。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">给开发者的</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">点实操建议：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本匹配是前提</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：务必确保</span></span></font><span><span style="background-color:rgb(255,255,255);">SDK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Python</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Docker</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">镜像、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本三者对应，避免版本冲突；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">交叉编译多检查</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：编译后通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">file</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">命令验证产物架构（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">file _rclpy_pybind11.so</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">应显示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“aarch64”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过这套流程，你可以快速在</span></span></font><span><span style="background-color:rgb(255,255,255);">RK356x</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3588</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等芯片上跑通</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，为嵌入式机器人开发打下基础。后续可基于此扩展激光</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SLAM</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、运动控制等功能，充分发挥</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片的硬件性能与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ROS2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的软件生态优势。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixuAH6eFAAZaCfX2h4Q311.png" alt="wKgZPGkaixuAH6eFAAZaCfX2h4Q311.png"/><p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[入门宇树机器人开发：从SDK源码探索到实战操作]]></title>    <link>https://www.elecfans.com/d/7401333.html</link>    <guid>https://www.elecfans.com/d/7401333.html</guid>    <pubDate>2026-02-06 16:43:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">一、宇树</span></span></font><span><span style="background-color:#ffffff;"><a href="https://www.hqchip.com/app/1522" target="_blank"><u>SD</u></a>K2</span></span><font face="等线"><span><span style="background-color:#ffffff;">整体介绍</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:#ffffff;">宇树<a href="https://bbs.elecfans.com/group_756" target="_blank"><u>机器人</u></a>（</span></span></font><span><span style="background-color:#ffffff;">Unitree</span></span><font face="等线"><span><span style="background-color:#ffffff;">）作为全球领先的四足机器人研发企业，其推出的</span></span></font></span><span><span><span style="background-color:#ffffff;">unitree_sdk2</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">是面向旗下</span></span></font><span><span style="background-color:#ffffff;">Go2</span></span><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">H1</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">B2</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">等系列机器人的第二代软件开发工具包。该</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">SDK</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">提供了丰富的<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>和示例代码，支持<a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>快速实现机器人控制、状态获取、<a href="https://www.elecfans.com/v/tag/117/" target="_blank"><u>传感器</u></a>数据处理等功能，是入门宇树机器人开发的核心工具。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixqASPaaAAEPAa5pmOs406.png" alt="wKgZPGkaixqASPaaAAEPAa5pmOs406.png"/><p>
		</p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:#ffffff;">unitree_sdk2</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">的核心优势在于：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">跨平台支持：兼容</span></span></font><span><span style="background-color:#ffffff;">x86_64</span></span><font face="等线"><span><span style="background-color:#ffffff;">和</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">aarch64</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">架构的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Ubuntu 20.04</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">系统</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">多机器人适配：统一接口支持</span></span></font><span><span style="background-color:#ffffff;">Go2</span></span><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">H1</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">B2</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">等多款机器人</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">功能全面：涵盖运动控制、状态监测、视频流获取、语音交互等能力</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">易于扩展：提供</span></span></font><span><span style="background-color:#ffffff;">CMake</span></span><font face="等线"><span><span style="background-color:#ffffff;">集成示例，方便开发者搭建自定义项目</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:#ffffff;">官方文档<a href="https://www.hqchip.com/tags" target="_blank"><u>中心</u></a>（</span></span></font></span><u><span><span><span style="background-color:#ffffff;">Unitree Document Cen<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>r</span></span></span></u><span><font face="等线"><span><span style="background-color:#ffffff;">）提供了更详细的技术文档，建议作为开发过程中的重要参考。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">二、</span></span></font><span><span style="background-color:#ffffff;">SDK</span></span><font face="等线"><span><span style="background-color:#ffffff;">目录结构与核心功能</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">1.</span></span><font face="等线"><span><span style="background-color:#ffffff;">目录结构解析</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:#ffffff;">unitree_sdk2</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">的源码结构清晰，主要包含以下核心目录：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>unitree_sdk2/</span></code><code><span>├── example/       <span class="code-snippet__comment"># 示例代码目录</span></span></code><code><span>│  ├── go2/       <span class="code-snippet__comment"># Go2机器人示例</span></span></code><code><span>│  ├── h1/        <span class="code-snippet__comment"># H1机器人示例</span></span></code><code><span>│  ├── b2/        <span class="code-snippet__comment"># B2机器人示例</span></span></code><code><span>│  ├── state_machine/  <span class="code-snippet__comment"># 状态机控制示例</span></span></code><code><span>│  └── wireless_controller/<span class="code-snippet__comment"># 无线<a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a>示例</span></span></code><code><span>├── include/       <span class="code-snippet__comment"># 头文件目录</span></span></code><code><span>│  └── unitree/robot/  <span class="code-snippet__comment"># 机器人控制核心接口</span></span></code><code><span>└── RE<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a>ME.md       <span class="code-snippet__comment"># 环境配置与编译说明</span></span></code></pre>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">2.</span></span><font face="等线"><span><span style="background-color:#ffffff;">核心功能点</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:#ffffff;">从示例代码中可以梳理出</span></span></font><span><span style="background-color:#ffffff;">SDK</span></span><font face="等线"><span><span style="background-color:#ffffff;">的核心功能：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><span><span style="background-color:#ffffff;">1</span></span><font face="等线"><span><span style="background-color:#ffffff;">）基础控制功能</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">运动控制：支持机器人站立（</span></span></font></span><span><span><span style="background-color:#ffffff;">StandUp()</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">）、下蹲（</span></span></font></span><span><span><span style="background-color:#ffffff;">StandDown()</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">）、移动（</span></span></font></span><span><span><span style="background-color:#ffffff;">Move(vx, vy, vw)</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">）等动作</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">步态切换：通过</span></span></font></span><span><span><span style="background-color:#ffffff;">SwitchG<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>ai</u></a>t()</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">实现不同运动模式（如慢走、快跑、爬楼梯）的切换</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">速度控制：通过</span></span></font></span><span><span><span style="background-color:#ffffff;">SpeedLevel()</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">调整运动速度等级</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><span><span style="background-color:#ffffff;">2</span></span><font face="等线"><span><span style="background-color:#ffffff;">）状态获取功能</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">机器人状态：通过</span></span></font></span><span><span><span style="background-color:#ffffff;">RobotStateClient</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">获取关节角度、</span></span></font><span><span style="background-color:#ffffff;">IMU</span></span><font face="等线"><span><span style="background-color:#ffffff;">数据、电池状态等</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">服务状态：通过</span></span></font></span><span><span><span style="background-color:#ffffff;">ServiceList()</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">查询当前激活的服务列表及运行状态</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">传感器数据：支持获取摄像头图像（</span></span></font></span><span><span><span style="background-color:#ffffff;">VideoClient</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">）、超声波等传感器数据</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><span><span style="background-color:#ffffff;">3</span></span><font face="等线"><span><span style="background-color:#ffffff;">）高级功能</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">轨迹跟踪：通过</span></span></font></span><span><span><span style="background-color:#ffffff;">TrajectoryFollow</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">实现预设路径的精确跟踪</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">低电平控制：直接操作关节<a href="https://bbs.elecfans.com/zhuti_dianji_1.html" target="_blank"><u>电机</u></a>，实现<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>位置</span></span></font><span><span style="background-color:#ffffff;">/</span></span><font face="等线"><span><span style="background-color:#ffffff;">力控制</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">语音交互：通过</span></span></font></span><span><span><span style="background-color:#ffffff;">Vu<a href="https://m.hqchip.com/app/1936" target="_blank"><u>iCl</u></a>ient</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">控制机器人的语音交互模块</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><span><span style="background-color:#ffffff;">4</span></span><font face="等线"><span><span style="background-color:#ffffff;">）开发辅助功能</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">日志系统：支持自定义日志输出路径和格式</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">参数配置：通过</span></span></font><span><span style="background-color:#ffffff;">YAML</span></span><font face="等线"><span><span style="background-color:#ffffff;">文件加载机器人控制参数</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">线程管理：提供周期性控制线程封装，简化实时控制逻辑</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">三、环境搭建步骤</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">1.</span></span><font face="等线"><span><span style="background-color:#ffffff;">系统要求</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;"><a href="https://www.elecfans.com/v/tag/527/" target="_blank"><u>操作系统</u></a>：</span></span></font><span><span style="background-color:#ffffff;">Ubuntu 20.04 LTS</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">架构：</span></span></font><span><span style="background-color:#ffffff;">x86_64</span></span><font face="等线"><span><span style="background-color:#ffffff;">（开发机）或</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">aarch64</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（机器人本体）</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">编译器：</span></span></font><span><span style="background-color:#ffffff;">GCC 9.4.0</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">2.</span></span><font face="等线"><span><span style="background-color:#ffffff;">依赖安装</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:#ffffff;">执行以下命令安装必要依赖：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>apt<span class="code-snippet__operator">-</span><span class="code-snippet__keyword">get</span><span class="code-snippet__keyword">update</span></span></code><code><span>apt<span class="code-snippet__operator">-</span><span class="code-snippet__keyword">get</span>install<span class="code-snippet__operator">-</span>y cmake g<span class="code-snippet__operator">++</span>build<span class="code-snippet__operator">-</span>essen<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>ti</u></a>al libyaml<span class="code-snippet__operator">-</span>cpp<span class="code-snippet__operator">-</span>dev libeigen3<span class="code-snippet__operator">-</span>dev libboost<span class="code-snippet__operator">-</span><span class="code-snippet__keyword">all</span><span class="code-snippet__operator">-</span>dev libspdlog<span class="code-snippet__operator">-</span>dev libfmt<span class="code-snippet__operator">-</span>dev</span></code></pre>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">3.</span></span><font face="等线"><span><span style="background-color:#ffffff;">编译与安装</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><span><span style="background-color:#ffffff;">1</span></span><font face="等线"><span><span style="background-color:#ffffff;">）编译示例代码</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__built_in">mkdir</span>build</span></code><code><span><span class="code-snippet__built_in">cd</span>build</span></code><code><span>cmake ..</span></code><code><span>make</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><span><span style="background-color:#ffffff;">2</span></span><font face="等线"><span><span style="background-color:#ffffff;">）安装</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">SDK</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">到系统目录</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 安装到默认路径</span></span></code><code><span>sudo make install</span></code><code><span><span class="code-snippet__comment"># 或指定安装路径</span></span></code><code><span>cmake .. -<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>MAKE_INSTALL_PREFIX=/opt/unitree_robotics</span></code><code><span>sudo make install</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><span><span style="background-color:#ffffff;">3</span></span><font face="等线"><span><span style="background-color:#ffffff;">）项目集成</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:#ffffff;">参考</span></span></font></span><span><span><span style="background-color:#ffffff;">example/cmake_sample</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">中的配置，在自定义项目的</span></span></font></span><span><span><span style="background-color:#ffffff;">CMakeLists.txt</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">中通过以下方式引入</span></span></font><span><span style="background-color:#ffffff;">SDK</span></span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>find_package(unitree_sdk2 REQUIRED)</span></code><code><span>target_link_libraries(your_project unitree_sdk2)</span></code></pre>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">四、常见问题与解决方法</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">1.</span></span><font face="等线"><span><span style="background-color:#ffffff;">编译错误</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">问题</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font></span><span><span><span style="background-color:#ffffff;">CMake</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">版本不足</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">解决</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：升级</span></span></font><span><span style="background-color:#ffffff;">CMake</span></span><font face="等线"><span><span style="background-color:#ffffff;">至</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">3.10</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">以上版本：</span></span></font></span><span><span><span style="background-color:#ffffff;">sudo apt-get install cmake --upgrade</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">问题</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：依赖库缺失</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">解决</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：检查是否已安装所有依赖，特别是</span></span></font></span><span><span><span style="background-color:#ffffff;">libyaml-cpp-dev</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">和</span></span></font></span><span><span><span style="background-color:#ffffff;">libeigen3-dev</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">2.</span></span><font face="等线"><span><span style="background-color:#ffffff;">运行时错误</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">问题</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font></span><span><span><span style="background-color:#ffffff;">networkInte<a href="https://www.elecfans.com/tongxin/rf/" target="_blank"><u>rf</u></a><a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>e</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">参数缺失</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">解决</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：运行示例时需指定网络接口（如</span></span></font><span><span style="background-color:#ffffff;">eth0</span></span><font face="等线"><span><span style="background-color:#ffffff;">），例如：</span></span></font></span><span><span><span style="background-color:#ffffff;">./go2_robot_state_client eth0</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">问题</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font><span><span style="background-color:#ffffff;">A<a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>PI</u></a></span></span><font face="等线"><span><span style="background-color:#ffffff;">版本不匹配</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">解决</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：检查客户端与服务器的</span></span></font><span><span style="background-color:#ffffff;">API</span></span><font face="等线"><span><span style="background-color:#ffffff;">版本是否一致，通过</span></span></font></span><span><span><span style="background-color:#ffffff;">GetApiVersion()</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">和</span></span></font></span><span><span><span style="background-color:#ffffff;">GetServerApiVersion()</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">验证</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">问题</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：服务调用失败</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">解决</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：确保机器人已启动对应服务，可通过</span></span></font></span><span><span><span style="background-color:#ffffff;">ServiceList()</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">查询服务状态</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">3.</span></span><font face="等线"><span><span style="background-color:#ffffff;">硬件相关问题</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">问题</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font><span><span style="background-color:#ffffff;">H1</span></span><font face="等线"><span><span style="background-color:#ffffff;">机器人关节跟踪实验失败</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">解决</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：必须先将机器人悬挂起来再运行测试，避免硬件损坏</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">问题</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：运动指令无响应</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">解决</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：检查机器人是否处于正确模式（如运动模式需先激活</span></span></font></span><span><span><span style="background-color:#ffffff;">sport_mode</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">）</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">五、入门实战建议</span></span></font></span></b></h2>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">从示例开始</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：先运行基础示例（如</span></span></font></span><span><span><span style="background-color:#ffffff;">go2_stand_example</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">），熟悉机器人控制流程</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">调试工具</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：利用示例中的日志输出和状态打印功能，理解数据流向</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">3.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">模块化学习</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">运动控制：重点研究</span></span></font></span><span><span><span style="background-color:#ffffff;">go2_sport_client.cpp</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">状态获取：分析</span></span></font></span><span><span><span style="background-color:#ffffff;">go2_robot_state_client.cpp</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">低电平控制：参考</span></span></font></span><span><span><span style="background-color:#ffffff;">h1/low_level</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">目录下的示例</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">渐进式开发</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：先基于现有接口实现简单功能，再逐步深入到自定义控制算法</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:#ffffff;">宇树</span></span></font><span><span style="background-color:#ffffff;">SDK2</span></span><font face="等线"><span><span style="background-color:#ffffff;">为开发者提供了通往机器人开发的便捷路径，无论是高校科研、企业应用还是个人兴趣，都能通过这个工具包快速实现<a href="https://m.elecfans.com/v/" target="_blank"><u>创意</u></a>。动手实践是最好的学习方式，不妨从编译第一个示例开始，开启你的机器人开发之旅吧！</span></span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[探秘MAX16550B：12V总线集成保护IC的卓越之选]]></title>    <link>https://www.elecfans.com/d/7641967.html</link>    <guid>https://www.elecfans.com/d/7641967.html</guid>    <pubDate>2026-02-06 16:45:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641967" value="https://file1.elecfans.com/web2/M00/8F/19/pYYBAGPg8R-AA_mHABhvqOR4Gb8962.pdf"/><h1>
	探秘MAX16550A/MAX16550B：12V总线集成保护IC的卓越之选</h1>
<p>
	在<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>的日常工作中，对12V<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>总线的保护、控制和监测是一项至关重要的任务。今天，我们就来深入了解一下<a href="https://bbs.elecfans.com/group_264" target="_blank"><u>Maxim</u></a>推出的MAX16550A/MAX16550B这两款集成保护IC，看看它们是如何为12V电源系统提供高效、可靠的解决方案的。</p>
<p>
	文件下载：<a href="javascript:;" data-annex="annex0_7641967" target="_blank">MAX16550B.pdf</a></p>
<h2>
	产品概述</h2>
<p>
	MAX16550A/MAX16550B是两款集成了低<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a><a href="https://www.elecfans.com/tags/mosfet/" target="_blank"><u>MOSFET</u></a>和无损<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>感应电路的保护IC，具备SMBus/PMBus控制和报告功能。它们专为12V电源的分配、控制、监测和保护而设计，内部的<a href="https://m.hqchip.com/app/1700" target="_blank"><u>LDO</u></a>可为保护IC提供电源电压。这两款IC有不同的型号可供选择，MAX16550A提供30A保护和8A启动电流，MAX16550B则提供30A保护和16A启动电流，能满足不同应用场景的需求。</p>
<h2>
	产品特性亮点</h2>
<h3>
	高集成度与小尺寸优势</h3>
<p>
	这两款IC采用了高集成度设计，将电源、控制和监测功能集于一体，尺寸仅为4mm x 4.5mm（30A），占用的电路板面积不到传统解决方案的25%。这种高集成度不仅节省了电路板空间，还降低了系统成本。</p>
<h3>
	精确的电流感应</h3>
<p>
	MAX16550A/MAX16550B采用了Maxim的专利无损电流感应技术，能够在负载和温度变化的情况下提供<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>的电流感应。这种技术提高了整个系统的能源效率，减少了功耗。</p>
<h3>
	先进的系统<a href="https://www.hqchip.com/app/1731" target="_blank"><u>电源管理</u></a></h3>
<p>
	通过PMBus/SMBus<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>，IC提供了广泛的状态监测和报告功能，包括负载电流指示器（ILO<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a>）引脚的高精度<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>输出电流报告。此外，还具备可<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>软启动功能，可有效限制浪涌电流，提高电源供应的可靠性。</p>
<h3>
	多重保护功能</h3>
<p>
	IC对12V系统电源轨的电流和电压进行实时监测，一旦检测到故障，能够迅速关闭电路，提供多级保护。具体保护功能包括过流保护（OCP）、过压保护（OVP，仅MAX16550A具备）、欠压锁定（UVLO）、过温保护（OTP）等。</p>
<h2>
	<a href="https://m.elecfans.com/v/tag/773/" target="_blank"><u>工作原理</u></a>与启动过程</h2>
<h3>
	启动流程</h3>
<p>
	当12V电源电压足够高以保证LDO正常工作时，IC会启用集成的1.8V VDD LDO。VDD有效后，IC会读取SMBus_ID编程电阻的值来设置PMBus地址并启动。在此期间，<a href="https://www.hqchip.com/app/1715" target="_blank"><u>栅极驱动</u></a>电源电容会完全充电。完成这些操作后，IC可以通过使能输入进行控制。</p>
<h3>
	启动安全工作区（SOA）</h3>
<p>
	在软启动过程中，确保FET在其安全工作区内运行至关重要。启动期间允许的峰值电流在特定图表中有显示。如果应用中可能出现电阻短路，需要使用启动OCP功能来保护设备，且启动OCP阈值必须低于安全峰值电流。</p>
<h2>
	保护机制详解</h2>
<h3>
	过流保护（OCP）</h3>
<ul><li>
		<strong>启动OCP</strong>：在启动期间，直到电源良好（PWRGD）标志置位，启动OCP功能一直有效。如果启动期间负载电流超过启动阈值，集成的通态FET将在10µs内关闭，并将FAULT引脚置低。</li>
	<li>
		<strong>正常运行OCP</strong>：启动过程完成且PWRGD标志置高后，IC提供三级过流保护。“适度”OCP阈值可通过模拟外部电阻进行编程，允许在可编程的超时时间内维持较高电流而不关闭设备。“严重”OCP阈值通过PMBus进行编程，一旦负载电流超过该阈值，FET将在5µs内关闭。“安全”OCP阈值内部固定为60A，可确保FET在任何时候都不会超过其安全工作条件。</li>
</ul><h3>
	过压保护（OVP）</h3>
<p>
	MAX16550A具备VIN过压保护功能，可保护系统免受可能损坏下游电路的过压事件影响。当输入电压超过过压保护阈值时，通态FET将被锁定关闭，FAULT引脚置低。</p>
<h3>
	欠压锁定（UVLO）</h3>
<p>
	IC对VDD、VIN、VGS和VBOOST等电压进行欠压锁定监测。如果任何一个电压低于相应的阈值，会触发相应的保护动作。</p>
<h3>
	过温保护（OTP）</h3>
<p>
	当结温超过可编程阈值时，IC会锁定集成的FET关闭，并将FAULT输出置低。要重新启用IC，可以通过切换EN/UVLO或VIN，或者通过OPERA<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>ONS命令进行重启。</p>
<h2>
	编程与配置</h2>
<h3>
	模拟编程</h3>
<p>
	通过ROCP引脚的电阻可以对适度OCP阈值进行模拟编程，通过CSS<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>可以对软启动斜坡率进行模拟编程，通过电阻分压器可以对输入UVLO阈值进行模拟编程。</p>
<h3>
	PMBus编程</h3>
<p>
	PMBus地址可以通过外部电阻进行编程，同时还可以对功率故障超时、严重OCP阈值、启动延迟、输出PWRGD阈值、自检查阈值、过温警告和故障阈值等参数进行数字编程。</p>
<h2>
	设计注意事项</h2>
<h3>
	电容选择</h3>
<ul><li>
		<strong>输入电容（CIN）</strong>：为保证输入电压稳定且无噪声，强烈建议使用输入电容。对于不需要在保护IC之前使用输入电容的应用，输入电压纹波应小于300mV峰峰值。</li>
	<li>
		<strong>输出电容（COUT）</strong>：最大输出电容可以通过特定公式进行计算，选择时要确保设计的最大浪涌电流低于启动OCP阈值且在启动SOA范围内。</li>
	<li>
		<strong>软启动电容（CSS）</strong>：CSS电容连接在MOSFET的栅极和地之间，通过固定<a href="https://www.hqchip.com/app/1725" target="_blank"><u>电流源</u></a>充电，可产生线性单调的VOUT斜坡。斜坡率可以通过选择合适的CSS值进行编程。</li>
</ul><h3>
	<a href="https://m.hqchip.com/app/1554" target="_blank"><u>二极管</u></a>选择</h3>
<ul><li>
		<strong>输入<a href="https://m.hqchip.com/app/1587" target="_blank"><u>TVS</u></a>二极管</strong>：为将输入电压瞬变钳位在VIN引脚的额定范围内，需要在输入使用瞬态电压抑制（TVS）二极管。选择时要考虑反向关断电压、峰值脉冲电流和钳位电压等参数。</li>
	<li>
		<strong>输出<a href="https://www.hqchip.com/app/1558" target="_blank"><u>肖特基</u></a>二极管</strong>：为将负输出电压尖峰钳位在VOUT引脚的额定范围内，需要在输出使用肖特基二极管。选择时要选择正向电压降低且峰值正向浪涌电流高于预期电感电流的二极管。</li>
</ul><h3>
	布局建议</h3>
<ul><li>
		<strong>VIN和VOUT</strong>：使用宽而多的VIN和VOUT平面，以最小化输入和输出走线电感，使用多个过孔连接层间电源平面。输入和输出电容应尽可能靠近IC放置。</li>
	<li>
		<strong>接地</strong>：从顶层的接地引脚（引脚13）到下层接地层使用约1mm宽、7mm长的走线，并通过至少两个过孔连接。在第二层IC封装正下方使用禁布区。</li>
	<li>
		<strong>VBST和SS</strong>：VBST和SS电容应尽可能靠近引脚放置在顶层。</li>
	<li>
		<strong>VDD</strong>：在顶层添加VDD平面，将VDD电容靠近IC去耦，形成更紧密的接地回路。VDD接地应远离输出电容接地。</li>
	<li>
		<strong>ROCP和ILOAD</strong>：ROCP和ILOAD电阻应尽可能靠近IC放置。</li>
</ul><h2>
	总结</h2>
<p>
	MAX16550A/MAX16550B这两款集成保护IC凭借其高集成度、精确的电流感应、先进的电源管理和多重保护功能，为12V电源系统的设计提供了一个高效、可靠的解决方案。在实际应用中，电子工程师可以根据具体需求对IC进行编程和配置，并遵循合理的设计和布局建议，以充分发挥其性能优势。希望通过本文的介绍，能帮助大家更好地了解和应用这两款优秀的IC产品。</p>
<p>
	各位<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>朋友，在你们的设计中是否也遇到过类似的电源保护问题呢？你们又是如何解决的呢？欢迎在评论区分享你们的经验和见解。</p>]]></description></item><item>    <title><![CDATA[头部车企多域融合发力！蓝牙WiFi这么用]]></title>    <link>https://www.elecfans.com/d/7641968.html</link>    <guid>https://www.elecfans.com/d/7641968.html</guid>    <pubDate>2026-02-06 16:45:00</pubDate>    <description><![CDATA[<p>
	飞易通深耕<a href="https://bbs.elecfans.com/group_57" target="_blank"><u>物联网</u></a>无线通讯领域十五载，聚焦<a href="https://www.elecfans.com/tags/蓝牙/" target="_blank"><u>蓝牙</u></a>、<a href="https://www.elecfans.com/tags/wi-fi/" target="_blank"><u>Wi-Fi</u></a>模组及自研协议栈产品，凭借扎实技术积淀与车规级量产能力，与头部A车企达成深度合作，共同推动无线通讯技术在智能座舱场景规模化落地，以双向协同赋能智能出行升级。</p>
<p>
	<strong>一、战略契合：锚定智能座舱核心诉求</strong></p>
<p>
	作为中国品牌领军者，A车企全品类车型覆盖多动力类型，<a href="https://m.elecfans.com/v/tag/293/" target="_blank"><u>新能源</u></a>业务增长迅猛。转型智能低碳科技企业过程中，其以“舱驾一体”“多模态智能交互”为核心路线，对无线通讯技术提出三大明确诉求：实现三域高效数据传输，保障低延迟与高稳定性；支撑语音、手势等多模态交互流畅响应；适配多价位车型规模化量产。飞易通的技术积累与产品布局，与A车企升级方向高度契合，成为合作核心基石。</p>
<p>
	<strong>二、技术协同：定制方案破解场景痛点</strong></p>
<p>
	针对“三域融合”数据传输需求，推出Wi-Fi 6+BT 5.4高集成度BW3583V模组，以高速传输、低延迟特性筑牢多域数据交互链路；聚焦座舱<a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a>体验，BT1211模组搭载LE Audio功能，支持LC3编码，实现多通道音频独立传输，满足驾乘人员个性化需求，构建无干扰音频环境；依托自主研发的FeasyBlue协议栈，兼容<a href="https://bbs.elecfans.com/group_360" target="_blank"><u>Android</u></a>、<a href="https://bbs.elecfans.com/group_300" target="_blank"><u>Linux</u></a>等多系统，凭借强移植性与完整适配性，可以无缝兼容A车企五感交互系统，提供可靠底层支撑。</p>
<p>
	<strong>参数指标如下：</strong></p>
<table><tbody><tr><td>
				<strong>模组</strong></td>
			<td>
				<strong>FSC-BT1211</strong></td>
			<td>
				<strong>FSC-BW3583V</strong></td>
		</tr><tr><td>
				核心芯片</td>
			<td>
				RTL8761CTV-CG</td>
			<td>
				<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>AI</u></a>C8800D80I-3V</td>
		</tr><tr><td>
				蓝牙 版本</td>
			<td>
				蓝牙 5.3</td>
			<td>
				蓝牙 5.4</td>
		</tr><tr><td>
				Wi-Fi 版本</td>
			<td>
				/</td>
			<td>
				WIFI6</td>
		</tr><tr><td>
				发射功率</td>
			<td>
				+10dBm（max）</td>
			<td>
				+11dBm（max）</td>
		</tr><tr><td>
				主要<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a></td>
			<td>
				<a href="https://www.elecfans.com/tags/uart/" target="_blank"><u>UART</u></a>/I²S/I²C</td>
			<td>
				UART/<a href="https://www.hqchip.com/app/1515" target="_blank"><u>USB</u></a>/PCM/<a href="https://www.elecfans.com/tags/sdi/" target="_blank"><u>SDI</u></a>O</td>
		</tr><tr><td>
				尺寸</td>
			<td>
				15*12*2.2</td>
			<td>
				17*17*2.4</td>
		</tr><tr><td>
				工作温度</td>
			<td>
				-40C ~ +85C</td>
			<td>
				-40C ~+85C</td>
		</tr></tbody></table><p>
	<strong>三、全链联动：高效推进量产落地</strong></p>
<p>
	研发阶段采用“前置化联合攻关”模式，飞易通研发人员深度参与车型开发技术支持，针对<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>干扰、设备兼容等问题，共享资源、共研方案，通过驻场协同实时响应需求，高效解决模组适配难题；供应链层面，凭借多项车规<a href="https://bbs.elecfans.com/group_776" target="_blank"><u>认证</u></a>，将核心产品纳入车企供应链资源池，针对多车型差异需求提供灵活定制服务；量产阶段依托信息化系统，双方实时同步订单、进度与风险，保障交付高效稳定，为长安车型快速上市保驾护航</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZO2mFqiWAfvpIAAB19koJmCw24.webp" alt="wKgZO2mFqiWAfvpIAAB19koJmCw24.webp"/></p>
<p>
	<strong>四、合作成效：技术价值规模化验证</strong></p>
<p>
	技术层面，核心方案完美适配智能座舱，满足三域融合与多模态交互核心需求；体验层面，LE Audio与交互系统深度融合，显著提升座舱音频体验与响应速度，获市场广泛认可；量产层面，已完成2款主力车型批量配套，助力A车企新能源车型智能座舱赋能板块增长。</p>
<p>
	<strong>五、未来展望：共拓智能出行新局</strong></p>
<p>
	此次合作是技术互补、价值共生的成功实践。未来，飞易通将继续与A车企深化协同，聚焦智能座舱升级、新能源配套等核心领域，持续打磨场景化解决方案，拓展车载钥匙、T-Box等合作场景，以技术创新与高效协作，推动智能出行技术迭代升级，让可靠无线通讯融入每一次出行。<br/><br/>
	审核编辑 黄宇</p>]]></description></item><item>    <title><![CDATA[RK3576平台HDMI Out开发实战：从配置解析到调试驱动全攻略]]></title>    <link>https://www.elecfans.com/d/7401332.html</link>    <guid>https://www.elecfans.com/d/7401332.html</guid>    <pubDate>2026-02-06 16:46:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在<a href="https://www.elecfans.com/soft/data/21-22/" target="_blank"><u>嵌入式</u></a>显示领域，</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">凭借对</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1685" target="_blank"><u>HDMI</u></a> 2.1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">协议的完善支持（最高</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出、多格式颜色兼容），成为机顶盒、工业触控屏、智能投影仪等场景的核心选择。但</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发常因配置细节疏漏、调试方法不当陷入困境</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">比如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置全量却无显示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a>与视频不同步</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">本文结合实际项目中</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置文件，从</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">应用场景</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置解析</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试指南</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题排查</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动分析</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">五个维度，系统梳理</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI Out</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发流程</span></span></font></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixqAXGVXAAEIOBryRvU455.png" alt="wKgZPGkaixqAXGVXAAEIOBryRvU455.png"/><p>
		</p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的核心应用场景</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">落地项目中，</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI Out</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">主要服务于三类需求，不同场景下配置侧重点存在差异：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高清影音场景</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如</span></span></font><span><span style="background-color:rgb(255,255,255);">4K</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">机顶盒）：需优先保障</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">分辨率输出、音频同步及色彩准确性（支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">YCbCr420 10bit</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工业显示场景</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如工控屏）：需稳定输出固定分辨率（如</span></span></font><span><span style="background-color:rgb(255,255,255);">1920x1080p60</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），抗干扰能力强（<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>强度适配）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">多媒交互场景</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如智能座舱）：需支持开机</span></span></font><span><span style="background-color:rgb(255,255,255);">logo</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">快速显示、热插拔检测及亮度</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">对比度动态调节。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">无论哪种场景，核心配置均围绕</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">显示通路打通</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频适配</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">功能验证</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">展开，以下从实际项目配置文件切入，解析每一项配置的作用与技术逻辑。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">完整配置解析（附配置流程图）</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">实际项目的</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置已覆盖</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">显示、音频、<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>、开机</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">logo</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">四大核心模块，下面逐段<a href="https://m.elecfans.com/v/tag/899/" target="_blank"><u>拆解</u></a>配置逻辑，结合</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发技术规范说明关键参数：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置流程图：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置逻辑</span></span></font></span></b></h3>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixqACqIhAARVcFcsoL8996.png" alt="wKgZPGkaixqACqIhAARVcFcsoL8996.png"/><h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">基础显示配置：打通</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出通路</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">这部分配置是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">正常显示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的核心，需重点关注</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VOP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">绑定、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PHY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">使能及信号时序优化：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">&amp;hdmi</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">主设备使能</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>&amp;hdmi {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>; <span class="code-snippet__comment">// 使能HDMI设备</span></span></code><code><span>  enable-gpios = &lt;&amp;gpio4 <span class="code-snippet__variable">RK_PC6</span><span class="code-snippet__variable">GPIO_<a href="https://m.hqchip.com/app/1703" target="_blank"><u>AC</u></a><a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>VE_HIGH</span>&gt;; <span class="code-snippet__comment">// GPIO控制HDMI硬件上电</span></span></code><code><span>  <a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>rockchip</u></a>,<a href="https://www.hqchip.com/app/1522" target="_blank"><u>sd</u></a>a-falling-delay-ns = &lt;<span class="code-snippet__number">360</span>&gt;; <span class="code-snippet__comment">// 优化<a href="https://www.elecfans.com/tags/i2c/" target="_blank"><u>I2C</u></a>-SDA信号时序，提升EDID读取稳定性</span></span></code><code><span>};</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键作用</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">status = "okay"</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">是</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">总开关</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，仅当该节点使能后，后续</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PHY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VOP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">绑定等配置才能生效；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">GPIO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">控制逻辑</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过硬件引脚控制</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片上电时序，避免软件使能时因上电顺序异常导致的无显示问题；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">I2C</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时序优化</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rockchip,sda-falling-delay-ns</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">用于调整</span></span></font><span><span style="background-color:rgb(255,255,255);">DDC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2C</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）总线的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDA</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">信号下降沿延迟，当出现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“EDID</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">读取超时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">dmesg</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">报</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">i2c re<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a> time out</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）时，该参数可提升设备兼容性。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_in_vp0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：绑定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VOP VP0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">显示通路</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>&amp;hdmi_in_vp0 {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span>};</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">技术背景</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VOP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（显示处理单元）包含多个</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Video Port</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），其中</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VP0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持最高</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">分辨率，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VP1/VP2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">多用于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1080p</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">及以下低分辨率场景；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置意义</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：该节点使能后，</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">图像数据将从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VP0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">读取，若误绑定至</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VP1/VP2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，可能导致</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4K</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等高分辨率无法输出；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">资源冲突规避</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：若项目无需多显示接口，需将</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_in_vp1</span></span></span><span><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_in_vp2</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">状态设为</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">disabled</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，避免硬件资源抢占。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">&amp;hdptxphy_hdmi</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：使能</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI PHY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>&amp;hdptxphy_hdmi {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span>};</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">功能定位</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（物理层）芯片负责将<a href="https://www.hqchip.com/app/1381" target="_blank"><u>数字信号</u></a>转换为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">差分信号（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TMDS/FRL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">信号从芯片输出到显示设备</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的关键环节；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置必要性</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点未使能时，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">无任何信号输出，需与</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点同步使能，否则易出现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">显示设备检测到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">连接但无画面</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频配置：实现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">音视频同步</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">需同时承载视频与音频信号，配置中的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_sound</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;rou<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>_hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点为音频通路核心：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_sound</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：音频通路关联</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attr">hdmi_sound</span>: hdmi-sound {</span></code><code><span>  compatible =<span class="code-snippet__string">"rockchip,hdmi"</span>; <span class="code-snippet__comment">// 匹配HDMI音频驱动</span></span></code><code><span>  rockchip,mclk-fs = &lt;<span class="code-snippet__number">128</span>&gt;; <span class="code-snippet__comment">// 主时钟与采样率比值（128为标准配置）</span></span></code><code><span>  rockchip,card-name =<span class="code-snippet__string">"rockchip-hdmi"</span>; <span class="code-snippet__comment">// 声卡名称（系统识别标识）</span></span></code><code><span>  rockchip,<a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>cpu</u></a> = &lt;&amp;sai6&gt;; <span class="code-snippet__comment">// 关联SAI6<a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频接口</u></a>（负责音频数据输出）</span></span></code><code><span>  rockchip,codec = &lt;&amp;hdmi&gt;; <span class="code-snippet__comment">// 关联HDMI codec（实现音频编码）</span></span></code><code><span>  rockchip,jack-det; <span class="code-snippet__comment">// 使能HDMI插入检测，自动切换音频输出</span></span></code><code><span>};</span></code><code><span>&amp;hdmi_sound {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span>};</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频传输逻辑</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：音频数据从</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;sai6</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（音频接口）输出，经</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">codec</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编码）后，随</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">视频信号一同传输至显示设备；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时钟匹配要求</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rockchip,mclk-fs = &lt;128&gt;</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">需与音频采样率匹配（如</span></span></font><span><span style="background-color:rgb(255,255,255);">48kHz</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">采样率对应</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">128</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），参数不匹配会导致音频杂音或无声；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">自动切换功能</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rockchip,jack-det</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">使能后，系统可实时检测</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">插拔状态，实现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">插入时切</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频、拔出时切内置喇叭</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的场景化输出。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">&amp;route_hdmi</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：音频路由与开机</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">logo</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">使能</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>&amp;route_hdmi {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span> <span class="code-snippet__keyword">connect</span>= &lt;&amp;vp0_out_hdmi&gt;; <span class="code-snippet__regexp">//</span>绑定VP<span class="code-snippet__number">0</span>到HDMI的信号路由</span></code><code><span>};</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">双重功能定位</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频路由：确保</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_sound</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出的音频信号能通过</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>传输，控制音频信号流向；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开机</span></span></font><span><span style="background-color:rgb(255,255,255);">logo</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">显示：该节点使能后，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">U-Boot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段即可显示开机</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">logo</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，未使能时需等待系统完全启动后才出现画面；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">参数一致性要求</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">connect</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">参数需与</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_in_vp0</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">保持一致（均为</span></span></font><span><span style="background-color:rgb(255,255,255);">VP0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），否则会出现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">开机</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">logo</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">花屏</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时钟配置：保障高分辨率稳定输出</span></span></font></span></b></h3>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>&amp;display_<a href="https://m.hqchip.com/app/1525" target="_blank"><u>sub</u></a>system {</span></code><code><span>  clocks = &lt;&amp;hdptxphy_hdmi&gt;;</span></code><code><span>  c<span class="code-snippet__built_in">lock-names</span>=<span class="code-snippet__string">"hdmi0_phy_pll"</span>;</span></code><code><span>};</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时钟功能意义</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">分辨率依赖稳定的时钟源，</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">hdmi0_phy_pll</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">锁相环）为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VP0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1703" target="_blank"><u>dc</u></a>lk</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（显示时钟）提供基准信号；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高分辨率适配场景</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：输出非标准分辨率（如</span></span></font><span><span style="background-color:rgb(255,255,255);">2560x1440p100</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）或</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等高带宽分辨率时，必须指定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PHY PLL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">为时钟源，否则易出现画面闪屏；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">验证方法</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：配置后可通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/kernel/debug/clk/clk_summary | grep hdmi0_phy_pll</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看时钟是否正常生效。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试指南（附调试命令脑图）</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置完成后，需通过系列调试命令验证功能有效性，以下为</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台专属调试方法，覆盖显示、音频、时钟等核心模块：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试命令脑图：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试核心命令</span></span></font></span></b></h3>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixqARWx2AAIfsgH3coQ984.png" alt="wKgZPGkaixqARWx2AAIfsgH3coQ984.png"/><h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">3.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">基础显示调试：确认画面输出链路</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看</span></span></font><span><span style="background-color:rgb(255,255,255);">VOP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">状态</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/kernel/debug/dri/0/summary</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，若输出中</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“VP0”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">为</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">ACTIVE</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，且</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“HDMI-A-1”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">分辨率与预期一致（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3840x2160</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），说明</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VOP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的链路正常；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">异常处理：若</span></span></font><span><span style="background-color:rgb(255,255,255);">VP0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">DISABLED</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，需检查</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_in_vp0</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点状态是否为</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">okay</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工作状态</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/kernel/debug/dw-hdmi/status</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，重点关注三项关键信息：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">PHY enabled</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片正常工作；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>Pi</u></a>xel Clk: 594000000Hz</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">分辨率对应</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">594MHz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">像素时钟；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">Color Format: YCbCr420</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：与配置的颜色格式一致。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">3.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频调试：解决</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">有画面无声音</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">确认声卡识别</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/class/sound/card*/device/id</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，若输出包含</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“rockchip-hdmi”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，说明</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_sound</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置生效；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">异常处理：若无该声卡，需检查</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;sai6</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点是否使能（音频数据输出依赖</span></span></font><span><span style="background-color:rgb(255,255,255);">SAI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试音频输出</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">aplay -D plughw:rockchip-hdmi,0 test.wav</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">test.wav</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为本地音频测试文件），若显示设备有声音输出，说明音频通路正常；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">异常处理：若报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“device busy”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，需关闭其他占用音频资源的进程。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">3.3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高分辨率调试：保障</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">稳定</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出</span></span></font><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">等高带宽分辨率时，需额外验证时钟与信号稳定性：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时钟验证</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/kernel/debug/clk/clk_summary | grep hdmi0_phy_pll</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，若输出</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“hdmi0_phy_pll: 594000000Hz”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，说明时钟满足</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">需求；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">信号强度验证</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若显示设备画面闪屏，执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/kernel/debug/dw-hdmi/phy</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看</span></span></font><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/寄存器/" target="_blank"><u>寄存器</u></a>，重点关注</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">预加重</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">pre-emphasis</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">幅值</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">swing</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）参数，可通过修改</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdptxphy_hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rockchip,phy-table</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">优化信号（具体调整方法见问题排查章节）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题排查（附排查流程图）</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">即使配置正确，仍可能遇到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">无显示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">闪屏</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频异常</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等问题，以下为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3576</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台高频问题排查流程，覆盖硬件、配置、信号等多维度：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">排查流程图：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高频问题排查</span></span></font></span></b></h3>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixqAJ4xzAAE_OpE8SLo421.png" alt="wKgZPGkaixqAJ4xzAAE_OpE8SLo421.png"/><h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">4.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高频问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：无显示（显示设备提示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">无信号</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">排查步骤</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/class/sound/card*/device/id</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，若输出为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“disconnected”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，优先检查</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">线材是否损坏、显示设备接口是否正常；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若输出为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“connected”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/kernel/debug/dri/0/summary</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，若</span></span></font><span><span style="background-color:rgb(255,255,255);">VP0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">DISABLED</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，将</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_in_vp0</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">状态改为</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">okay</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">c.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若</span></span></font><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">状态为</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">disabled</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，确认</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdptxphy_hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点是否设为</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">okay</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">4.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高频问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">闪屏</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心原因</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：信号强度不足或时钟不稳定；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">排查步骤</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">确认</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">线材为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2.1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">线材带宽不足，无法支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cat /sys/kernel/debug/dw-hdmi/phy</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，查看</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“pre-emphasis”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（预加重）参数，若为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0x0c</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，可调整为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0x0d</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（增加预加重，提升信号完整性）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">c.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若仍闪屏，修改</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdptxphy_hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rockchip,phy-table</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">参数：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>&amp;hdptxphy_hdmi {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span>  rockchip,phy-table = &lt;</span></code><code><span>   <span class="code-snippet__number">165000000</span><span class="code-snippet__number">0x03</span><span class="code-snippet__number">0x04</span><span class="code-snippet__number">0x0d</span><span class="code-snippet__number">0x12</span><span class="code-snippet__number">0x00</span><span class="code-snippet__number">0x00</span><span class="code-snippet__number">0x00</span><span class="code-snippet__comment">// 提升预加重</span></span></code><code><span>   <span class="code-snippet__number">340000000</span><span class="code-snippet__number">0x03</span><span class="code-snippet__number">0x04</span><span class="code-snippet__number">0x0d</span><span class="code-snippet__number">0x12</span><span class="code-snippet__number">0x00</span><span class="code-snippet__number">0x00</span><span class="code-snippet__number">0x00</span></span></code><code><span>   <span class="code-snippet__number">594000000</span><span class="code-snippet__number">0x02</span><span class="code-snippet__number">0x08</span><span class="code-snippet__number">0x0e</span><span class="code-snippet__number">0x18</span><span class="code-snippet__number">0x00</span><span class="code-snippet__number">0x00</span><span class="code-snippet__number">0x00</span><span class="code-snippet__comment">// 提升幅值</span></span></code><code><span>  &gt;;</span></code><code><span>};</span></code></pre>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">4.3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高频问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">EDID</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">读取失败（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">dmesg</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">报</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“i2c read time out”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">EDID</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">功能定位</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">EDID</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">交换分辨率、颜色格式等信息，读取失败会导致分辨率适配异常；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">排查步骤</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点增加</span></span></font><span><span style="background-color:rgb(255,255,255);">I2C</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时序优化参数：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>&amp;hdmi {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span>  enable-gpios = &lt;&amp;gpio4 RK_PC6 GPIO_ACTIVE_HIGH&gt;;</span></code><code><span>  rockchip,sda-falling-delay-ns = &lt;<span class="code-snippet__number">360</span>&gt;;</span></code><code><span>  ddc-i2c-scl-high-<span class="code-snippet__keyword">time</span>-ns = &lt;<span class="code-snippet__number">9625</span>&gt;; <span class="code-snippet__regexp">//</span>降低SCL高电平时间（<span class="code-snippet__number">50</span>KHz速率）</span></code><code><span>  ddc-i2c-scl-low-<span class="code-snippet__keyword">time</span>-ns = &lt;<span class="code-snippet__number">10000</span>&gt;;</span></code><code><span>};</span></code></pre>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若仍失败，更换短距离</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">线材（长距离线材易导致</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2C</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">信号衰减）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">五、</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动深度解析：驱动如何助力调试？</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的核心桥梁，核心代码路径（如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dw_hdmi-rockchip.c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）不仅实现基础功能，还内置丰富调试接口，为问题排查提供关键支持，以下解析驱动核心模块及调试价值：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">5.1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动核心模块：三大功能支撑</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）设备树解析模块</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">功能作用</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：驱动自动解析</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdptxphy_hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">等节点配置，将参数写入硬件寄存器（如</span></span></font><span><span style="background-color:rgb(255,255,255);">GPIO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">使能状态、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2C</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">时序参数）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试价值</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：若配置存在错误（如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">connect</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">参数</span></span></font><span><span style="background-color:rgb(255,255,255);">mismatch</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），驱动会在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">dmesg</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">中输出</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“invalid connect node”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等提示，快速定位配置问题；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键代码逻辑</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__function"><span class="code-snippet__keyword">static</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">hdmi_probe</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">platform_device *pdev</span></span><span class="code-snippet__function">)</span>{</span></code><code><span> <span class="code-snippet__comment">// 解析&amp;hdmi节点的GPIO参数</span></span></code><code><span>  hdmi-&gt;enable_gpio = devm_gpiod_get(&amp;pdev-&gt;dev,<span class="code-snippet__string">"enable"</span>, GPIOD_OUT_HIGH);</span></code><code><span> <span class="code-snippet__keyword">if</span>(IS_ERR(hdmi-&gt;enable_gpio)) {</span></code><code><span>    dev_err(&amp;pdev-&gt;dev,<span class="code-snippet__string">"fai<a href="https://www.hqchip.com/app/1721" target="_blank"><u>led</u></a> to get enable gpion"</span>); <span class="code-snippet__comment">// 报错提示GPIO配置错误</span></span></code><code><span>   <span class="code-snippet__keyword">return</span>PTR_ERR(hdmi-&gt;enable_gpio);</span></code><code><span>  }</span></code><code><span> <span class="code-snippet__comment">// 解析I2C时序参数</span></span></code><code><span>  device_property_read_u32(&amp;pdev-&gt;dev,<span class="code-snippet__string">"rockchip,sda-falling-delay-ns"</span>, &amp;hdmi-&gt;sda_delay);</span></code><code><span>}</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PHY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与时钟管理模块</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">功能作用</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：驱动负责初始化</span></span></font><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片、配置</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PLL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">时钟（如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">hdmi0_phy_pll</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），确保信号稳定输出；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试价值</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时钟异常时，驱动会在</span></span></font><span><span style="background-color:rgb(255,255,255);">dmesg</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中报</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“hdmi0_phy_pll clock not found”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，提示</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;display_subsystem</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置错误；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化失败时，驱动会报</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“hdmi phy init failed”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，指引检查</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdptxphy_hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点状态；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键代码逻辑</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__function"><span class="code-snippet__keyword">static</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">hdmi_phy_init</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">hdmi_device *hdmi</span></span><span class="code-snippet__function">)</span>{</span></code><code><span> <span class="code-snippet__comment">// 初始化PHY寄存器</span></span></code><code><span>  regmap_write(hdmi-&gt;phy_regmap,<span class="code-snippet__number">0x08</span>, hdmi-&gt;phy_table[<span class="code-snippet__number">0</span>]); <span class="code-snippet__comment">// 写入信号强度参数</span></span></code><code><span> <span class="code-snippet__comment">// 使能PHY时钟</span></span></code><code><span>  ret = clk_prepare_enable(hdmi-&gt;phy_pll_clk);</span></code><code><span> <span class="code-snippet__keyword">if</span>(ret) {</span></code><code><span>    dev_err(hdmi-&gt;dev,<span class="code-snippet__string">"failed to enable phy pll clockn"</span>); <span class="code-snippet__comment">// 时钟使能失败提示</span></span></code><code><span>   <span class="code-snippet__keyword">return</span>ret;</span></code><code><span>  }</span></code><code><span> <span class="code-snippet__keyword">return</span><span class="code-snippet__number">0</span>;</span></code><code><span>}</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）调试接口模块</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动在</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">/sys/kernel/debug/dw-hdmi/</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">路径下提供多个调试接口，直接支持状态查询与参数修改，是排查问题的核心工具：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试接口</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">功能作用</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">典型调试场景</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/sys/kernel/debug/dw-hdmi/status</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">实时状态（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PHY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、时钟、颜色）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">排查</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“PHY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">未使能</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">颜色格式错误</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/sys/kernel/debug/dw-hdmi/phy</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">读取</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">修改</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PHY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">寄存器</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">调整信号强度解决闪屏</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/sys/kernel/debug/dw-hdmi/ctrl</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">读取</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">修改</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a>寄存器</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">修复</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“EDID</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">读取超时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">实操示例</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：修改</span></span></font><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">预加重参数时，无需重新编译驱动，直接通过接口写入：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 修改PHY寄存器0x09（预加重）为0x0d</span></span></code><code><span><span class="code-snippet__attribute">echo</span><span class="code-snippet__number">09</span><span class="code-snippet__number">0</span>d &gt; /sys/kernel/debug/dw-hdmi/phy</span></code></pre>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">5.2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动对调试的核心价值</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">错误日志提示</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：驱动实时输出配置错误、硬件异常日志（如</span></span></font><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化失败），避免盲目排查；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">实时参数调整</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">debugfs</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口可实时修改寄存器参数（如信号强度、</span></span></font><span><span style="background-color:rgb(255,255,255);">I2C</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">速率），无需重新烧录固件；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">状态可视化</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">/sys/kernel/debug/dw-hdmi/status</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">等接口将硬件状态转化为可读信息，无需<a href="https://www.elecfans.com/v/tag/577/" target="_blank"><u>示波器</u></a>即可判断信号是否正常，降低调试门槛。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">六、总结：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发关键要点</span></span></font></span></b></h2>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置一致性</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">VOP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">绑定（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;hdmi_in_vp0</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、音频路由（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;route_hdmi</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、时钟源（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">&amp;display_subsystem</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）需保持参数一致，否则易出现花屏、无显示；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试工具依赖</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：善用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">debugfs</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口（状态查询）、</span></span></font><span><span style="background-color:rgb(255,255,255);">dmesg</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">日志（错误定位）、命令行工具（分辨率调整），</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">90%</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">软件问题可通过这些工具解决；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高分辨率适配</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">4K120Hz</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">场景需重点关注</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI 2.1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">线材、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PHY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">信号强度、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PLL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">时钟稳定性，三者缺一不可；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">4.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动调试能力</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：理解驱动核心模块逻辑（设备树解析、</span></span></font><span><span style="background-color:rgb(255,255,255);">PHY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">管理），可更高效利用调试接口定位问题，提升开发效率。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">按照本文的配置解析、调试方法和问题排查流程，可覆盖</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3576 HDMI Out</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发的绝大多数场景</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">从基础的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">有画面有声音</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">到高难度的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“4K120Hz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">稳定输出</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，均能找到对应的解决方案。</span></span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[输入钳位保护的TIA放大器offset端口使用说明]]></title>    <link>https://www.elecfans.com/d/7641977.html</link>    <guid>https://www.elecfans.com/d/7641977.html</guid>    <pubDate>2026-02-06 16:46:00</pubDate>    <description><![CDATA[<p><img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFrGWAf0_7AAIYRWN193E355.jpg" alt="6496a02c-0338-11f1-96ea-92fbcf53809c.jpg"/><img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFrGWAKmQFAAJcbvI5Mwk652.jpg" alt="64a6da00-0338-11f1-96ea-92fbcf53809c.jpg"/><br/></p><p/><p/><p/>]]></description></item><item>    <title><![CDATA[TMC2210ATJ+ 静音、高效、集成化的步进驱动优选方案！]]></title>    <link>https://www.elecfans.com/d/7641987.html</link>    <guid>https://www.elecfans.com/d/7641987.html</guid>    <pubDate>2026-02-06 16:47:00</pubDate>    <description><![CDATA[<p><br/></p><p style="margin-left:0px;"><span style="background-color:#ffffff;color:#0f1115;">在项目选型中，寻找一颗能同时解决噪音、散热与设计复杂度的<a href="https://www.hqchip.com/app/1787" target="_blank"><u>驱动芯片</u></a>。TMC2210ATJ+ 正是为此类需求而生的一款高度集成化<a href="https://www.elecfans.com/tags/步进电机/" target="_blank"><u>步进电机</u></a>驱动IC。</span></p><p style="margin-left:0px;"><br/></p><p style="margin-left:10px;text-align:justify;"><span style="color:#ffffff;"><strong>01</strong></span> <span style="color:#ffffff;"><strong>为何选择TMC2210ATJ+</strong></span></p><p style="margin-left:auto;text-align:justify;"><strong>TMC2210ATJ+</strong></p><h3 style="margin-left:0px;text-align:justify;"/><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;">这颗芯片的核心价值在于其<strong>“高集成度”</strong>与<strong>“卓越的静音性能”</strong>，这直接转化为更少的物料、更小的布板空间和更优的终端用户体验。</span></p><p style="margin-left:5px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>极致静音，优化产品体验</strong></span></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;">采用<strong>StealthChop2</strong>斩波<a href="https://m.elecfans.com/v/tag/2562/" target="_blank"><u>算法</u></a>，在<a href="https://bbs.elecfans.com/zhuti_dianji_1.html" target="_blank"><u>电机</u></a>低速运行及保持时实现近乎无声的操作，特别适用于办公设备、医疗仪器、消费类产品等对噪音敏感的环境。</span></p><p style="margin-left:5px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>高度集成，简化设计</strong></span></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>集成无损<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>感应（ICS）</strong>：彻底省去外部大功率采样<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>，不仅节约<a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>面积，更直接降低系统功耗和物料成本。</span></p><p style="margin-left:0px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>集成256微步插值器（MicroPlyer）</strong>：即使<a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a>仅输出低分辨率步进<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>，芯片内部也可将其平滑插值为256微步，实现平稳运动，减轻主控负担。</span></p><p style="margin-left:0px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>全保护功能集成</strong>：包含过流、短路、欠压、过热及<a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a>保护，大幅提升系统可靠性，减少外围<a href="https://www.elecfans.com/tags/保护电路/" target="_blank"><u>保护电路</u></a>设计。</span></p><h3 style="margin-left:0px;text-align:justify;"/><p style="margin-left:auto;text-align:justify;"><img src="https://file1.elecfans.com//web3/M00/4B/15/wKgZO2mFrZGAAtNBAABIECwbIPk590.jpg" alt="68ee1006-0338-11f1-96ea-92fbcf53809c.jpg"/><br/><br/></p><p style="margin-left:10px;text-align:justify;"><br/></p><p style="margin-left:10px;text-align:justify;"><span style="color:#ffffff;"><strong>02</strong></span> <span style="color:#ffffff;"><strong>关键参数</strong></span></p><p style="margin-left:10px;text-align:justify;"><strong>TMC2210ATJ+</strong></p><table><tbody><tr><td style="vertical-align:top;">参数类别</td><td style="vertical-align:top;">核心规格</td></tr><tr><td style="vertical-align:top;">供电电压</td><td style="vertical-align:top;">4.5 - 36V <a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a></td></tr><tr><td style="vertical-align:top;">输出电流</td><td style="vertical-align:top;">最大<a href="https://m.hqchip.com/app/1718" target="_blank"><u>RMS</u></a> 2.1A，峰值3.0A</td></tr><tr><td style="vertical-align:top;">导通电阻</td><td style="vertical-align:top;">典型0.23Ω (HS+LS)</td></tr><tr><td style="vertical-align:top;">微步分辨率</td><td style="vertical-align:top;">最高256细分</td></tr><tr><td style="vertical-align:top;">控制<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a></td><td style="vertical-align:top;">标准步进/方向（STEP/DIR）</td></tr><tr><td style="vertical-align:top;">配置方式</td><td style="vertical-align:top;">引脚电平设置</td></tr><tr><td style="vertical-align:top;">诊断输出</td><td style="vertical-align:top;">ERROR, INDEX</td></tr><tr><td style="vertical-align:top;">工作温度</td><td style="vertical-align:top;">-40℃ ~+125℃</td></tr><tr><td style="vertical-align:top;">封装选项</td><td style="vertical-align:top;">TQFN32 (5x5mm)</td></tr></tbody></table><p style="margin-left:0px;text-align:justify;"><br/></p><p style="margin-left:auto;text-align:justify;"><br/><img src="https://file1.elecfans.com//web3/M00/4B/15/wKgZO2mFrZGADY1LAABcBpRAt5c048.jpg" alt="68fa6824-0338-11f1-96ea-92fbcf53809c.jpg"/><br/></p><p style="margin-left:5px;text-align:justify;"><br/></p><p style="margin-left:5px;text-align:justify;"><span style="color:#ffffff;"><strong>03</strong></span> <span style="color:#ffffff;"><strong>应用领域</strong></span></p><p style="margin-left:5px;text-align:justify;"><strong>TMC2210ATJ+</strong></p><p style="margin-left:0px;text-align:justify;"><span style="color:#0f1115;">TMC2210ATJ+ 非常适合对静音、体积和可靠性有要求的应用场景：</span></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>办公自动化</strong>：打印机、扫描仪、复印机。</span></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>金融设备</strong>：ATM机、纸币识别模块、点钞机。</span></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>纺织与缝制设备</strong>：需要安静运行的工业缝纫机、针织机。</span></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>3D打印与桌面制造</strong>：追求高质量打印表面和静音运行的3D打印机。</span></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>泵阀与流体控制</strong>：小型泵、精密阀门<a href="https://m.hqchip.com/app/1847" target="_blank"><u>驱动器</u></a>。</span></p><p style="margin-left:5px;text-align:justify;"><br/></p><p style="margin-left:auto;text-align:justify;"><img src="https://file1.elecfans.com//web3/M00/4B/15/wKgZO2mFrZGAX4ntAAESQG8xA0g012.jpg" alt="6905d3da-0338-11f1-96ea-92fbcf53809c.jpg"/><br/></p><p style="margin-left:5px;text-align:justify;"><br/></p><p style="margin-left:5px;text-align:justify;"><span style="color:#0f1115;">TMC2210ATJ+ 以其<strong>静音运行、高集成度和出色的可靠性</strong>，成为替代传统驱动方案的理想选择。它能有效帮助<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>简化设计，并助力采购优化BOM成本与供应链。</span></p><p style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;color:#0f1115;"><strong>如需获取详细数据手册、评估板或针对特定应用的选型建议，欢迎联系我们团队。我们可提供完整的技术支持与样品服务，协助您的项目快速落地。</strong></span></p>]]></description></item><item>    <title><![CDATA[初次编译rk3568（rk3576）Linux 6.1内核踩坑记录：从报错终止到成功解决的完整流程]]></title>    <link>https://www.elecfans.com/d/7401329.html</link>    <guid>https://www.elecfans.com/d/7401329.html</guid>    <pubDate>2026-02-06 16:47:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">很多刚接触<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>瑞芯微</u></a></span></span></font><span><span style="background-color:rgb(255,255,255);">rk</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">系列芯片开发的小伙伴，在初次编译基于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_300" target="_blank"><u>Linux</u></a> 6.1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核的系统时，很容易因为环境依赖问题卡壳。最近我在编译</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rk3576</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rk3568</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">流程类似）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Linux 6.1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核时就遇到了典型报错，从定位问题到最终解决踩了不少小坑，今天把完整过程整理出来，帮大家少走弯路。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixiAOw9UAAGJ3owc3Qg452.png" alt="wKgZPGkaixiAOw9UAAGJ3owc3Qg452.png"/><h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、问题突发：编译中途突然报错终止</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">按照官方文档配置好编译环境后，我执行了内核编译命令，一开始流程正常，直到终端突然弹出一连串错误信息，编译直接终止。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">仔细看报错日志，核心提示有两个：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">明确指出</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“Your gmp he<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a>er is missing”——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">也就是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">gmp</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">相关的头文件缺失（）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">后续跟着一系列执行失败的日志，比如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“Running /home/sc/rk3576_linux/device/<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>rockchip</u></a>/common/scripts/mk-kernel.sh - do_build fai<a href="https://www.hqchip.com/app/1721" target="_blank"><u>led</u></a>!”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，且</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">exit code</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（、），这说明是依赖缺失导致编译脚本执行失败。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">其实到这里，报错信息已经很</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">贴心</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">不仅告诉我们缺什么，还直接给了解决方案。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixiAEaVbAANg1PgCt1Y675.png" alt="wKgZPGkaixiAEaVbAANg1PgCt1Y675.png"/><h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、定位关键：跟着报错提示找解决方案</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“gmp header is missing”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">这句话下面，终端直接给出了安装命令：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“Please install it: sudo apt-get install libgmp-dev”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（、）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">这里要划个重点：</span></span></font></span><b><span><span><span style="background-color:rgb(255,255,255);">Linux</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">下编译报错时，先仔细看报错日志的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">建议操作</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，很多时候官方或编译器已经把解决方案直接写在日志里了，不用盲目去搜教程。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">我当时没多想，直接复制了这个命令开始执行，没想到后续还有个小插曲。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、解决步骤：执行安装</span></span></font><span><span style="background-color:rgb(255,255,255);">+</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">验证，遇到小问题再调整</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第一步：执行依赖安装命令</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在终端输入报错提示里的命令：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">sudo apt-get install libgmp-dev</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（）</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入</span></span></font><span><span style="background-color:rgb(255,255,255);">sudo</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">密码后，系统会自动开始处理：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">先读取软件包列表，分析依赖关系（、）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">然后提示会</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">同时安装</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">libgmpxx4ldbl”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，这是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">libgmp-dev</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的依赖包，属于正常情况（）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">最终确认</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">新安装</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个软件包。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“y”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">确认后，系统开始下载并自动安装，最后提示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">正在处理用于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">libc-bin</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的触发器</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，看起来安装成功了。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第二步：重新编译仍报错？试试环境重置</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">本以为安装完就能正常编译，结果重新执行编译命令后，报错依然存在。这时候我才意识到，可能是之前的编译缓存或环境变量没刷新，于是做了两个操作：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">卸载无效依赖并重新安装</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">先尝试卸载可能冲突的</span></span></font><span><span style="background-color:rgb(255,255,255);">libmpc-dev</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（虽然终端提示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“libmpc-dev</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">未安装，不会被卸载</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）（到），再重新执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">sudo apt-get install libmpc-dev</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，确保相关依赖完整（）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">补充安装环境变量相关工具</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixmALn34AAKEqIKcfeQ945.png" alt="wKgZPGkaixmALn34AAKEqIKcfeQ945.png"/><p>
		<span><font face="等线"><span>因为报这个错误，后来看了一下源码目录就有这个依赖，基本上是环境配置没配好</span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixmAUsi5AACtcNQ1C80549.png" alt="wKgZPGkaixmAUsi5AACtcNQ1C80549.png"/><p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">参考瑞芯微编译环境的常见配置，又执行了两个命令：</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixmAbUn3AABCWQs6t9Y084.png" alt="wKgZPGkaixmAbUn3AABCWQs6t9Y084.png"/><p>
		</p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">sudo apt-get install binfmt-support qemu-user-static</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（用于处理不同架构的二进制文件，）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">sudo dpkg -i ubuntu-build-service/packages/*</span></span></span><span><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">sudo apt-get install -f</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（修复</span></span></font><span><span style="background-color:rgb(255,255,255);">deb</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">包依赖，确保环境变量配置正确，、）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">做完这些后，我关闭了当前终端重新打开（刷新环境变量），再次执行编译命令</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">这次终于顺利跑通，没有再出现报错！</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、总结：初次编译</span></span></font><span><span style="background-color:rgb(255,255,255);">rk</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个避坑要点</span></span></font></span></b></h2>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">优先看报错日志的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">直接提示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">像这次的</span></span></font><span><span style="background-color:rgb(255,255,255);">gmp</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">头文件缺失，报错里直接给了安装命令，跟着做就能解决</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">80%</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的问题，不用一开始就去搜复杂的教程。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">依赖安装后记得</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">刷新环境</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">有时候依赖安装成功了，但编译脚本读不到新安装的文件，关闭终端重新打开、或执行</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">source /etc/profile</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">刷新环境变量，往往能解决</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">安装了还报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">如果大家在编译</span></span></font><span><span style="background-color:rgb(255,255,255);">rk3568/3576</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">等芯片的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Linux</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核时，遇到类似的依赖报错，不妨按照这个流程试试。如果还有其他踩坑经历，欢迎在评论区交流，一起帮更多<a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>避坑～</span></span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>
<br/>]]></description></item><item>    <title><![CDATA[RK Android平台音频调试指南：从基础到实战，解决多设备输出、声卡异常等核心问题]]></title>    <link>https://www.elecfans.com/d/7401328.html</link>    <guid>https://www.elecfans.com/d/7401328.html</guid>    <pubDate>2026-02-06 16:48:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_360" target="_blank"><u>Android</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发中，<a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a>模块的调试往往是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">老大难</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">多声卡无法区分、多设备同时输出没声音、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1685" target="_blank"><u>HDMI</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">录音崩溃</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">…</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">这些问题不仅影响用户体验，还会消耗大量开发时间。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>瑞芯微</u></a>（</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>Rockchip</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）针对</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台推出的</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">MultiAudio</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，专门解决</span></span></font><span><span style="background-color:rgb(255,255,255);">Android</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原生音频框架的局限，同时提供了一套清晰的调试方法论。今天这篇文章，就从实战角度出发，带大家搞定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK Android</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台的音频调试，覆盖基础操作、常见</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Bug</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决、多设备控制等核心场景。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixiAEw8YAADpfPmKUJI793.png" alt="wKgZPGkaixiAEw8YAADpfPmKUJI793.png"/><p>
		</p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、先搞懂：</span></span></font><span><span style="background-color:rgb(255,255,255);">Android</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原生音频的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">痛点</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MultiAudio</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决方案</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在聊调试前，我们得先明白</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">为什么需要调试</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”——Android</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">原生音频框架存在不少局限，这也是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK MultiAudio</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">方案的出发点：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">多声卡</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">认不出、用不了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：即使设备支持多个声卡（比如双</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SPDIF</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），原生系统会按</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">AudioPolicy</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">优先级选最高的，无法让不同声卡同时输出不同声音；多个同类型声卡（如双</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）更是无法区分。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">多设备录音需适配</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">Android 12</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">虽支持多设备同时录音，但原生代码默认不支持，需要厂商针对性开发。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">多</span></span></font><span><span style="background-color:rgb(255,255,255);">APP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频冲突</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：系统音频焦点机制会导致多屏同时播放视频时出现暂停，影响多场景使用（如会议投屏</span></span></font><span><span style="background-color:rgb(255,255,255);">+</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">本地播放）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">而</span></span></font><span><span style="background-color:rgb(255,255,255);">RK MultiAudio</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">方案正好补上这些短板，核心能力包括：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">多</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI/DP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">插拔识别</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">声音分离（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI_0/HDMI_1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DP_0/DP_1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">独立输出）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">第三方</span></span></font><span><span style="background-color:rgb(255,255,255);">APP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">按包名指定声卡（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MX Player</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">走扬声器、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RockVideoPlayer</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">走</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.elecfans.com/v/tag/852/" target="_blank"><u>JAVA</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">层通过<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>直接控制声卡；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">多</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI IN</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">同时录音（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMIIN_0/HDMIIN_1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">独立录音）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">多设备音量同步调节与保存。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、基础调试：先搞定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡识别</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动验证</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试的第一步，是确认</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件通路是否正常</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">也就是声卡是否被正确识别、驱动是否能工作。这两步操作简单，但却是排查问题的基础。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看声卡：确认设备是否被系统识别</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a>b</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行命令，查看当前系统已注册的声卡：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__built_in">cat</span>/proc/asound/cards</span></code></pre>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">以</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3588</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为例，正常输出会类似这样（能看到扬声器、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI IN</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI 0/1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等声卡）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__number">0</span><span class="code-snippet__selector-attr">[rockchipes8388 ]</span>: rockchip-es8388 - rockchip-es8388</span></code><code><span>          rockchip-es8388</span></code><code><span><span class="code-snippet__number">1</span>[rockchiphdmiin ]: rockchip_hdmiin - rockchip,hdmiin</span></code><code><span>          rockchip,hdmiin</span></code><code><span><span class="code-snippet__number">2</span>[rockchiphdmi0 ]: rockchip-hdmi0 - rockchip-hdmi0</span></code><code><span>          rockchip-hdmi0</span></code><code><span><span class="code-snippet__number">3</span>[rockchiphdmi1 ]: rockchip-hdmi1 - rockchip-hdmi1</span></code><code><span>          rockchip-hdmi1</span></code></pre>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">如果某块声卡没出现（比如</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI 0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">缺失），先排查硬件连接（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">线是否插好），再检查</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DTS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置是否正确。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试驱动：验证声卡能否正常出声</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">确认声卡识别后，用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_715" target="_blank"><u>ti</u></a>nyplay</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具测试驱动是否正常（需系统集成</span></span></font><span><span style="background-color:rgb(255,255,255);">tinyalsa</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具集）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">以测试</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI 0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡（对应上述输出中的<a href="https://www.hqchip.com/ic/0" target="_blank"><u>索引</u></a></span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“2”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）为例：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">准备一个</span></span></font><span><span style="background-color:rgb(255,255,255);">WAV</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">格式的音频文件（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>st.wav</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），推到设备的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/data</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行命令播放：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">tinyplay</span>/data/test.wav -D<span class="code-snippet__number">2</span>-d<span class="code-snippet__number">0</span></span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">-D</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：指定声卡索引（这里</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“2”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">对应</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">rockchiphdmi0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">-d</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：指定设备编号（通常为</span></span></font><span><span style="background-color:rgb(255,255,255);">0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">如果能正常听到声音，说明</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI 0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡驱动没问题；若没声音，优先排查驱动配置（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DTS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">中声卡节点是否启用）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、实战：</span></span></font><span><span style="background-color:rgb(255,255,255);">5</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">大常见音频</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Bug</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">及解决方案</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试中最头疼的是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">明明配置了，却出问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">我们整理了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台最常遇到的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">5</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">类音频</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Bug</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，附详细解决步骤。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：更新代码后，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">突然没声音（之前正常）</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：代码同步到最新后，</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">无音频输出，查看声卡却能识别到。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：新框架支持多</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">识别，若系统只有</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">路</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，上层会默认调用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“hdmi0”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡，但</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DTS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">中声卡名可能配置成了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“hdmi1”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，导致匹配失败。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：修改</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">文件，将声卡名改为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“rockchip-hdmi0”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 找到 DTS 中 HDMI 声卡节点</span></span></code><code><span><span class="code-snippet__section">rockchiphdmi1: rockchip-hdmi1 {</span></span></code><code><span>-  rockchip,card-name =<span class="code-snippet__string">"rockchip-hdmi1"</span></span></code><code><span>+  rockchip,card-name =<span class="code-snippet__string">"rockchip-hdmi0"</span></span></code><code><span>};</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UBoot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">开</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Logo</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">后，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">没声音（插拔线后恢复）</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：开启</span></span></font><span><span style="background-color:rgb(255,255,255);">UBoot Logo</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">显示后，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">开机无声音，手动插拔一次</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">线才正常。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">extcon</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（外部连接状态<a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a>）状态更新不及时，系统误以为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">未连接。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：修改</span></span></font><span><span style="background-color:rgb(255,255,255);">DRM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动代码，强制同步</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">extcon</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">状态：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">drivers/<a href="https://www.elecfans.com/tags/gpu/" target="_blank"><u>gpu</u></a>/drm/bridge/synopsys/dw-hdmi-qp.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中添加状态同步逻辑：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__built_in">mutex_lock</span>(&amp;hdmi-&gt;mutex);</span></code><code><span><span class="code-snippet__keyword">if</span>(result != hdmi-&gt;last_connector_result) {</span></code><code><span> <span class="code-snippet__built_in">dev_dbg</span>(hdmi-&gt;dev,<span class="code-snippet__string">"read_hpd result: %d"</span>, result);</span></code><code><span> <span class="code-snippet__comment">// 同步 extcon 状态</span></span></code><code><span> <span class="code-snippet__built_in">extcon_set_state_sync</span>(hdmi-&gt;extcon, EXTCON_DISP_HDMI, result == connector_status_connected);</span></code><code><span> <span class="code-snippet__built_in">handle_plugged_change</span>(hdmi, result == connector_status_connected);</span></code><code><span>  hdmi-&gt;last_connector_result = result;</span></code><code><span>}</span></code><code><span><span class="code-snippet__built_in">mutex_unlock</span>(&amp;hdmi-&gt;mutex);</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SPDIF</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与其他声卡同时出声，声音断断续续</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">SPDIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（光纤</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">同轴）与扬声器</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/ HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">同时播放时，音频卡顿、断连。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/dma/" target="_blank"><u>DMA</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频流位置计算错误；</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）声卡</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MCLK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置不合理。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：两步操作：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">集成</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个关键</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Kernel</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">补丁（修复</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DMA</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PM</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:57.6pt;">
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">修复</span></span></font><span><span style="background-color:rgb(255,255,255);">DMA</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">流位置计算：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">ALSA: pcm_dmaengine: always get stream position from DMA driver</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:57.6pt;">
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">修复</span></span></font><span><span style="background-color:rgb(255,255,255);">DMA runtime PM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">失衡：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dmaengine: pl330: Fix unbalanced runtime PM</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:57.6pt;">
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">提升</span></span></font><span><span style="background-color:rgb(255,255,255);">DMA</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">循环传输效率：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dmaengine: pl330: Improve dma cyclic transfe<a href="https://www.elecfans.com/tags/rs/" target="_blank"><u>rs</u></a> efficiency</span></span></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">修改</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SPDIF</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡节点，添加</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MCLK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attr">spdif_tx0_sound</span>: spdif-tx0-sound {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span>  compatible =<span class="code-snippet__string">"<a href="https://m.hqchip.com/app/1522" target="_blank"><u>sim</u></a>ple-audio-card"</span>;</span></code><code><span>+  simple-audio-card,mclk-fs = &lt;<span class="code-snippet__number">128</span>&gt;;<span class="code-snippet__comment">// 添加这行</span></span></code><code><span>  simple-audio-card,name =<span class="code-snippet__string">"rockchip,spdif-tx0"</span>;</span></code><code><span> <span class="code-snippet__comment">// 其他配置...</span></span></code><code><span>};</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">4.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI IN</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">录音时，偶尔出现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Audio</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">服务崩溃</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：用</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI IN</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">录制外部音频（如机顶盒<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>）时，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Audio</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">服务突然崩溃，日志提示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“TimeCheck</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">超时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI IN</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">录音的等待时间过短，导致超时触发服务重启。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：修改</span></span></font><span><span style="background-color:rgb(255,255,255);">I2S-TDM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动，延长录音等待时间：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sound/soc/rockchip/rockchip_i2s_tdm.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中添加超时配置：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__function"><span class="code-snippet__keyword">static</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">rockchip_i2s_tdm_trigger</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">snd_pcm_<a href="https://m.hqchip.com/app/1525" target="_blank"><u>sub</u></a>stream *substream,</span></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__built_in">int</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">cmd</span></span><span class="code-snippet__function">)</span>{</span></code><code><span> <span class="code-snippet__comment">// 其他逻辑...</span></span></code><code><span> <span class="code-snippet__keyword">break</span>;</span></code><code><span>+ <span class="code-snippet__comment">// 针对录音流，延长等待时间到 500ms</span></span></code><code><span>+ <span class="code-snippet__keyword">if</span>(substream-&gt;stream == SNDRV_PCM_STREAM_CAPTURE) {</span></code><code><span>+    substream-&gt;w<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>ai</u></a>t_time = msecs_to_jiffies(<span class="code-snippet__number">500</span>);</span></code><code><span>+  }</span></code><code><span> <span class="code-snippet__keyword">return</span>ret;</span></code><code><span>}</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">5.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">5</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：更新代码后，声卡完全没声音（优先级冲突）</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">现象</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：同步代码后，所有声卡都没声音，查看</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">proc/asound/cards</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">能识别到声卡。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">默认代码基于多声卡设备（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3588 EVB1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">路声卡），优先级为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI0 &gt; HDMI1 &gt; DP0 &gt; DP1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；若实际设备只有</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">路</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，系统仍优先调用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（但无对应声卡），导致所有声音无输出。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：修改</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">Wire<a href="https://www.elecfans.com/tags/dac/" target="_blank"><u>dAc</u></a>cessoryManager.java</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，屏蔽</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的优先级判断：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span># 文件路径：frameworks<span class="code-snippet__regexp">/base/</span>services<span class="code-snippet__regexp">/core/</span>java<span class="code-snippet__regexp">/com/</span>android<span class="code-snippet__regexp">/server/</span><span class="code-snippet__type">WiredAccessoryManager</span>.java</span></code><code><span><span class="code-snippet__keyword">else</span><span class="code-snippet__keyword">if</span>(headset<span class="code-snippet__operator">==</span><span class="code-snippet__type">BIT_HDMI_AUDIO</span>) {</span></code><code><span><span class="code-snippet__operator">-</span> <span class="code-snippet__type">Slog</span>.d(<span class="code-snippet__type">TAG</span>,<span class="code-snippet__string">"hdmi_0 plug"</span>);</span></code><code><span><span class="code-snippet__operator">-</span> outDevice<span class="code-snippet__operator">=</span><span class="code-snippet__type">AudioManager</span>.<span class="code-snippet__type">DEVICE_OUT_HDMI</span>;</span></code><code><span><span class="code-snippet__operator">+</span> <span class="code-snippet__comment">// 屏蔽 HDMI0 识别，避免优先级冲突</span></span></code><code><span><span class="code-snippet__operator">+</span> <span class="code-snippet__comment">// Slog.d(TAG, "hdmi_0 plug");</span></span></code><code><span><span class="code-snippet__operator">+</span> <span class="code-snippet__comment">// outDevice = AudioManager.DEVICE_OUT_HDMI;</span></span></code><code><span>}<span class="code-snippet__keyword">else</span><span class="code-snippet__keyword">if</span>(headset<span class="code-snippet__operator">==</span><span class="code-snippet__type">BIT_HDMI_AUDIO_1</span>) {</span></code><code><span> <span class="code-snippet__type">Slog</span>.d(<span class="code-snippet__type">TAG</span>,<span class="code-snippet__string">"hdmi_1 plug"</span>);</span></code><code><span>  outDevice<span class="code-snippet__operator">=</span><span class="code-snippet__type">AudioManager</span>.<span class="code-snippet__type">DEVICE_OUT_HDMI_1</span>;</span></code></pre>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、实用技巧：多设备输出与</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI IN</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">录音的调用方法</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">除了调试，掌握</span></span></font><span><span style="background-color:rgb(255,255,255);">MultiAudio</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的核心调用方式，能让开发更高效。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">多设备输出：指定声卡的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">种方式</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">JAVA</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">层通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">AudioSessionId</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">控制</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">MediaPlayer</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化时，通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">setAudioSessionId</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">指定声卡，</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">必须在</span></span></font><span><span style="background-color:rgb(255,255,255);">setDataSource</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">前调用</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__type">MediaPlayer</span><span class="code-snippet__variable">mp</span><span class="code-snippet__operator">=</span><span class="code-snippet__keyword">new</span><span class="code-snippet__title">MediaPlayer</span>();</span></code><code><span><span class="code-snippet__comment">// 指定声卡：PRIMARY(57)=扬声器，HDMI0(65)，DP0(73)，HDMI1(81)，DP1(89)</span></span></code><code><span>mp.setAudioSessionId(<span class="code-snippet__number">65</span>);<span class="code-snippet__comment">// 声音从 HDMI0 输出</span></span></code><code><span>mp.setDataSource(<span class="code-snippet__string">"/data/test.mp4"</span>);</span></code><code><span>mp.prepare();</span></code><code><span>mp.start();</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）按</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">APP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">包名绑定声卡</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">适合需要固定</span></span></font><span><span style="background-color:rgb(255,255,255);">APP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出设备的场景（如会议软件固定走</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），修改</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">AudioTr<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>k.cpp</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__meta">#</span><span class="code-snippet__meta"><span class="code-snippet__keyword">if</span></span><span class="code-snippet__meta">MultiAudioTest</span></span></code><code><span>String8 appPackage =<span class="code-snippet__built_in">String8</span>(mPackageName);</span></code><code><span><span class="code-snippet__comment">// RockVideoPlayer 走 HDMI0，gallery3d 走 HDMI1，MX Player 走扬声器</span></span></code><code><span><span class="code-snippet__keyword">if</span>(<span class="code-snippet__built_in">strstr</span>(appPackage.<span class="code-snippet__built_in">string</span>(),<span class="code-snippet__string">"RockVideoPlayer"</span>)) {</span></code><code><span>  sessionid = (<span class="code-snippet__type">audio_session_t</span>)<span class="code-snippet__number">65</span>;</span></code><code><span>}<span class="code-snippet__keyword">else</span><span class="code-snippet__keyword">if</span>(<span class="code-snippet__built_in">strstr</span>(appPackage.<span class="code-snippet__built_in">string</span>(),<span class="code-snippet__string">"gallery3d"</span>)) {</span></code><code><span>  sessionid = (<span class="code-snippet__type">audio_session_t</span>)<span class="code-snippet__number">81</span>;</span></code><code><span>}<span class="code-snippet__keyword">else</span><span class="code-snippet__keyword">if</span>(<span class="code-snippet__built_in">strstr</span>(appPackage.<span class="code-snippet__built_in">string</span>(),<span class="code-snippet__string">"mxtech"</span>)) {<span class="code-snippet__comment">// MX Player 包名含 mxtech</span></span></code><code><span>  sessionid = (<span class="code-snippet__type">audio_session_t</span>)<span class="code-snippet__number">57</span>;</span></code><code><span>}</span></code><code><span><span class="code-snippet__meta">#</span><span class="code-snippet__meta"><span class="code-snippet__keyword">endif</span></span></span></code></pre>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">同时需要：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__operator">•</span>打开<span class="code-snippet__type">MultiAudioTest</span>宏（在frameworks<span class="code-snippet__regexp">/av/</span>media<span class="code-snippet__regexp">/libaudioclient/</span>include<span class="code-snippet__regexp">/media/</span><span class="code-snippet__type">AudioTrack</span>.h中设为<span class="code-snippet__number">1</span>）；</span></code><code><span><span class="code-snippet__operator">•</span>解决音频焦点冲突：在<span class="code-snippet__type">MediaFocusControl</span>.java 中添加focusChangeHint<span class="code-snippet__operator">=</span><span class="code-snippet__number">3</span>，避免多<span class="code-snippet__type">APP</span>同时播放时暂停<span class="code-snippet__operator">。</span></span></code></pre>
	<p style="margin-left:14.4pt;">
		</p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2. HDMI IN</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">录音：调用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HDMIIN</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频源</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">AudioRecord</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化时指定</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">MediaRecorder.AudioSource.HDMIIN</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，即可录制</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">外部输入的声音：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// 参数：音频源（HDMIIN）、采样率、声道配置、格式、缓冲区大小</span></span></code><code><span><span class="code-snippet__type">AudioRecord</span><span class="code-snippet__variable">audioRecord</span><span class="code-snippet__operator">=</span><span class="code-snippet__keyword">new</span><span class="code-snippet__title">AudioRecord</span>(</span></code><code><span>  MediaRecorder.AudioSource.HDMIIN,</span></code><code><span> <span class="code-snippet__number">44100</span>,<span class="code-snippet__comment">// 采样率 44.1kHz</span></span></code><code><span>  AudioFormat.CHANNEL_IN_STEREO,<span class="code-snippet__comment">// 立体声</span></span></code><code><span>  AudioFormat.ENCODING_PCM_16BIT,<span class="code-snippet__comment">// 16bit PCM</span></span></code><code><span> <span class="code-snippet__number">4096</span><span class="code-snippet__comment">// 缓冲区大小</span></span></code><code><span>);</span></code><code><span><span class="code-snippet__comment">// 开始录音</span></span></code><code><span>audioRecord.startRecording();</span></code></pre>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">五、扩展：用</span></span></font><span><span style="background-color:rgb(255,255,255);">AudioPatch</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">优化</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TvInput</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频延时</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">如果开发</span></span></font><span><span style="background-color:rgb(255,255,255);">TvInput</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">相关功能（如电视信号输入），可以用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">AudioPatch</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">替代传统的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">AudioStream</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，进一步降低音频延时（但录屏无法捕获</span></span></font><span><span style="background-color:rgb(255,255,255);">TvInput</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">预览声音，需根据需求选择）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心修改：在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">TvInputHardwareManager.java</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中屏蔽</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">AudioStream</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调用，启用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">AudioPatch</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// 屏蔽原 AudioStream 逻辑</span></span></code><code><span><span class="code-snippet__comment">// mAudioStream.start(6);</span></span></code><code><span><span class="code-snippet__comment">// mAudioStream.stop();</span></span></code><code><span><span class="code-snippet__comment">// 启用 AudioPatch</span></span></code><code><span><span class="code-snippet__keyword">if</span>(mAudioPatch !=<span class="code-snippet__literal">null</span>) {</span></code><code><span>  mAudioManager.<span class="code-snippet__title">releaseAudioPatch</span>(mAudioPatch);</span></code><code><span>}</span></code><code><span><span class="code-snippet__comment">// 创建 AudioPatch 连接 HDMI IN 音频源</span></span></code><code><span>mAudioManager.<span class="code-snippet__title">createAudioPatch</span>(</span></code><code><span>  audioPatchArray,</span></code><code><span> <span class="code-snippet__keyword">new</span><span class="code-snippet__title">AudioPortConfig</span>[] { sourceConfig },</span></code><code><span> <span class="code-snippet__keyword">new</span><span class="code-snippet__title">AudioPortConfig</span>[] { sinkConfig }</span></code><code><span>);</span></code></pre>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">六、总结与支持</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK Android</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台的音频调试，核心是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">先确认基础通路（声卡</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动），再定位上层逻辑（优先级、状态同步）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MultiAudio</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">方案不仅解决了原生框架的局限，其配套的调试方法也能覆盖大部分场景。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">希望这篇指南能帮你少踩坑，高效搞定音频调试！如果觉得有用，欢迎点赞、转发，也欢迎在评论区分享你的调试经验～</span></span></font></span></p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[零碳园区建设全攻略：政策导向+建设路径+技术支撑+实践案例]]></title>    <link>https://www.elecfans.com/d/7641969.html</link>    <guid>https://www.elecfans.com/d/7641969.html</guid>    <pubDate>2026-02-06 16:48:00</pubDate>    <description><![CDATA[<div class="vditor-preview__action"/><div class="vditor-reset"><h1>零碳园区建设全攻略：政策导向+建设路径+技术支撑+实践案例</h1><p>安科瑞销售<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>-蔡禹 咨询：18702109681</p><p>全球气候变化背景下，“双碳”目标成为中国发展的重要战略指引，园区作为工业碳排放核心集聚地，其绿色转型直接决定整体减排成效，零碳园区建设已从政策导向转变为产业可持续发展的必然选择。本文从政策驱动、建设路径、技术支撑、实践案例四大维度，全面解析零碳园区建设的核心逻辑与落地方案，为园区绿色转型提供可落地、可复制的参考思路。<br/><img src="https://file1.elecfans.com/web3/M00/4B/12/wKgZPGmFpC6AdaqQAABQ-13POhs416.jpg" alt="0205-1.jpg"/></p><h2>政策驱动：零碳园区已成国家战略重点</h2><p>中国明确提出“二氧化碳排放力争2030年前达峰、2060年前实现碳中和”目标，工业领域碳排放占全国总量约65%，而园区作为工业企业集中承载区，是落实“双碳”战略的关键载体，其绿色转型成效直接影响整体减排目标推进节奏。</p><p>近年来，国家发改委、工信部、能源局等多部门协同发力，出台《关于开展零碳园区建设的通知》等政策文件，明确支持有条件地区打造零碳园区试点，加快构建规范化建设与标准化评估体系。各省市结合本地产业基础与能源禀赋，制定地方性建设规范，推动园区在能源结构优化、能效水平提升、碳排精准核算等方面实现系统性突破。</p><p>零碳园区建设，不仅是我国应对生态环境危机的主动作为，更成为推动经济结构转型升级、培育绿色发展新动能的重要引擎，是政策层面明确支持、产业层面亟需落地的核心发展方向。<br/><img src="https://file1.elecfans.com/web3/M00/4B/13/wKgZO2mFpFCAFTZiAAM1K4uVukQ256.jpg" alt="0205-2.jpg"/></p><h2>建设路径：从能源优化到智慧管理，锚定指标精准发力</h2><p>《国家级零碳园区建设指标体系》划定核心与引导两类指标，覆盖单位能耗碳排放、清洁能源消费占比、工业固体废弃物综合利用率等关键维度。实现零碳园区建设目标，需统筹推进能源、节能、数字化、市场化四大板块协同发力，构建全方位零碳发展体系，锚定指标精准施策：<br/><img src="https://file1.elecfans.com/web3/M00/4B/13/wKgZPGmFqpmAS8MMAAJQg-ABrjU257.jpg" alt="0205-3.jpg"/></p><h3>能源结构优化：清洁能源替代，构建清洁供能网络</h3><p>以清洁能源替代为核心，大力发展光伏、风电、储能等多能互补系统，搭建高效园区微电网。结合园区实际布局分布式光伏、分散式风电，推动绿电就近开发、就地消纳，搭配储能系统平抑能源波动，逐步摆脱对化石能源的依赖，从源头遏制碳排放增长，打造稳定、清洁、高效的园区能源供给网络。</p><h3>节能降碳改造：聚焦高耗环节，推动产业提质降耗</h3><p>聚焦园区高耗能环节，推进高耗能设备更新换代与能效升级，落地绿色照明、余热回收利用等重点工程，全面提升能源利用效率。引导园区企业开展节能降碳诊断与专项改造，淘汰落后产能与工艺，鼓励打造极致能效工厂、零碳工厂，推动产业向低能耗、高附加值方向转型，实现节能与提质双向赋能。<br/><img src="https://file1.elecfans.com/web3/M00/4B/14/wKgZO2mFqqmAAm6uAAHNpGpWvoc218.jpg" alt="0205-4.jpg"/></p><h3>数字化能碳管理：打破信息孤岛，实现精细化管控</h3><p>搭建覆盖全园区的能碳管理平台，打通各能源系统数据壁垒，实现能源消耗与碳排放的实时监测、精准核算、智能优化。通过一体化管理电、水、气、热等各类能源数据，精准定位耗能痛点，为园区节能降碳决策提供科学数据支撑，全面提升管理精细化、智能化水平。</p><h3>市场机制创新：激活市场动力，实现生态经济双赢</h3><p>依托市场化手段激活零碳发展动力，鼓励园区以虚拟电厂模式参与电力市场交易与绿电交易。聚合园区内分布式能源资源，积极参与需求响应、辅助服务等电力市场业务，在降低园区用电成本的同时，拓展市场化收益渠道，实现生态效益与经济效益双赢。<br/><img src="https://file1.elecfans.com/web3/M00/4B/13/wKgZPGmFqryATns3AARnZHtql7g010.jpg" alt="0205-5.jpg"/></p><h2>技术支撑：安科瑞能碳管理平台的一体化解决方案</h2><p>零碳园区的系统化建设，离不开专业技术平台的硬核支撑。安科瑞推出的能碳管理平台，以“数字化、系统化、智能化、市场化”为核心理念，覆盖零碳园区建设全流程，从数据采集到运营优化提供一站式服务，精准适配国家级零碳园区建设指标要求，为零碳园区建设筑牢技术根基，核心功能涵盖四大方面：</p><h3>一体化能碳监测：数据精准采集，实现全流程管控</h3><p>通过智能电表、边缘网关等终端设备，实时采集电、水、气、热等各类能源数据，实现分类分项统计、用能趋势分析与异常能耗预警。精准掌控园区能源消耗与碳排放动态，确保园区碳排管理可量化、可追溯、可管控，为碳核算、节能优化提供精准数据支撑。</p><h3>智慧微电网管理：源网荷储充协同，提升绿电消纳能力</h3><p>集成光伏、储能、<a href="https://www.elecfans.com/tags/充电桩/" target="_blank"><u>充电桩</u></a>等分布式能源资源，实现源网荷储充协同优化调度，统筹调配园区各类能源资源，保障能源供应稳定可靠。大幅提升绿电消纳能力，有效降低园区用电成本，为清洁能源替代目标落地提供坚实支撑。</p><h3>节能降碳智能调控：<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>AI</u></a><a href="https://m.elecfans.com/v/tag/2562/" target="_blank"><u>算法</u></a>赋能，实现能效碳排双优化</h3><p>融合AI智能算法，对中央空调、照明系统等重点耗能设备实施动态优化调控，精准匹配园区用能需求与能源供给，最大化提升能源利用效率，实现能效提升与碳排放减量双向突破，推动园区节能降碳目标高效落地。</p><h3>虚拟电厂与市场接入：聚合分布式资源，拓展市场化收益</h3><p>聚合园区内分布式能源资源，打通园区与市场化交易机制的衔接通道，助力园区接入电力市场，参与需求响应、辅助服务等交易业务。充分挖掘分布式能源价值，为园区及入驻企业创造额外收益，实现节能降碳与收益提升的双重目标。</p><p>安科瑞能碳管理平台深度对标国家与行业相关标准，支持灵活扩展与多协议兼容，可根据园区实际需求分阶段部署实施，具备极强的政策适配性与运营可行性，为零碳园区建设提供全流程技术支撑。<br/><img src="https://file1.elecfans.com/web3/M00/4B/14/wKgZO2mFqtCAZsFbAAHCDSOlxFQ216.jpg" alt="0205-6.jpg"/></p><h2>实践案例：上海某研究院园区的绿色蜕变</h2><p>理论体系与技术方案的落地成效，需依托实践检验。上海某研究院园区通过部署安科瑞智慧能源管理系统，成功实现从传统园区向绿色智慧零碳园区的转型，为国内零碳园区建设提供了可复制、可推广的实践范本。</p><p>该园区系统全面覆盖13栋建筑、7个车棚及1个充电场站，集成光伏、储能、充电桩等各类能源设施，构建起光储充一体化的智慧能源网络，系统投入运行后，园区发展实现三大突破：</p><ol><li><strong>清洁能源高效利用</strong> ：光伏与储能系统协同联动，大幅提升绿色电力自发自用比例，借助储能“低充高放”模式优化电费结构，有效降低园区用电成本，推动清洁能源替代目标落地见效；</li><li><strong>系统协同与数据融合</strong> ：彻底打破以往各能源系统的信息壁垒，实现多系统数据共享、协同联动与智能决策，为园区科研工作开展与能效精细化管理提供精准、全面的数据支撑，全面提升园区整体运营管理效能；</li><li><strong>市场化收益拓展</strong> ：依托系统内置的虚拟电厂功能，园区成功具备参与虚拟电厂需求响应与电力交易的能力，在进一步降低用电成本的基础上，拓展了市场化收益渠道，真正实现经济效益与环境效益的双向共赢。</li></ol><h2>结语：零碳园区是必然，更是机遇</h2><p>零碳园区建设，既是响应国家“双碳”政策的必然要求，也是园区突破发展瓶颈、提升核心竞争力、实现可持续发展的战略抉择。通过构建以能碳管理平台为核心的智慧能源体系，园区可在保障能源安全、降低运营成本的同时，大幅削减碳排放，实现经济效益与环境效益的协同发展。</p><p>未来，随着零碳技术的不断成熟与政策体系的持续深化，零碳园区将逐步成为中国工业绿色转型的核心标杆，引领产业向绿色化、智能化、数字化深度升级。安科瑞将持续以技术创新为核心，打造更贴合园区需求的能碳管理解决方案，助力更多园区实现绿色转型，为推动全球气候治理、助力绿色低碳发展贡献力量。</p><p>审核编辑 黄宇</p></div>]]></description></item><item>    <title><![CDATA[Rockchip CIF驱动深度解析：从架构设计到电源计数补丁修复]]></title>    <link>https://www.elecfans.com/d/7401326.html</link>    <guid>https://www.elecfans.com/d/7401326.html</guid>    <pubDate>2026-02-06 16:49:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在<a href="https://www.elecfans.com/soft/data/21-22/" target="_blank"><u>嵌入式</u></a></span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_300" target="_blank"><u>Linux</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统中，</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>Rockchip</u></a> CIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Camera Interface</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）驱动</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">是摄像头硬件与上层应用的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">桥梁</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">它不仅要实现设备初始化、格式协商、数据捕获等核心功能，还需保障运行稳定性。本文将从「驱动整体架构」入手，<a href="https://m.elecfans.com/v/tag/899/" target="_blank"><u>拆解</u></a>核心文件功能与调用关系，再聚焦「</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Sensor</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>引用计数补丁」，详解如何通过补丁解决实际运行中的稳定性问题，为驱动开发与调试提供完整参考。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、</span></span></font><span><span style="background-color:rgb(255,255,255);">CIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动整体架构：核心文件与功能拆解</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Rockchip CIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动位于</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">drivers/media/platform/rockchip/cif/</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录下，包含</span></span></font><span><span style="background-color:rgb(255,255,255);">5</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个核心文件（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1525" target="_blank"><u>sub</u></a>dev-i<a href="https://m.hqchip.com/app/1522" target="_blank"><u>tf</u></a>.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.h</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">procfs.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">capture.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），各文件分工明确、协同工作，共同支撑摄像头的完整功能。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心文件功能总览</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">先通过一张脑图快速梳理各文件的核心定位：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixeAMbf7AAIzmx7vtbg578.png" alt="wKgZPGkaixeAMbf7AAIzmx7vtbg578.png"/><h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键文件深度解析</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.c</span></span></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：设备管理</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">总控</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">作为驱动的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">大脑</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">负责初始化设备基础环境、管理全局状态，并提供用户可配置的属性<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心工作</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备初始化</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_plat_init</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">中初始化原子变量（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">power_cnt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">streamoff_cnt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、互斥锁（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stream_lock</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、媒体管道（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>pi</u></a>pe</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），为设备运行打下基础。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">sysfs</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">属性配置</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：实现</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">compact_<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>st</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（紧凑数据流模式）、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">is_use_dummybuf</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（虚拟缓冲区开关）等属性的读写函数，用户可通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/sys/class/video4linux/videoX/</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">路径动态调整设备行为。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">c.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">全局状态维护</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_device_list</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">链表管理所有</span></span></font><span><span style="background-color:rgb(255,255,255);">CIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_dev_mutex</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">保证多设备操作的互斥性，避免并发冲突。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键代码示例</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（设备初始化）：</span></span></font></span></p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// drivers/media/platform/rockchip/cif/dev.c</span></span></code><code><span><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">rkcif_plat_init</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">rkcif_device *cif_dev,</span></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">device_node *node,</span></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__built_in">int</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">irq</span></span><span class="code-snippet__function">)</span>{</span></code><code><span> <span class="code-snippet__comment">// 初始化原子变量（电源、流关闭、<a href="https://www.elecfans.com/v/tag/117/" target="_blank"><u>传感器</u></a>状态）</span></span></code><code><span>  atomic_set(&amp;cif_dev-&gt;power_cnt,<span class="code-snippet__number">0</span>);</span></code><code><span>  atomic_set(&amp;cif_dev-&gt;streamoff_cnt,<span class="code-snippet__number">0</span>);</span></code><code><span>  atomic_set(&amp;cif_dev-&gt;sensor_off,<span class="code-snippet__number">1</span>);</span></code><code><span> <span class="code-snippet__comment">// 后续补丁新增：Sensor电源引用计数初始化</span></span></code><code><span>  atomic_set(&amp;cif_dev-&gt;<a href="https://www.hqchip.com/app/1522" target="_blank"><u>sd</u></a>_power_cnt,<span class="code-snippet__number">0</span>);</span></code><code><span> </span></code><code><span> <span class="code-snippet__comment">// 初始化媒体管道（open/close回调）</span></span></code><code><span>  cif_dev-&gt;pipe.open = rkcif_pipeline_open;</span></code><code><span>  cif_dev-&gt;pipe.close = rkcif_pipeline_close;</span></code><code><span> <span class="code-snippet__keyword">return</span><span class="code-snippet__number">0</span>;</span></code><code><span>}</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.c</span></span></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：传感器</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">交互桥梁</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">是</span></span></font><span><span style="background-color:rgb(255,255,255);">CIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动与摄像头</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Sensor</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的直接交互接口，实现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">V4L2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">子设备协议，负责格式协商、电源控制、事件触发。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心工作</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">格式协商</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/sdi/" target="_blank"><u>sdi</u></a>tf_get_set_fmt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><span><span style="background-color:rgb(255,255,255);">Sensor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">协商输入格式（分辨率、像素格式如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SBGGR8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），并配置</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CIF</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内部数据流参数。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">电源控制</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sditf_s_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数触发</span></span></font><span><span style="background-color:rgb(255,255,255);">Sensor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1708" target="_blank"><u>电源开关</u></a>，是后续补丁重点修复的调用路径之一。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">c.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">事件管理</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：订阅</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">触发</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">V4L2_EVENT_FRAME_SYNC</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（帧同步）、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">V4L2_EVENT_EXPOSURE</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（曝光）事件，确保数据捕获时序正确。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键代码示例</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（电源控制接口）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// drivers/media/platform/rockchip/cif/subdev-itf.c</span></span></code><code><span><span class="code-snippet__function"><span class="code-snippet__keyword">static</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">sditf_s_power</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">v4l2_subdev *sd,</span></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__built_in">int</span></span></span><span class="code-snippet__function"><span class="code-snippet__params"/></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">on</span></span></span><span class="code-snippet__function">)</span>{</span></code><code><span> <span class="code-snippet__keyword">struct</span>sditf_priv *priv = v4l2_subdev_to_sditf(sd);</span></code><code><span> <span class="code-snippet__keyword">struct</span>rkcif_device *cif_dev = priv-&gt;cif_dev;</span></code><code><span> <span class="code-snippet__built_in">int</span>ret =<span class="code-snippet__number">0</span>;</span></code><code><span>  mutex_lock(&amp;cif_dev-&gt;stream_lock);</span></code><code><span> <span class="code-snippet__keyword">if</span>(<span class="code-snippet__keyword">on</span>) {</span></code><code><span>    pm_run<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>ti</u></a>me_get_sync(cif_dev-&gt;dev);</span></code><code><span>   <span class="code-snippet__comment">// 后续补丁新增：调用统一<a href="https://www.hqchip.com/app/1731" target="_blank"><u>电源管理</u></a>函数</span></span></code><code><span>    ret |= rkcif_sensor_set_power(&amp;cif_dev-&gt;stream[<span class="code-snippet__number">0</span>],<span class="code-snippet__keyword">on</span>);</span></code><code><span>  }<span class="code-snippet__keyword">else</span>{</span></code><code><span>    pm_runtime_put_sync(cif_dev-&gt;dev);</span></code><code><span>    ret |= rkcif_sensor_set_power(&amp;cif_dev-&gt;stream[<span class="code-snippet__number">0</span>],<span class="code-snippet__keyword">on</span>);</span></code><code><span>  }</span></code><code><span>  mutex_unlock(&amp;cif_dev-&gt;stream_lock);</span></code><code><span> <span class="code-snippet__keyword">return</span>ret;</span></code><code><span>}</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">capture.c</span></span></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：数据捕获</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">执行核心</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">capture.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">负责摄像头数据的实际捕获，包括流启动</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">停止、缓冲区处理、电源控制函数实现，是本次补丁修改的核心文件。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心工作</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">流管理</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_do_start_stream</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动数据捕获，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_stream_init</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化流状态（如帧丢失计数</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">frame_loss</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">电源控制函数</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_sensor_set_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">是</span></span></font><span><span style="background-color:rgb(255,255,255);">Sensor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">电源开关的实际实现，补丁通过修改该函数引入引用计数逻辑。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">c.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">文件操作</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_fh_open</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_fh_release</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">处理用户空间的设备打开</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关闭请求，控制电源开关的调用时机。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">4</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">procfs.c</span></span></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：调试信息</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">出口</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">procfs.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/proc/driver/rkcif</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点向用户空间暴露驱动运行状态，便于调试定位问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心工作</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">a.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">格式转换</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_pixelcode_to_string</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">将媒体总线格式代码（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">MEDIA_BUS_FMT_SBGGR8_1X8</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）转换为可读字符串（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">"SBGGR8"</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">b.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">信息输出</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_show_clks</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>频率、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_show_format</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出当前捕获格式，帮助<a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>确认设备配置是否正确。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">5</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.h</span></span></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：数据结构</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">定义层</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">仅定义</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">struct capture_info</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">结构体，存储摄像头捕获区域的偏移（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">offset_x/y</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）和分辨率（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">width/height</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），是格式协商、缓冲区分配的基础数据载体。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、驱动模块协同：调用关系与架构流程图</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">各文件并非独立运行，而是通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">捕获</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的流程协同工作，以下是核心调用关系与架构图：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心调用流程（以</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备启动</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">为例）</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_plat_init</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化设备状态</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sditf_init_buf</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">分配缓冲区</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">capture.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_stream_init</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化流。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">用户交互</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：用户通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">open</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">调用触发</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">capture.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_fh_open</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">加锁后调用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_sensor_set_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">上电</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sditf_s_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font><span><span style="background-color:rgb(255,255,255);">Sensor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">交互。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据捕获</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_do_start_stream</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动流</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的事件机制同步帧数据</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据写入缓冲区。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">4.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试监控</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：用户读取</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/proc/driver/rkcif</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">procfs.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的函数从</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">获取设备状态并输出。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">架构流程图</span></span></font></span></b></h3>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixeASfEvAAC3Nhb1Owg613.jpg" alt="wKgZPGkaixeASfEvAAC3Nhb1Owg613.jpg"/><h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、补丁修复：</span></span></font><span><span style="background-color:rgb(255,255,255);">Sensor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">电源引用计数问题拆解</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在理解驱动架构后，我们聚焦本次关键补丁</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">修复</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Sensor</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">电源引用计数问题。该补丁针对</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Kernel 6.1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本，解决了驱动运行中</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">过早断电</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">重复上电</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等稳定性隐患。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">补丁背景：原驱动的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">大问题</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原</span></span></font><span><span style="background-color:rgb(255,255,255);">CIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动对</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Sensor</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">电源的管理缺乏</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">引用计数</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">机制，导致多场景下异常：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：无计数跟踪</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：多个模块（如预览</span></span></font><span><span style="background-color:rgb(255,255,255);">+</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">录像）同时使用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Sensor</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，无法记录</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">当前使用者数量</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，一个模块调用断电后，其他模块会因</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Sensor</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">断电崩溃。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：调用时机混乱</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_sensor_set_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">open/release</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">中调用时机错误（如解锁后调用），并发场景下计数错乱。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：路径覆盖不全</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sditf_s_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">未经过统一电源函数，绕过计数逻辑，导致部分场景电源失控。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">修复思路：引入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">原子引用计数</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">补丁核心是通过</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原子变量</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sd_power_cnt</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（定义在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，声明在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.h</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）跟踪电源使用状态，规则如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">上电（</span></span></font><span><span style="background-color:rgb(255,255,255);">on=1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：仅当</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sd_power_cnt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">从</span></span></font><span><span style="background-color:rgb(255,255,255);">0→1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，才执行</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Sensor</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">上电（避免重复上电）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">断电（</span></span></font><span><span style="background-color:rgb(255,255,255);">on=0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：仅当</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sd_power_cnt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">从</span></span></font><span><span style="background-color:rgb(255,255,255);">1→0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，才执行</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Sensor</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">断电（避免过早断电）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">全路径覆盖</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：所有电源操作（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">open/release</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sditf_s_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）均调用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_sensor_set_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，确保计数不遗漏。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">补丁对各文件的修改（附路径）</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">capture.c</span></span></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：核心逻辑修改（路径：</span></span></font></span></b></h4>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">drivers/media/platform/rockchip/cif/capture.c</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">修改</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_sensor_set_power</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数重构</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">从静态函数改为全局函数，新增计数逻辑：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// 原函数：直接操作电源，无计数</span></span></code><code><span><span class="code-snippet__function"><span class="code-snippet__keyword">static</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">rkcif_sensor_set_power</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params">...</span></span><span class="code-snippet__function">)</span>{ ... }</span></code><code><span><span class="code-snippet__comment">// 补丁后：新增计<a href="https://www.elecfans.com/v/tag/949/" target="_blank"><u>数控</u></a>制</span></span></code><code><span><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">rkcif_sensor_set_power</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">rkcif_stream *stream,</span></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__built_in">int</span></span></span><span class="code-snippet__function"><span class="code-snippet__params"/></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">on</span></span></span><span class="code-snippet__function">)</span>{</span></code><code><span> <span class="code-snippet__keyword">struct</span>rkcif_device *cif_dev = stream-&gt;cifdev;</span></code><code><span> </span></code><code><span> <span class="code-snippet__comment">// 断电：计数&gt;0时减1，未到0则不执行断电</span></span></code><code><span> <span class="code-snippet__keyword">if</span>(!<span class="code-snippet__keyword">on</span>&amp;&amp; atomic_dec_if_positive(&amp;cif_dev-&gt;sd_power_cnt))</span></code><code><span>   <span class="code-snippet__keyword">return</span><span class="code-snippet__number">0</span>;</span></code><code><span> <span class="code-snippet__comment">// 上电：计数+1后&gt;1，说明已有模块使用，不重复上电</span></span></code><code><span> <span class="code-snippet__keyword">if</span>(<span class="code-snippet__keyword">on</span>&amp;&amp; atomic_inc_return(&amp;cif_dev-&gt;sd_power_cnt) &gt;<span class="code-snippet__number">1</span>)</span></code><code><span>   <span class="code-snippet__keyword">return</span><span class="code-snippet__number">0</span>;</span></code><code><span> </span></code><code><span> <span class="code-snippet__comment">// 仅满足“首次上电”或“最后一次断电”，才操作Sensor电源</span></span></code><code><span> <span class="code-snippet__keyword">if</span>(cif_dev-&gt;terminal_sensor.sd)</span></code><code><span>    v4l2_subdev_call(..., core, s_power,<span class="code-snippet__keyword">on</span>);</span></code><code><span> <span class="code-snippet__keyword">return</span><span class="code-snippet__number">0</span>;</span></code><code><span>}</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">修改</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：调整</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">open/release</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">中函数调用时机</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">将</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_sensor_set_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">解锁后</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">移到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">锁内</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，确保并发安全：</span></span></font></span></p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// open函数：锁内调用，避免并发计数错乱</span></span></code><code><span><span class="code-snippet__function"><span class="code-snippet__keyword">static</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">rkcif_fh_open</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params">...</span></span><span class="code-snippet__function">)</span>{</span></code><code><span>  mutex_lock(&amp;cifdev-&gt;stream_lock);</span></code><code><span>  ret = rkcif_sensor_set_power(stream,<span class="code-snippet__keyword">on</span>);<span class="code-snippet__comment">// 补丁后：锁内调用</span></span></code><code><span>  mutex_unlock(&amp;cifdev-&gt;stream_lock);</span></code><code><span>}</span></code><code><span><span class="code-snippet__comment">// release函数：先断电计数，再释放资源</span></span></code><code><span><span class="code-snippet__function"><span class="code-snippet__keyword">static</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">rkcif_fh_release</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params">...</span></span><span class="code-snippet__function">)</span>{</span></code><code><span>  mutex_lock(&amp;cifdev-&gt;stream_lock);</span></code><code><span>  ret = rkcif_sensor_set_power(stream,<span class="code-snippet__keyword">on</span>);<span class="code-snippet__comment">// 补丁后：锁内调用</span></span></code><code><span>  v4l2_pipeline_pm_put(...);<span class="code-snippet__comment">// 后释放资源</span></span></code><code><span>  mutex_unlock(&amp;cifdev-&gt;stream_lock);</span></code><code><span>}</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.c</span></span></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：初始化计数变量（路径：</span></span></font></span></b></h4>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">drivers/media/platform/rockchip/cif/dev.c</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_plat_init</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">中新增</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sd_power_cnt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化，确保计数从</span></span></font><span><span style="background-color:rgb(255,255,255);">0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开始：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">atomic_set</span>(&amp;cif_dev-&gt;power_cnt,<span class="code-snippet__number">0</span>);</span></code><code><span><span class="code-snippet__attribute">atomic_set</span>(&amp;cif_dev-&gt;streamoff_cnt,<span class="code-snippet__number">0</span>);</span></code><code><span><span class="code-snippet__attribute">atomic_set</span>(&amp;cif_dev-&gt;sensor_off,<span class="code-snippet__number">1</span>);</span></code><code><span><span class="code-snippet__attribute">atomic_set</span>(&amp;cif_dev-&gt;sd_power_cnt,<span class="code-snippet__number">0</span>); // 补丁新增：初始化Sensor电源计数</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.h</span></span></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：声明变量与函数（路径：</span></span></font></span></b></h4>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">drivers/media/platform/rockchip/cif/dev.h</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">新增</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sd_power_cnt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">到</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">struct rkcif_device</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__keyword">struct</span><span class="code-snippet__title">rkcif_device</span>{</span></code><code><span> <span class="code-snippet__type">atomic_t</span>      power_cnt;</span></code><code><span> <span class="code-snippet__type">atomic_t</span>      streamoff_cnt;</span></code><code><span> <span class="code-snippet__type">atomic_t</span>      sensor_off;</span></code><code><span> <span class="code-snippet__type">atomic_t</span>      sd_power_cnt;<span class="code-snippet__comment">// 补丁新增：Sensor电源引用计数</span></span></code><code><span> <span class="code-snippet__comment">// ... 其他成员</span></span></code><code><span>};</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">声明</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_sensor_set_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数（因函数从</span></span></font><span><span style="background-color:rgb(255,255,255);">static</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">改为全局）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">rkcif_sensor_set_power</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">rkcif_stream *stream,</span></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__built_in">int</span></span></span><span class="code-snippet__function"><span class="code-snippet__params"/></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">on</span></span></span><span class="code-snippet__function">)</span>;<span class="code-snippet__comment">// 补丁新增</span></span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">4</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.c</span></span></span></b><b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：补全调用路径（路径：</span></span></font><span><span style="background-color:rgb(255,255,255);">drivers/media/platform/rockchip/cif/subdev-itf.c</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">sditf_s_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">中调用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">rkcif_sensor_set_power</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，确保该路径纳入计数管理：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__function"><span class="code-snippet__keyword">static</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">sditf_s_power</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params">...</span></span><span class="code-snippet__function">)</span>{</span></code><code><span> <span class="code-snippet__comment">// ... 原有逻辑</span></span></code><code><span> <span class="code-snippet__keyword">if</span>(<span class="code-snippet__keyword">on</span>) {</span></code><code><span>    pm_runtime_get_sync(cif_dev-&gt;dev);</span></code><code><span>    ret |= rkcif_sensor_set_power(&amp;cif_dev-&gt;stream[<span class="code-snippet__number">0</span>],<span class="code-snippet__keyword">on</span>);<span class="code-snippet__comment">// 补丁新增</span></span></code><code><span>  }<span class="code-snippet__keyword">else</span>{</span></code><code><span>    pm_runtime_put_sync(cif_dev-&gt;dev);</span></code><code><span>    ret |= rkcif_sensor_set_power(&amp;cif_dev-&gt;stream[<span class="code-snippet__number">0</span>],<span class="code-snippet__keyword">on</span>);<span class="code-snippet__comment">// 补丁新增</span></span></code><code><span>  }</span></code><code><span> <span class="code-snippet__comment">// ... 原有逻辑</span></span></code><code><span>}</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">4.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">修复价值：从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">隐患</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">稳定</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决功能异常</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：多模块共用</span></span></font><span><span style="background-color:rgb(255,255,255);">Sensor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，避免</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">一个模块退出导致整体崩溃</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如预览退出后录像仍正常）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">保护硬件寿命</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：避免重复上电导致</span></span></font><span><span style="background-color:rgb(255,255,255);">Sensor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1705" target="_blank"><u>电源模块</u></a>过热，延长硬件寿命。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">符合</span></span></font><span><span style="background-color:rgb(255,255,255);">V4L2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">规范</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：遵循</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">按需<a href="https://www.hqchip.com/app/1703" target="_blank"><u>开关电源</u></a></span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的框架要求，提升驱动兼容性。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、总结：驱动架构与补丁的启示</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Rockchip CIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">模块化设计</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">实现了功能解耦</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">dev.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">管全局、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">subdev-itf.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">管交互、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">capture.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">管执行、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">procfs.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">管调试，这种架构既便于维护，又能灵活扩展（如新增</span></span></font><span><span style="background-color:rgb(255,255,255);">HDR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">模式）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">而本次补丁则体现了</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核驱动开发的核心原则</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">资源管理需</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">计数</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：多模块共享的资源（如</span></span></font><span><span style="background-color:rgb(255,255,255);">Sensor</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">电源），必须通过引用计数跟踪使用状态。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">并发操作需</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">锁保护</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：关键逻辑（如计数修改）必须在互斥锁内执行，避免并发错乱。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">调用路径需</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">全覆盖</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：确保所有触发点都经过统一逻辑，不遗漏任何场景。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">对于<a href="https://www.elecfans.com/v/tag/232/" target="_blank"><u>嵌入式开发</u></a>者而言，理解驱动架构是定位问题的基础，而补丁的修复思路则为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">资源管理类问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">提供了通用参考</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">小到电源计数，大到内存管理，核心都是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">清晰跟踪状态、规范操作流程</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">若你的设备基于</span></span></font><span><span style="background-color:rgb(255,255,255);">Rockchip</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片且使用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Kernel 6.1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，建议及时合入该补丁，为摄像头稳定运行保驾护航～</span></span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[解析MAX17523：4.2V至36V、1A电流限制器的卓越防护方案]]></title>    <link>https://www.elecfans.com/d/7641976.html</link>    <guid>https://www.elecfans.com/d/7641976.html</guid>    <pubDate>2026-02-06 16:50:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7641976" value="https://file1.elecfans.com/web2/M00/82/14/poYBAGOT8UOAVpsaAA7WNDOa6Wg251.pdf"/><h1>
	解析MAX17523/MAX17523A：4.2V至36V、1A<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>限制器的卓越防护方案</h1>
<p>
	在电子设备的设计中，<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>保护至关重要，尤其是在面对过压、欠压和反向电压等复杂情况时。今天，我们来深入了解<a href="https://bbs.elecfans.com/group_65" target="_blank"><u>Analog</u></a> Devices推出的MAX17523/MAX17523A，这两款可调过压和过流保护器件，为系统提供了可靠的防护。</p>
<p>
	文件下载：<a href="javascript:;" data-annex="annex0_7641976" target="_blank">MAX17523.pdf</a></p>
<h2>
	产品概述</h2>
<p>
	MAX17523/MAX17523A属于Olympus系列IC，是业内最小且坚固的集成系统保护解决方案。它们能有效保护系统免受高达±40V的正、负输入电压故障影响，集成的FET具有低至190mΩ（典型值）的导通电阻 (R_{ON})。</p>
<h3>
	关键特性</h3>
<ol><li>
		<strong>宽输入电源范围</strong>：MAX17523的输入范围为+4.5V至+36V，MAX17523A为+4.2V至+36V，能适应多种电源环境。</li>
	<li>
		<strong>负输入耐受性</strong>：可承受-36V的负输入电压，增强了系统在复杂电源条件下的稳定性。</li>
	<li>
		<strong>低导通电阻</strong>：典型值为190mΩ的 (R_{ON})，能有效降低功耗，提高能源效率。</li>
	<li>
		<strong>反向电流控制</strong>：具备反向电流控制输入，可防止反向电流对系统造成损害。</li>
	<li>
		<strong>热过载保护</strong>：在温度过高时自动保护，确保器件在恶劣环境下的可靠性。</li>
	<li>
		<strong>宽温度范围</strong>：工作温度范围为-40°C至+125°C，适用于各种工业和恶劣环境。</li>
</ol><h3>
	灵活设计选项</h3>
<ol><li>
		<strong>可调OVLO和UVLO阈值</strong>：通过外部<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>可灵活设置过压锁定（OVLO）和欠压锁定（UVLO）阈值，满足不同应用的需求。</li>
	<li>
		<strong>可<a href="https://bbs.elecfans.com/group_75" target="_blank"><u>编程</u></a>正向电流限制</strong>：电流限制范围为0.15A至1A，可根据实际应用进行精确调整。</li>
	<li>
		<strong>可编程过流故障响应</strong>：支持自动重试、锁存关闭和连续三种模式，增强了系统的容错能力。</li>
	<li>
		<strong>双使能输入</strong>：EN和<a href="https://www.elecfans.com/v/tag/873/" target="_blank"><u>高压</u></a>HVEN输入，方便用户进行灵活的控制。</li>
</ol><h2>
	<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性</h2>
<h3>
	输入电压和电流</h3>
<p>
	MAX17523A的输入电压范围为4.2V至36V，MAX17523为4.5V至36V。在关机状态下，输入电流和输出电流都非常低，能有效降低功耗。</p>
<h3>
	过压和欠压保护</h3>
<p>
	内部过压跳闸电平典型值为33V，欠压跳闸电平典型值为19V。外部OVLO和UVLO可通过外部电阻进行调整，调整范围分别为6V至36V和4.2V（MAX17523A）/4.4V（MAX17523）至24V。</p>
<h3>
	电流限制</h3>
<p>
	电流限制调整范围为0.15A至1A，在不同电流范围内具有较高的精度。当电流达到阈值时，器件会根据设置的模式进行相应的响应。</p>
<h3>
	其他特性</h3>
<p>
	还具备CLHS电压、FLAG断言压降阈值、反向电流阻断阈值等特性，确保系统在各种情况下的稳定运行。</p>
<h2>
	工作模式</h2>
<h3>
	自动重试模式</h3>
<p>
	当电流达到阈值时，开始计时 (t<em>{BLANK})。如果过流情况持续超过 (t</em>{BLANK})，FLAG会断言。在 (t<em>{BLANK}) 结束后，开始重试时间 (t</em>{RETRY})，期间FET关闭。重试结束后，FET再次开启。若故障仍存在，循环继续；故障消除后，FET保持开启。这种模式能有效降低过流或短路情况下的系统功耗。</p>
<h3>
	锁存关闭模式</h3>
<p>
	当电流达到阈值且过流情况持续超过 (t_{BLANK})，开关关闭并保持关闭状态。要重置开关，可通过切换控制逻辑EN或HVEN，或循环输入电压。</p>
<h3>
	连续模式</h3>
<p>
	当电流达到阈值时，器件将输出电流限制在编程的电流限制值。过流情况持续超过 (t_{BLANK}) 时，FLAG断言；过载情况消除后，FLAG解除断言。</p>
<h2>
	应用指南</h2>
<h3>
	设置电流限制</h3>
<p>
	通过从SE<a href="https://www.elecfans.com/tags/ti/" target="_blank"><u>TI</u></a>到地连接一个电阻来编程电流限制值。计算公式为 (R<em>{SETI}(k Omega)=fr<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>{6100}{I</em>{LIM}(mA)})。</p>
<h3>
	输入旁路<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a></h3>
<p>
	在IN和GND之间连接至少0.47µF的电容，以限制瞬间输出短路时的输入电压降。电容值越大，输入电压的下冲越小。</p>
<h3>
	热插拔保护</h3>
<p>
	在热插拔应用中，建议使用瞬态电压抑制器（<a href="https://www.hqchip.com/app/1587" target="_blank"><u>TVS</u></a>）来保护系统，防止输入电压过冲损坏器件。</p>
<h3>
	输出电容</h3>
<p>
	为确保在全温度范围和可编程电流限制范围内的稳定运行，在OUT和地之间连接4.7µF的陶瓷电容。可通过公式 (C<em>{MAX }(mu F)=frac{I</em>{LIM}(mA) × t<em>{BLANK(TYP)}(ms)}{V</em>{IN}(V)}) 计算最大电容负载。</p>
<h3>
	输出续流<a href="https://www.hqchip.com/app/1554" target="_blank"><u>二极管</u></a></h3>
<p>
	在需要保护电感负载或长电缆免受突然短路影响的应用中，建议在OUT<a href="https://www.hqchip.com/app/1529" target="_blank"><u>端子</u></a>和地之间连接一个<a href="https://www.hqchip.com/app/1558" target="_blank"><u>肖特基</u></a>二极管，以防止短路时的负尖峰。</p>
<h3>
	布局和散热</h3>
<p>
	为优化开关对输出短路情况的响应时间，应尽量缩短所有走线，减少寄生电感的影响。将输入和输出电容尽可能靠近器件放置，IN和OUT用宽而短的走线连接到电源总线。同时，建议使用热过孔将散热垫连接到接地平面，以增加系统的热容量，降低热阻。</p>
<h2>
	总结</h2>
<p>
	MAX17523/MAX17523A凭借其卓越的性能和灵活的设计选项，为<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>提供了一个可靠的电源保护解决方案。无论是在<a href="https://m.elecfans.com/v/tag/117/" target="_blank"><u>传感器</u></a>系统、工厂传感器还是过程分析等应用中，都能发挥重要作用。在实际设计中，<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>们需要根据具体的应用需求，合理设置各项参数，优化布局和散热，以确保系统的稳定性和可靠性。你在实际应用中是否遇到过类似的电源保护问题？你是如何解决的呢？欢迎在评论区分享你的经验和见解。</p>]]></description></item><item>    <title><![CDATA[基于灵动MM32F0140微控制器的汽车传感控制]]></title>    <link>https://www.elecfans.com/d/7641978.html</link>    <guid>https://www.elecfans.com/d/7641978.html</guid>    <pubDate>2026-02-06 16:51:00</pubDate>    <description><![CDATA[<p>
	在现代<a href="https://bbs.elecfans.com/group_78" target="_blank"><u>汽车电子</u></a>系统中，各类<a href="https://www.elecfans.com/v/tag/117/" target="_blank"><u>传感器</u></a>模块需要通过高效可靠的车身总线与主控单元进行<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>，以实现整车状态的实时监控与智能控制。<a href="https://www.hqchip.com/app/1380" target="_blank"><u>微控制器</u></a>作为传感控制节点的“大脑”，其性能与可靠性直接影响系统的整体表现。英尚微基于灵动<a href="https://bbs.elecfans.com/group_864" target="_blank"><u>MM32</u></a>F0140微控制器的汽车传感控制方案凭借其高性能内核、丰富外设、车规级可靠性及宽温宽压支持，成为汽车传感控制应用的理想核心部件。</p>
<p>
	<br/>
	灵动MM32F0140系列微控制器专为汽车及<a href="https://www.elecfans.com/v/tag/204/" target="_blank"><u>工业控制</u></a>场景设计，提供MM32F0144C6P与MM32F0144C6PV两种型号可选，后者更支持高达105℃的工作温度，能够适应汽车引擎舱等高温严苛环境。该系列器件以高性能<a href="https://m.hqchip.com/app/1378" target="_blank"><u>Arm</u></a>®Cortex-M0为内核，主频最高达72MHz，配合64KB Flash与8KB S<a href="https://www.elecfans.com/tags/ram/" target="_blank"><u>RAM</u></a>，可为复杂的传感信号处理与通信协议运行提供充足的运算与存储资源。</p>
<p>
	<img src="https://file1.elecfans.com/web3/M00/4B/14/wKgZO2mFq0uACKZYAAG47pKpdeA016.png" alt="wKgZO2mFq0uACKZYAAG47pKpdeA016.png"/></p>
<p>
	<br/>
	在汽车传感信号采集方面，MM32F0140集成高采样率12位<a href="https://www.elecfans.com/tags/adc/" target="_blank"><u>ADC</u></a>及<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a><a href="https://m.hqchip.com/app/1737" target="_blank"><u>比较器</u></a>，能够对传感器输出的<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>、电压及温度信号进行实时、精准的采集与监控。其宽电压供电范围（2.0V-5.5V）适应多种车载<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>条件，增强系统供电适应性。同时，该系列微控制器内置丰富的<a href="https://www.elecfans.com/v/tag/13179/" target="_blank"><u>通信接口</u></a>，特别是支持高性能Flex<a href="https://www.hqchip.com/app/2004" target="_blank"><u>CAN</u></a>总线，可稳定实现与车身主机及其他ECU之间的可靠数据交互，满足汽车网络通信的实时性与抗干扰要求。</p>
<p>
	<br/>
	MM32F0140在可靠性方面表现出色：具备±6000V HBM <a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a>与±2000V CDM ESD防护能力，高温闩锁耐受电流可达±300mA，有效提升系统在<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>恶劣环境下的稳定运行能力。器件还配备多个<a href="https://www.elecfans.com/tags/定时器/" target="_blank"><u>定时器</u></a>（包括16位通用、32位通用及高级定时器）、3路<a href="https://www.elecfans.com/tags/uart/" target="_blank"><u>UART</u></a>、2路SPI及1路<a href="https://www.elecfans.com/tags/i2c/" target="_blank"><u>I2C</u></a><a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>，支持多传感器同步管理与数据整合。</p>
<p>
	<br/>
	深圳市英尚微电子有限公司，是一个可靠的电子元件与存储技术合作伙伴。我们连接原厂资源，专注于存储芯片、<a href="https://www.hqchip.com/gongsi.html" target="_blank"><u>半导体</u></a>产品、<a href="https://www.hqchip.com/app/1379" target="_blank"><u>单片机</u></a>、<a href="https://www.elecfans.com/tags/蓝牙/" target="_blank"><u>蓝牙</u></a>芯片及微动开关的供应与解决方案设计。如果您想了解更多，请搜索我司进行了解。<br/><br/>
	审核编辑 黄宇</p>]]></description></item><item>    <title><![CDATA[虚拟电厂：赋能“十五五”新型电力系统的数字革命]]></title>    <link>https://www.elecfans.com/d/7641979.html</link>    <guid>https://www.elecfans.com/d/7641979.html</guid>    <pubDate>2026-02-06 16:51:00</pubDate>    <description><![CDATA[<p>
	随着“十五五”规划的蓝图徐徐展开，构建清洁低碳、安全高效的新型能源体系成为关系中国长远发展的核心战略。在这个宏大转型中，一种名为“虚拟电厂”的创新模式正从技术概念加速迈向产业实践，成为撬动<a href="https://m.elecfans.com/v/tag/4675/" target="_blank"><u>电力系统</u></a>深刻变革的关键支点。它不建厂房、不烧燃料，却凭借数字化的聚合与调控能力，将散落在千家万户、工厂园区的碎片化电力资源，整合成一个能够与电网智能互动的“超级电厂”-3。这不仅是能源技术的革新，更是对传统电力生产与消费关系的重塑，为“十五五”期间推动经济社会全面绿色转型、实现“双碳”目标提供了极具想象力的解决方案。19821800313</p>
<p>
	虚拟电厂的崛起，有着深刻且紧迫的时代背景。当前，中国电力系统正面临双重结构性挑战：一方面，以风电、光伏为代表的<a href="https://m.elecfans.com/v/tag/293/" target="_blank"><u>新能源</u></a>已成为第一大电源，但其“靠天吃饭”的波动性与间歇性，给电网稳定运行带来巨大压力；另一方面，尖峰用电负荷屡创新高，但为满足每年仅有几十小时的峰值需求而大规模投资建设实体发电和输电设施，不仅代价高昂，更会导致设备利用率低下。</p>
<p>
	虚拟电厂正是破局的关键。其核心价值在于，以极低的成本，唤醒沉睡在需求侧的“弹性”。它通过先进的<a href="https://bbs.elecfans.com/group_57" target="_blank"><u>物联网</u></a>、<a href="https://www.elecfans.com/v/tag/150/" target="_blank"><u>人工智能</u></a>和<a href="https://www.elecfans.com/soft/data/43-44/" target="_blank"><u>通信技术</u></a>，将工商业可调节负荷（如空调、生产线）、楼宇储能、电动汽车<a href="https://www.elecfans.com/tags/充电桩/" target="_blank"><u>充电桩</u></a>、分布式光伏乃至家庭用电器等海量、分散的资源聚合起来。当电网需要时，它可以“一声令下”，让这些资源在短时间内统一减少用电或增加发电（如储能放电、电动汽车反送电），瞬间形成一个提供电力或削减负荷的“虚拟机组”。</p>
<p>
	“十五五”开局之年，虚拟电厂的发展告别了早期的零星试点，迎来了国家层面的系统性规划和强力驱动。2025年4月，国家发展改革委、国家能源局联合印发的《关于加快推进虚拟电厂发展的指导意见》，为“十五五”时期虚拟电厂的规模化发展定下了总基调、描绘了路线图。</p>
<p>
	这份纲领性文件明确了两个量化目标：到2027年，全国虚拟电厂调节能力要达到2000万千瓦以上；到2030年，这一数字将提升至5000万千瓦以上。这一规模，相当于数个大型核电基地的装机容量，标志着虚拟电厂将从“示范盆景”发展为“产业森林”。</p>
<p>
	更重要的是，《指导意见》从三个维度为产业发展扫清了障碍：</p>
<p>
	1. 电网侧：安全运行与清洁消纳的 “双重压力”</p>
<p>
	随着风电、光伏等新能源占比提升，电力系统呈现 “双高”（高比例可再生能源、高比例<a href="https://bbs.elecfans.com/group_934" target="_blank"><u>电力电子</u></a>设备）“双随机”（发电侧随机、用电侧随机）特征：</p>
<p>
	• 发电侧：光伏白天出力强、夜间为零，风电受风速影响波动大，导致电网供需 “错配”，极端情况下可能引发电压闪变、线路阻塞；</p>
<p>
	• 用电侧：充电桩、数据<a href="https://www.hqchip.com/tags" target="_blank"><u>中心</u></a>等负荷增长快，峰谷差拉大（比如夏季午后用电高峰、夜间低谷），电网调峰压力剧增。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZO2mFq52AIJfHAAD9gprDWlY92.jpeg" alt="wKgZO2mFq52AIJfHAAD9gprDWlY92.jpeg"/></p>
<p>
	2. 企业侧：用能成本高与管理难的 “双重困扰”</p>
<p>
	对于工商业企业而言，能源管理面临现实难题：</p>
<p>
	• 成本高：传统用能模式粗放，峰谷电价差下无法合理避峰，且新能源消纳率低（比如自建光伏无法全部自用，多余电力难并网）；</p>
<p>
	• 管理散：车间空调、空压机、照明等负荷 “各自运行”，缺乏统一监测，能效优化无从下手。</p>
<p>
	3. 分布式能源侧：“小而散” 导致的 “价值流失”</p>
<p>
	分布式光伏、家庭储能等小型能源资源，面临 “准入难、收益少” 的问题：</p>
<p>
	• 市场准入难：单个分布式光伏装机量小，不符合电力市场交易的 “门槛”，无法参与辅助服务、需求响应等获取额外收益；</p>
<p>
	• 管理效率低：分散在各地的分布式资源缺乏统一调度，其间歇性不仅难以发挥价值，反而给局部电网带来负担。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFq52ADl1gAADNq4UMidU84.jpeg" alt="wKgZPGmFq52ADl1gAADNq4UMidU84.jpeg"/></p>
<p>
	针对上述痛点，安科瑞构建了 “从资源聚合到智能调度，从市场交易到收益结算” 的全链条解决方案，核心是通过 “端、边、云” 协同，让分散资源形成 “合力”。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZO2mFq56AQRH4AAFXXyPJoy044.jpeg" alt="wKgZO2mFq56AQRH4AAFXXyPJoy044.jpeg"/></p>
<p>
	1. 底层支撑：“云管边端” 的技术架构</p>
<p>
	安科瑞的虚拟电厂并非单一平台，而是基于其成熟的 “云 - 管 - 边 - 端” 能源互联网生态搭建，确保数据能通、指令能达、调控精准：</p>
<p>
	• 端（终端感知）：覆盖各类能源设备的 “神经末梢”，包括多功能电表、电能质量分析仪、<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>防火保护器、<a href="https://www.elecfans.com/tags/温度传感器/" target="_blank"><u>温度传感器</u></a>等，实时采集光伏发电量、储能 SOC（剩余电量）、负荷功率等数据；</p>
<p>
	• 边（边缘计算）：通过 ANet 通讯管理机、物联网网关等设备，实现不同协议（Modbus、MQTT 等）的转换，将 “端” 采集的数据标准化后上传，同时接收云端下发的控制指令，就近调控设备；</p>
<p>
	• 管（数据传输）：依托光纤、无线公网（<a href="https://m.elecfans.com/v/tag/9979/" target="_blank"><u>4G</u></a>/<a href="https://m.elecfans.com/v/tag/1225/" target="_blank"><u>5G</u></a>）、<a href="https://www.elecfans.com/tags/lora/" target="_blank"><u>LoRa</u></a> 等网络，保障数据在 “端 - 边 - 云” 之间稳定传输，避免延迟或中断；</p>
<p>
	• 云（平台中枢）：以 EMS3.0 智慧能源管理平台为核心，承担数据汇总、智能分析、调度控制、交易对接的 “大脑” 功能，可接入华为云、阿里云等第三方平台，兼容多场景需求。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFq56ATh4TAADnU6dKZD848.jpeg" alt="wKgZPGmFq56ATh4TAADnU6dKZD848.jpeg"/></p>
<p>
	2. 核心动作：“源网荷储充” 的资源聚合</p>
<p>
	虚拟电厂的关键是 “聚合资源”，安科瑞将分散的 “源、网、荷、储、充” 资源整合为可调度的 “虚拟机组”，具体包括：</p>
<p>
	• “源”：分布式发电资源</p>
<p>
	整合分布式光伏、风电、微型燃气轮机等，通过光伏监控系统实现发电量监测、功率控制（比如电网负荷高时，优先消纳光伏电力），解决新能源 “消纳难” 问题。例如，某工业园区的屋顶光伏通过安科瑞方案聚合后，自用率提升 30%，多余电力可参与电网调峰。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZO2mFq5-AcrNZAAEVIX7aAhc38.jpeg" alt="wKgZO2mFq5-AcrNZAAEVIX7aAhc38.jpeg"/></p>
<p>
	• “储”：多场景储能资源</p>
<p>
	覆盖工商业储能、家庭储能、V2G 电动汽车，通过储能管理系统实现充放电策略优化 —— 峰时（电价高）放电赚钱，谷时（电价低）充电储能，同时作为电网的 “应急缓冲”。比如，某商业综合体的 107kWh 储能系统，通过峰谷套利年均收益超 5 万元。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFq5-AEp9IAADPLe0WG1083.jpeg" alt="wKgZPGmFq5-AEp9IAADPLe0WG1083.jpeg"/></p>
<p>
	• “荷”：可调负荷资源</p>
<p>
	针对空调、照明、充电桩、空压机等负荷，在不影响使用的前提下实现 “柔性调控”：</p>
<p>
	◦ 空调：通过 <a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>AI</u></a> 能效监控箱预测冷负荷，动态调整主机、水泵运行参数，夏季高峰可短暂下调 5%-10% 负荷，不影响舒适度；</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZO2mFq5-AYrFlAAJH4DiP1nU14.jpeg" alt="wKgZO2mFq5-AYrFlAAJH4DiP1nU14.jpeg"/></p>
<p>
	◦ 充电桩：采用有序充电策略，电网负荷高时降低充电功率，低谷时提速，既保障电网稳定，又不耽误车主充电；</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFq6CAafkpAAOymxFTC6g55.jpeg" alt="wKgZPGmFq6CAafkpAAOymxFTC6g55.jpeg"/></p>
<p>
	◦ 照明：通过智能开关<a href="https://m.hqchip.com/app/1847" target="_blank"><u>驱动器</u></a>实现分区域、定时控制，公共区域可根据人流调整亮度，节能率达 15%-30%。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZO2mFq6CAfhJnAAIOqlM0pV865.jpeg" alt="wKgZO2mFq6CAfhJnAAIOqlM0pV865.jpeg"/></p>
<p>
	• “充”：充电网络资源</p>
<p>
	聚合分散的直流 / 交流充电桩，通过充电桩运营管理平台实现 “统一调度”，比如电网峰时减少充电负荷，参与需求响应获取补贴（如深圳的 5 元 / 千瓦时响应补贴）。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFq6GAail_AAC9pdRWQCo54.jpeg" alt="wKgZPGmFq6GAail_AAC9pdRWQCo54.jpeg"/></p>
<p>
	3. 关键功能：覆盖 “监测 - 调度 - 交易 - 结算” 全流程</p>
<p>
	安科瑞 EMS3.0 平台通过五大核心功能，让虚拟电厂 “能运行、能赚钱、能管理”：</p>
<p>
	• 实时监测与预测：汇聚所有资源的运行数据，形成 “能源全景图”，同时基于气象数据、历史负荷，预测未来 4 小时 - 7 天的光伏出力、用电负荷，准确率达 90% 以上；</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZO2mFq6GAD4xzAAHfD3bIEjw00.jpeg" alt="wKgZO2mFq6GAD4xzAAHfD3bIEjw00.jpeg"/></p>
<p>
	• 智能调度控制：根据电网需求（如削峰、填谷、应急响应），自动分解调控目标，下发指令到终端设备。例如，电网发布 “削峰指令” 后，平台会优先让储能放电，再适度下调空调、充电桩负荷，确保响应达标；</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFq6GAeB2hAAHyQJiNnTY01.jpeg" alt="wKgZPGmFq6GAeB2hAAHyQJiNnTY01.jpeg"/></p>
<p>
	• 市场交易对接：作为 “桥梁” 连接资源与电力市场，帮助聚合后的资源参与需求响应、辅助服务（如调频、备用）、电能量交易，原本 “进不了市场” 的分布式资源，通过虚拟电厂可获得额外收益；</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZO2mFq6KAcS6-AAEIs60V4Y078.jpeg" alt="wKgZO2mFq6KAcS6-AAEIs60V4Y078.jpeg"/></p>
<p>
	• 响应评估与考核：自动测算响应基线（比如未调控时的正常负荷）、实际响应曲线，计算偏差率（若偏差超标的考核金额），确保响应符合电网要求；</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFq6OAIHZ8AAD_vTjQnL864.jpeg" alt="wKgZPGmFq6OAIHZ8AAD_vTjQnL864.jpeg"/></p>
<p>
	• 收益结算与反馈：清晰统计各参与方（企业、储能业主）的收益（如峰谷套利收益、需求响应补贴），生成数字账单，让收益分配透明可查。</p>
<p>
	未来路径：政策与市场双轮深化随着全国统一电力市场建设加速，虚拟电厂将逐步纳入现货市场、辅助服务市场与碳市场联动机制。通过市场机制和数字技术，将每一个电力用户从被动的消费者，转变为积极的产销者和系统稳定运行的参与者。安科瑞系统深度契合政策对“可观、可测、可调、可控”的刚性要求，为用户合规参与需求响应、容量补偿与绿电交易提供全链条技术保障。</p>
<p>
	审核编辑 黄宇</p>]]></description></item><item>    <title><![CDATA[拆解RK3568启动日志：Debian12+Linux6.1下的调试密码，初学者也能看懂]]></title>    <link>https://www.elecfans.com/d/7401325.html</link>    <guid>https://www.elecfans.com/d/7401325.html</guid>    <pubDate>2026-02-06 16:52:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在<a href="https://www.elecfans.com/v/tag/232/" target="_blank"><u>嵌入式开发</u></a>中，</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动日志（</span></span></font><span><span style="background-color:rgb(255,255,255);">Boot Log</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b><span><span><span style="background-color:rgb(255,255,255);"/></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">是硬件调试、驱动开发、系统优化的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">第一手资料</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。尤其是基于<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>瑞芯微</u></a></span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3568</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（四核</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">A55</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，主打边缘计算、<a href="https://bbs.elecfans.com/group_57" target="_blank"><u>物联网</u></a>设备）的方案，搭配</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Debian12</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_300" target="_blank"><u>Linux</u></a>6.1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核时，启动日志能直观反映从硬件初始化到用户登录的全流程。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">本文将逐段解析</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3568</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的启动日志，带你看懂每个阶段的关键信息，理解其对<a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>的价值，并教会初学者如何利用日志定位问题。文末附启动流程图和脑图，帮你建立系统化认知。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixeAebPbAACpobgZqkc950.png" alt="wKgZPGkaixeAebPbAACpobgZqkc950.png"/><h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、启动日志全解析：从硬件到系统的</span></span></font><span><span style="background-color:rgb(255,255,255);">9</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个关键阶段</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">RK3568</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的启动流程遵循</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件初始化</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">引导程序</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核加载</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">用户态启动</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的<a href="https://www.elecfans.com/soft/data/21-22/" target="_blank"><u>嵌入式</u></a>标准逻辑，日志中每个阶段都有明确的标识，我们按时间线拆解：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1729" target="_blank"><u>DDR</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内存初始化（硬件调试核心）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动的第一步是初始化</span></span></font><span><span style="background-color:rgb(255,255,255);">DDR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（内存），这是硬件能否正常工作的基础，日志中对应开头的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">DDR</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">相关配置：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">LPDDR4X</span>,<span class="code-snippet__number">324</span>MHz</span></code><code><span><span class="code-snippet__attribute">BW</span>=<span class="code-snippet__number">32</span>Col=<span class="code-snippet__number">10</span>Bk=<span class="code-snippet__number">8</span>CS0 Row=<span class="code-snippet__number">16</span>CS1 Row=<span class="code-snippet__number">16</span>CS=<span class="code-snippet__number">2</span>Die BW=<span class="code-snippet__number">16</span>Size=<span class="code-snippet__number">4096</span>MB</span></code><code><span><span class="code-snippet__attribute">change</span>to<span class="code-snippet__number">324</span>MHz →<span class="code-snippet__number">528</span>MHz →<span class="code-snippet__number">780</span>MHz →<span class="code-snippet__number">1560</span>MHz(final freq)</span></code><code><span><span class="code-snippet__attribute"><a href="https://www.elecfans.com/v/tag/3668/" target="_blank"><u>vr</u></a>efinner16</span>%, vrefout22% （<a href="https://m.hqchip.com/app/1701" target="_blank"><u>电压基准</u></a>参数）</span></code><code><span><span class="code-snippet__attribute">clk</span>skew0x26 （<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>偏移）</span></code></pre>
	<p>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键信息</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内存类型：</span></span></font><span><span style="background-color:rgb(255,255,255);">LPDDR4X</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，容量</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.elecfans.com/v/tag/9979/" target="_blank"><u>4G</u></a>B</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（符合</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3568</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的硬件规格）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">频率切换：从</span></span></font><span><span style="background-color:rgb(255,255,255);">324MHz</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（初始）逐步升频到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1560MHz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（最终工作频率），需确认硬件供电是否能支撑高频；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">时序参数：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">clk skew</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（时钟偏移）、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">vref</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（电压基准）直接影响内存稳定性，若后续出现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内存报错</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，需优先检查这些参数。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SPL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">引导（次级程序加载器）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">SPL</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Secondary Prog<a href="https://www.elecfans.com/tags/ram/" target="_blank"><u>ram</u></a> Lo<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a>er</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">迷你引导程序</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，负责初始化基础硬件（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MMC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SPI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）并加载主</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">U-Boot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，日志中对应：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">U</span>-Boot SPL<span class="code-snippet__number">2017</span>.<span class="code-snippet__number">09</span>(Oct<span class="code-snippet__number">02</span><span class="code-snippet__number">2025</span>-<span class="code-snippet__number">132555</span>)</span></code><code><span><span class="code-snippet__attribute">sfc</span>cmd=<span class="code-snippet__number">9</span>fH(<span class="code-snippet__number">6</span>BH-x4) → unknown raw ID<span class="code-snippet__number">0</span><span class="code-snippet__number">0</span><span class="code-snippet__number">0</span>（SPI Flash识别失败）</span></code><code><span><span class="code-snippet__attribute">Trying</span>to boot from MMC2 → MMC no card present （MMC2无卡）</span></code><code><span><span class="code-snippet__attribute">Trying</span>to boot from MMC1 → SPL AB-slot _a, successful<span class="code-snippet__number">0</span>, tries-remain<span class="code-snippet__number">7</span>（MMC1成功）</span></code></pre>
	<p>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键信息</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动介质优先级：</span></span></font><span><span style="background-color:rgb(255,255,255);">SPL</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">先尝试</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SPI Flash</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（失败），再试</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MMC2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（无卡），最后</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MMC1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（成功），开发者可通过修改</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">U-Boot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置调整优先级；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">AB-slot</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MMC1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“AB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区启动</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_360" target="_blank"><u>Android</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">常用的双系统备份机制），此处尝试</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">_slot_a</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，适合需要高可靠性的设备。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">U-Boot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">与安全固件（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">BL31+OP-<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>TE</u></a>E</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">主</span></span></font><span><span style="background-color:rgb(255,255,255);">U-Boot</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动后，会加载</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1378" target="_blank"><u>ARM</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">可信固件（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">BL31</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）和安全<a href="https://www.elecfans.com/v/tag/527/" target="_blank"><u>操作系统</u></a>（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">OP-TEE</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），这是嵌入式设备</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">安全启动</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的核心：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">NO<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>CE</span> BL31 v2.<span class="code-snippet__number">3</span>()v2.<span class="code-snippet__number">3</span>-<span class="code-snippet__number">645</span>-g8cea6ab0bcl, fwver v1.<span class="code-snippet__number">44</span>（ATF版本）</span></code><code><span><span class="code-snippet__attribute">ITC</span>OP-TEE version<span class="code-snippet__number">3</span>.<span class="code-snippet__number">13</span>.<span class="code-snippet__number">0</span>-<span class="code-snippet__number">860</span>-g6c78a7d8c （OP-TEE版本）</span></code><code><span><span class="code-snippet__attribute">INFO</span>  Using opteed sec <a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>cpu</u></a>_context! （启用安全上下文）</span></code><code><span><span class="code-snippet__attribute">Jumping</span>to U-Boot(<span class="code-snippet__number">0</span>x00a00000) via ARM Trusted Firmware(<span class="code-snippet__number">0</span>x00040000)</span></code></pre>
	<p>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键信息</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">安全组件版本：</span></span></font><span><span style="background-color:rgb(255,255,255);">BL31</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">v1.44</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">OP-TEE</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">v3.13.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）需与内核、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">U-Boot</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本兼容，否则会出现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动卡死</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">跳转地址：</span></span></font><span><span style="background-color:rgb(255,255,255);">U-Boot</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">加载到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0x00a00000</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">BL31</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0x00040000</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，需确认内存地址分配无冲突。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段</span></span></font><span><span style="background-color:rgb(255,255,255);">4</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Linux</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核启动（驱动与硬件适配）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核启动是日志中最复杂的部分，涵盖</span></span></font><span><span style="background-color:rgb(255,255,255);">CPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、内存、外设驱动的初始化，我们挑核心信息解析：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）硬件基础初始化</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__selector-attr">[  0.980086]</span>Booting Linux on physical CPU<span class="code-snippet__number">0</span>x0000000000<span class="code-snippet__selector-attr">[0x412fd050]</span>（CPU型号：ARM Cortex-A55）</span></code><code><span><span class="code-snippet__selector-attr">[  0.980114]</span>Linux version<span class="code-snippet__number">6.1</span>.<span class="code-snippet__number">84</span>(sc<span class="code-snippet__keyword">@linux1024</span>) （内核版本）</span></code><code><span>[  <span class="code-snippet__number">0.995619</span>] Machine<span class="code-snippet__attribute">model</span>: <a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>Rockchip</u></a> RK3568 Linux1024 EVB1 DDR4 V10 Board （硬件型号）</span></code><code><span>[  <span class="code-snippet__number">1.058549</span>] Zone<span class="code-snippet__attribute">ranges</span>: <a href="https://www.elecfans.com/tags/dma/" target="_blank"><u>DMA</u></a> [mem<span class="code-snippet__number">0</span>x0000000000200000-<span class="code-snippet__number">0</span>xffffffff], Normal [mem<span class="code-snippet__number">0</span>x100000000-<span class="code-snippet__number">0</span>x1ffffffff] （内存分区）</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">CPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">核</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">A55</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（后续日志会显示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“Brought up 1 node, 4 CPUs”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内存分区：</span></span></font><span><span style="background-color:rgb(255,255,255);">DMA</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">区（用于外设访问）和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Normal</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">区（主内存），总内存</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4GB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（对应</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0x00200000</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0x1ffffffff</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）驱动加载状态</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核会自动加载硬件驱动，日志中用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">probed</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">表示成功，</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">error</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">表示失败：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">成功案例：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>[  <span class="code-snippet__number">1.429266</span>] rockchip-gpio fdd60000.<span class="code-snippet__property">gpio</span>: probed<span class="code-snippet__attr"><a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>pi</u></a>nctrl</span>:gpio<span class="code-snippet__meta">@fdd60000</span>（<span class="code-snippet__variable">GPIO</span>驱动成功）</span></code><code><span>[  <span class="code-snippet__number">2.260806</span>] rga2 fdeb0000.<span class="code-snippet__property">rk_rga</span>: probe successfully, irq =<span class="code-snippet__number">87</span>（<span class="code-snippet__title">RGA2</span>图形加速驱动成功）</span></code><code><span>[  <span class="code-snippet__number">2.300120</span>] mali fde60000.<span class="code-snippet__property"><a href="https://www.elecfans.com/tags/gpu/" target="_blank"><u>gpu</u></a></span>:<span class="code-snippet__title">Probed</span><span class="code-snippet__keyword">as</span>mali0 （<span class="code-snippet__title">Mali</span><span class="code-snippet__variable">GPU</span>驱动成功）</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">失败案例（需重点关注）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>[  <span class="code-snippet__number">2.483354</span>] GTP-ERR[_do_<a href="https://www.elecfans.com/tags/i2c/" target="_blank"><u>i2c</u></a>_write432]: I2c transfer error! (<span class="code-snippet__number">-110</span>) （GTP触摸芯片I2C超时）</span></code><code><span>[  <span class="code-snippet__number">5.910894</span>] GTP-ERR[gt1x_ts_probe587]: GTP<span class="code-snippet__keyword">init</span>fai<a href="https://www.hqchip.com/app/1721" target="_blank"><u>led</u></a>!!! （触摸驱动初始化失败）</span></code><code><span>[<span class="code-snippet__meta">FAILED</span>] Failed to start <a href="https://www.hqchip.com/app/1515" target="_blank"><u>usb</u></a>device.service: Manage USB device functions. （USB设备服务启动失败）</span></code></pre>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段</span></span></font><span><span style="background-color:rgb(255,255,255);">5</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：文件系统挂载（系统可用性基础）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核启动后，会挂载根文件系统（</span></span></font><span><span style="background-color:rgb(255,255,255);">Debian12</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">使用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ext4</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），日志中对应：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__selector-attr">[  6.088111]</span>EXT4-fs (mmcblk0p6) recovery complete （mmcblk0p6分区修复完成）</span></code><code><span><span class="code-snippet__selector-attr">[  6.088308]</span>EXT4-fs (mmcblk0p6) mounted filesystem with ordered data mode （根分区挂载成功）</span></code><code><span><span class="code-snippet__selector-attr">[  8.422110]</span>EXT4-fs (mmcblk0p7) mounted filesystem with ordered data mode （oem分区挂载）</span></code><code><span><span class="code-snippet__selector-attr">[  8.527496]</span>EXT4-fs (mmcblk0p8) mounted filesystem without journal （userdata分区挂载）</span></code></pre>
	<p>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键信息</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区对应：</span></span></font><span><span style="background-color:rgb(255,255,255);">mmcblk0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">EMMC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">p6</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">是根分区（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">p7</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">oem</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区（厂商数据）、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">p8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">userdata</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（用户数据）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">日志中</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“without journal”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">表示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">userdata</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">分区关闭了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ext4</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">日志（适合对性能要求高的场景）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段</span></span></font><span><span style="background-color:rgb(255,255,255);">6</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：用户态初始化（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">systemd</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">服务管理）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">Debian12</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">使用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">systemd</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">管理系统服务，日志中用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">[ OK ]</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">[FAILED]</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">标识服务状态：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">成功服务：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__selector-attr">[ OK ]</span>Started rk<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>ai</u></a>q_3A<span class="code-snippet__selector-class">.service</span>: Enable Rockchip camera engine rkaiq （RK相机引擎服务成功）</span></code><code><span>[ OK ] Started ssh.service: OpenB<a href="https://www.hqchip.com/app/1522" target="_blank"><u>SD</u></a> Secure Shell server （SSH服务成功，可远程登录）</span></code><code><span>[ OK ] Started lightdm.service: Light Display Manager （图形登录管理器成功）</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">警告</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">失败服务（需优化）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>Configuration file lib/systemd/system/rkaiq_3A.service<span class="code-snippet__keyword">is</span>marked world-writable （服务文件权限过宽，有安全风险）</span></code><code><span>[<span class="code-snippet__meta">FAILED</span>] Failed to start usbdevice.service （USB服务失败，需检查驱动或配置）</span></code></pre>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段</span></span></font><span><span style="background-color:rgb(255,255,255);">7</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：最终登录（系统就绪）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">当所有服务启动完成后，系统进入登录界面：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">Welcome</span>to Debian GNU/Linux<span class="code-snippet__number">12</span>(bookworm)!</span></code><code><span>root<span class="code-snippet__variable">@linaro</span>-alip<span class="code-snippet__comment"># （root用户登录成功，系统就绪）</span></span></code></pre>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、启动日志对开发者的</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">大核心价值</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动日志不是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">无用的打印信息</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，而是嵌入式开发的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试指南针</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，其价值主要体现在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个维度：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件调试：验证硬件设计正确性</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">DDR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">稳定性</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：若日志中出现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“DDR init failed”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，需检查硬件供电（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VDD_DDR</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、时序参数（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">clk skew</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">tdqss</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）是否与</span></span></font><span><span style="background-color:rgb(255,255,255);">datasheet</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">匹配；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">外设连接</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：比如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“GTP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">触摸</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2C</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">超时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，可能是硬件接线错误（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SDA/SCL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">接反）、上拉<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>缺失，或触摸芯片本身故障；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">供电检查</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：日志中</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">vdd_<a href="https://www.elecfans.com/tags/Cirrus logic/" target="_blank"><u>logic</u></a> init 900000 uV</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（逻辑供电</span></span></font><span><span style="background-color:rgb(255,255,255);">900mV</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">vdd_gpu init 900000 uV</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">GPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">供电</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">900mV</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），若数值异常（如低于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">800mV</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），会导致外设工作不稳定。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动开发：定位驱动适配问题</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动加载失败</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：日志中</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“probe failed”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">表示驱动未正确匹配硬件，需检查设备树（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DTS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）中硬件地址是否正确（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2C</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备地址</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0x14</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">是否与实际一致）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">兼容性问题</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：比如</span></span></font><span><span style="background-color:rgb(255,255,255);">Mali GPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“probed as mali0”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">但后续</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“gpu hang”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，需确认内核版本与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">GPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动版本是否兼容（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3568</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Mali G52-2EE</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">需搭配特定版本驱动）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">资源冲突</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：日志中</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“<a href="https://www.hqchip.com/app/2004" target="_blank"><u>can</u></a>'t request region for resource [mem 0xfde40000-0xfde4ffff]”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">表示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">NPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内存地址被占用，需修改设备树调整内存分配。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统优化：缩短启动时间、提升稳定性</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动时间分析</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：日志中每个阶段都有时间戳（如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">[  0.980086]</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），可统计各阶段耗时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">比如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SPL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段耗时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">100ms</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，内核启动耗时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">5s</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，用户态服务耗时</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3s</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，针对性优化慢阶段（如禁用无用服务）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">服务管理</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">systemctl status usbdevice.service</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看失败服务的详细日志，禁用无关服务（如不需要相机可关闭</span></span></font><span><span style="background-color:rgb(255,255,255);">rkaiq_3A.service</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">文件系统优化</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：日志中</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“ext4 recovery complete”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">表示根分区上次异常关机，可通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">e2fsck</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">提前修复，避免启动时耗时修复。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、初学者如何利用启动日志？</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">步上手法</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">对嵌入式初学者来说，不用一开始看懂所有细节，掌握</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">按阶段拆分</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">抓关键字</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">查手册</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">步方法即可：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第一步：按</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动阶段</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">拆分日志</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">先在日志中标记出</span></span></font><span><span style="background-color:rgb(255,255,255);">6</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个核心阶段，对应前文解析的结构：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">DDR</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：找</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“DDR”“LPDDR4X”“Size”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键字；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">SPL/U-Boot</span></span></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：找</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“U-Boot SPL”“Trying to boot from”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">安全固件</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：找</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“BL31”“OP-TEE”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">4.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核启动</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：找</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“Linux version”“Booting Linux”“probed”“error”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">5.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">文件系统</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：找</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“EXT4-fs”“mounted”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">6.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">用户态</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：找</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“systemd”“[ OK ]”“[FAILED]”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第二步：关注</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键判断词</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">日志中</span></span></font><span><span style="background-color:rgb(255,255,255);">80%</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的问题都能通过关键字定位：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">成功标识</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">OK</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">probed</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">mounted</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">Booted</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">失败标识</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">error</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">FAILED</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">timeout</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">init failed</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件信息</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">CPU</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/dram/" target="_blank"><u>DRAM</u></a></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">MMC</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">I2C</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">USB</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（对应具体硬件）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">举例</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：看到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“GTP-ERR: I2c transfer error (-110)”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，先确认：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段：内核驱动加载；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件：</span></span></font><span><span style="background-color:rgb(255,255,255);">GTP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">触摸芯片（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2C</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">总线）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题：</span></span></font><span><span style="background-color:rgb(255,255,255);">I2C</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">超时（错误码</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">- 110</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），优先检查硬件接线。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第三步：搭配工具深入调试</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">光看日志不够，需用工具进一步分析：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">实时查看日志</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：系统启动后，用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dmesg</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看内核日志，</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">journalctl -u usbdevice.service</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看特定服务的详细日志；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">日志保存</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dmesg &gt; boot.log</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">保存日志到文件，方便后续分析；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件手册对照</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：比如</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3568</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的《</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Datasheet</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">》中</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“I2C</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a></span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">章节，确认时钟频率、地址是否与日志中一致。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、可视化工具：启动流程与脑图</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为了帮你更直观理解，我整理了</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3568</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的启动流程图和核心脑图：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动流程图</span></span></font></span></b></h3>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixeAWmQhAAE6OHtqRIo360.png" alt="wKgZPGkaixeAWmQhAAE6OHtqRIo360.png"/><h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动日志核心脑图</span></span></font></span></b></h3>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixeAM_ziAAFNX7AbNrI310.png" alt="wKgZPGkaixeAM_ziAAFNX7AbNrI310.png"/><h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">五、总结：启动日志是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">嵌入式开发的显微镜</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">对</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3568+Debian12</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的开发者来说，启动日志不仅是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">启动过程的记录</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，更是：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/v/tag/796/" target="_blank"><u>万用表</u></a></span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：验证</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DDR</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2C</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">等硬件是否正常；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动工程师的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试器</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：定位驱动适配与兼容性问题；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统工程师的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">优化指南</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：缩短启动时间、提升系统稳定性；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">初学者的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">学习手册</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：理解<a href="https://m.elecfans.com/v/tag/2447/" target="_blank"><u>嵌入式系统</u></a>从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的启动逻辑。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">下次拿到</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3568</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的启动日志，不妨按</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">阶段拆分</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">抓关键字</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">查手册</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的步骤试试</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">你会发现，很多之前</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">卡壳</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的问题，都能在日志中找到答案。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">如果觉得有用，欢迎分享给身边的嵌入式同行，也可以在评论区留言你的日志调试经历～</span></span></font></span></p>
</div>]]></description></item><item>    <title><![CDATA[audio_hw.c核心逻辑及第三方算法集成]]></title>    <link>https://www.elecfans.com/d/7401322.html</link>    <guid>https://www.elecfans.com/d/7401322.html</guid>    <pubDate>2026-02-06 16:53:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<p>
		</p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、文件核心内容分析</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（一）核心配置解析</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">该文件的配置主要分为</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">PCM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">参数配置</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">路由配置</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备标识配置</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">三类，是<a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a>硬件抽象层（</span></span></font><span><span style="background-color:rgb(255,255,255);">HAL</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）与底层</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ALSA</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动交互的基础。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixaABjWTAAJWySiB9qc708.png" alt="wKgZPGkaixaABjWTAAJWySiB9qc708.png"/><h5>
		<b><span style="font-family:Arial;font-weight:bold;font-size:12pt;"><span><span style="background-color:rgb(255,255,255);">1. PCM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">参数配置（音频数据格式定义）</span></span></font></span></b></h5>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">定义了不同场景下的</span></span></font><span><span style="background-color:rgb(255,255,255);">PCM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（脉冲编码调制）数据格式，包括声道数、采样率、周期大小等关键参数，决定了音频数据的传输格式。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置名称</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">适用场景</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心参数（</span></span></font><span><span style="background-color:rgb(255,255,255);">channels/ra<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>/format</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">备注</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_config</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">基础音频输出（如媒体播放）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声道</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/ 44100Hz / S16_LE</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">16</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">位小端）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">通用播放场景默认配置</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_config_in</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">基础音频输入（如录音）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声道（默认）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/ 44100Hz / S16_LE</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持参考声道扩展（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">PCM_REFERENCE_CHANNELS</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_config_in_low_latency</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">低延迟输入（如语音通话）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声道</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/ 48000Hz / S16_LE</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">降低延迟以保证实时性</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_config_sco</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/蓝牙/" target="_blank"><u>蓝牙</u></a></span></span></font><span><span style="background-color:rgb(255,255,255);">SCO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">链路（语音）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声道</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/ 8000Hz / S16_LE</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">蓝牙语音通话专用（窄带音频）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_config_<a href="https://www.hqchip.com/app/1685" target="_blank"><u>hdmi</u></a>_multi</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">多声道输出</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">6</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声道（可动态修改）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">默认采样率</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/ S16_LE</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持多声道环绕声输出</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_config_direct</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">直接输出（如</span></span></font><span><span style="background-color:rgb(255,255,255);">SPDIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声道</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/ 48000Hz / IEC958</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">或</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">S24_LE</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">用于数字音频直通（无解码，直接传输比特流）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><h5>
		<b><span style="font-family:Arial;font-weight:bold;font-size:12pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">路由配置（音频路径映射）</span></span></font></span></b></h5>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">route_config</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">结构体和路由表</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">route_configs</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">定义输入源与输出设备的对应关系，决定音频数据的物理传输路径（如扬声器、耳机、蓝牙等）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">route_config</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">结构体</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：包含播放路径（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">playb<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>k_route</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、采集路径（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">capture_route</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）等，例如：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__keyword">static</span><span class="code-snippet__keyword">const</span><span class="code-snippet__keyword">struct</span>route_config media_speaker = {</span></code><code><span> <span class="code-snippet__string">"media-speaker"</span>,  <span class="code-snippet__comment">// 播放路径（媒体→扬声器）</span></span></code><code><span> <span class="code-snippet__string">"media-main-mic"</span>, <span class="code-snippet__comment">// 采集路径（主麦克风）</span></span></code><code><span> <span class="code-snippet__string">"playback-off"</span>,  <span class="code-snippet__comment">// 关闭播放时的路径</span></span></code><code><span> <span class="code-snippet__string">"capture-off"</span>   <span class="code-snippet__comment">// 关闭采集时的路径</span></span></code><code><span>};</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">路由表</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">route_configs</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：二维数组，维度为</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">[</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入源</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">][</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出设备</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">]</span></span></font></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，映射关系如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入源：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">IN_SOURCE_MIC</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（麦克风）、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">IN_SOURCE_CAMCORDER</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（摄像机）、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">IN_SOURCE_VOICE_RECOGNI<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>ON</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（<a href="https://www.elecfans.com/tags/语音识别/" target="_blank"><u>语音识别</u></a>）等。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出设备：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">OUT_DEVICE_SPEAKER</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（扬声器）、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">OUT_DEVICE_HE<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a>SET</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（耳机）、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">OUT_DEVICE_BT_SCO</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（蓝牙</span></span></font><span><span style="background-color:rgb(255,255,255);">SCO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）等。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">例如：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">route_configs[IN_SOURCE_MIC][OUT_DEVICE_SPEAKER] = &amp;media_speaker</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，表示</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">麦克风输入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">扬声器输出</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">使用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">media_speaker</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">路由。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h5>
		<b><span style="font-family:Arial;font-weight:bold;font-size:12pt;"><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备标识配置（硬件匹配列表）</span></span></font></span></b></h5>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">定义了不同类型设备（如扬声器、</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、麦克风）的硬件标识列表，用于匹配系统中的实际声卡（通过解析</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/proc/asound/cards</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备列表名称</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">含义</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">示例元素（声卡名称）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">SPEAKER_OUT_NAME</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">扬声器输出设备列表</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">"<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>rockchip</u></a>carrk33"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"realtekrt5616c"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">codec</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">名称）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">HDMI_OUT_NAME</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出设备列表</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">"rkhdmidpsound"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"rockchiphdmi"</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">SPDIF_OUT_NAME</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">SPDIF</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出设备列表</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">"ROCKCHIPSPDIF"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"rockchipspdif"</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">MIC_IN_NAME</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">麦克风输入设备列表</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">"realtekrt5651co"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"rockchipes8316c"</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">BT_IN_NAME</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">BT_OUT_NAME</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">蓝牙输入</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出设备列表</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">"rockchipbt"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（蓝牙音频设备）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（二）核心函数解析</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数主要围绕</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备管理</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">路由控制</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">流操作</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">三大核心功能，实现音频设备的打开、配置、数据传输等流程。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h5>
		<b><span style="font-family:Arial;font-weight:bold;font-size:12pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备管理函数</span></span></font></span></b></h5>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">get_output_device_id</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">get_input_source_id</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">将</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_360" target="_blank"><u>Android</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">标准音频设备类型（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">AUDIO_DEVICE_OUT_SPEAKER</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）转换为内部</span></span></font><span><span style="background-color:rgb(255,255,255);">ID</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">OUT_DEVICE_SPEAKER</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），用于路由表<a href="https://www.hqchip.com/ic/0" target="_blank"><u>索引</u></a>。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">示例：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">AUDIO_DEVICE_OUT_SPEAKER</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"/></span><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">OUT_DEVICE_SPEAKER</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">name_match</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">is_specified_out_sound_card</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备匹配函数，通过比较声卡名称（从</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/proc/asound/cards</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">读取）与</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">SPEAKER_OUT_NAME</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">等列表中的标识，确定当前可用硬件设备。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">device_lock</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">device_unlock</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">线程安全函数，通过互斥锁保护音频设备操作（如流的创建</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">销毁），避免并发冲突。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h5>
		<b><span style="font-family:Arial;font-weight:bold;font-size:12pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">路由控制函数</span></span></font></span></b></h5>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">getOutputRouteFromDevice</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">getInputRouteFromDevice</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">根据输出</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入设备类型获取对应的路由</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ID</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">SPEAKER_NORMAL_ROUTE</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">MAIN_MIC_CAPTURE_ROUTE</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），用于底层</span></span></font><span><span style="background-color:rgb(255,255,255);">ALSA</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">路由切换。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">force_non_hdmi_out_standby</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备冲突处理函数，当</span></span></font><span><span style="background-color:rgb(255,255,255);">HDMI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">激活时，强制其他输出设备（如扬声器）进入待机状态，避免音频同时从多个设备输出。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h5>
		<b><span style="font-family:Arial;font-weight:bold;font-size:12pt;"><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">流操作函数</span></span></font></span></b></h5>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">adev_get_stream_out_by_io_handle_l</span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span></b><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">adev_get_stream_in_by_io_handle_l</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">根据</span></span></font><span><span style="background-color:rgb(255,255,255);">IO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">句柄查找对应的输出</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入流（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stream_out</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stream_in</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），用于流的状态管理（如启动、停止）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">adev_add_stream_to_list</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">将创建的流添加到设备的流列表中，维护流的生命周期（从创建到销毁）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、第三方<a href="https://m.elecfans.com/v/tag/2562/" target="_blank"><u>算法</u></a>集成方案</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">第三方算法（如降噪、音效增强、回声消除等）需嵌入音频数据流转链路中，核心是在</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入数据读取后</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">或</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出数据写入前</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">插入处理逻辑。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（一）集成位置</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入链路（录音）</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在麦克风采集的</span></span></font><span><span style="background-color:rgb(255,255,255);">PCM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据被上层应用读取前处理（如降噪）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">对应代码位置：输入流的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">read</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">回调函数（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stream_in.read</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），数据从</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_read</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">获取后，调用算法处理再返回给上层。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出链路（播放）</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在上层应用发送的</span></span></font><span><span style="background-color:rgb(255,255,255);">PCM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据写入硬件前处理（如音效增强）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">对应代码位置：输出流的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">write</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">回调函数（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stream_out.write</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），数据传入后先调用算法处理，再通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_write</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">写入硬件。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（二）集成步骤</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">算法初始化（设备打开时）</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在音频设备打开（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">open_output_stream</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">或</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">open_input_stream</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）时，根据当前</span></span></font><span><span style="background-color:rgb(255,255,255);">PCM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_config</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的采样率、声道数等）初始化算法（如分配缓冲区、设置参数）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">示例：在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stream_out</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">创建时，调用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">algorithm_init(&amp;out-&gt;alg, out-&gt;pcm_config)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据处理（读写时）</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入链路：在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stream_in.read</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">中，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_read</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">获取原始数据后，调用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">algorithm_process_in(alg, pcm_data, processed_data)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，再返回处理后的数据。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出链路：在</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stream_out.write</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">中，接收上层数据后，调用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">algorithm_process_out(alg, input_data, processed_data)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，再通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_write</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">资源释放（设备关闭时）</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在流停止（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stop_output_stream</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">stop_input_stream</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）或设备关闭时，调用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">algorithm_destroy(alg)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">释放算法占用的内存、线程等资源。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（三）注意事项</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据格式匹配</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：算法输入输出格式需与</span></span></font><span><span style="background-color:rgb(255,255,255);">PCM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置一致（如采样率、声道数、位深），必要时通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">audio_format_convert</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">进行格式转换。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">实时性</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：算法处理耗时需</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">≤</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频帧周期（如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">period_size/rate</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，例如</span></span></font><span><span style="background-color:rgb(255,255,255);">44100Hz</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">采样率、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">256</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">帧周期对应的周期为～</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">5.8ms</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），避免卡顿。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">线程安全</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：若算法涉及多线程操作，需通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">device_lock</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">/</span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">device_unlock</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">加锁保护，避免数据竞争。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、流程图与脑图（文字版）</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（一）音频数据流转与算法集成流程图</span></span></font></span></b></h4>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixaAVOxpAAJbl89q9os332.png" alt="wKgZPGkaixaAVOxpAAJbl89q9os332.png"/><h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（二）核心模块与算法集成脑图</span></span></font></span></b></h4>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixaAY45WAAMTsfKQkLQ265.png" alt="wKgZPGkaixaAY45WAAMTsfKQkLQ265.png"/><p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过以上分析，可清晰理解</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">audio_hw.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">的核心逻辑及第三方算法的集成方式，实际操作时需根据具体算法<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>调整处理逻辑，并严格测试实时性和兼容性。</span></span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[RK android平台多MIC开发：从驱动配置到算法适配]]></title>    <link>https://www.elecfans.com/d/7401321.html</link>    <guid>https://www.elecfans.com/d/7401321.html</guid>    <pubDate>2026-02-06 16:55:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在<a href="https://www.elecfans.com/tags/智能音箱/" target="_blank"><u>智能音箱</u></a>、视频会议设备等场景中，多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（麦克风）配置是实现远场拾音、降噪、回声消除的核心基础。<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>瑞芯微</u></a>（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>Rockchip</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">在多</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发上提供了统一框架与差异化配置，本文将结合官方技术文档，从</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡注册与</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a>测试</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.elecfans.com/v/tag/2562/" target="_blank"><u>算法</u></a>集成</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">常见问题解决</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">四大维度，手把手教你完成多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发，附具体文件路径与实操代码。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixWAPRCFAAHyJDhX6a8468.png" alt="wKgZPGkaixWAPRCFAAHyJDhX6a8468.png"/><h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、核心前提：不同芯片的共性与差异</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">瑞芯微各芯片多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发的核心逻辑一致（基于</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1522" target="_blank"><u>sim</u></a>ple-audio-card</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">框架、依赖</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_715" target="_blank"><u>Ti</u></a>nyALSA</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具链），但需注意接口与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DTS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">路径差异，下表可快速定位关键信息：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片型号</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持的</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a></span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心参考</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">路径</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">录音设备节点（默认）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键</span></span></font><span><span style="background-color:rgb(255,255,255);">Codec</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">示例</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK3399</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">I2S</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、外挂</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/adc/" target="_blank"><u>ADC</u></a></span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">无固定路径（参考</span></span></font><span><span style="background-color:rgb(255,255,255);">ES8323/ES7210</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">示例）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">pcmC0D1c</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">ES8323</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ES7210</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RT5640</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK3326/PX30</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">I2S</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PDM</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">arch/<a href="https://m.hqchip.com/app/1378" target="_blank"><u>arm</u></a>64/boot/dts/rockchip/rk3326-evb-<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>ai</u></a>-va-v11.dts</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">pcmC0D1c</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK809</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK817</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK3566/RK3568</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">I2S</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PDM</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">arch/arm64/boot/dts/rockchip/rk3566-evb2-lp4x-v10-pdm-mic-array.dts</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">pcmC1D1c</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">RK809</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ES7202</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ES7243e</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><p style="border-left:2.25pt solid rgb(187,191,196);padding:0pt 0pt 0pt 0pt;">
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">提示：若找不到对应</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">文件，可在</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">arch/arm64/boot/dts/rockchip/</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">目录下全局搜索</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">pdm</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">i2s</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">mic</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">等关键词，或参考同系列芯片的多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置示例。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、关键步骤：多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发全流程（附代码与路径）</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发的核心是</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡注册（</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核适配</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试验证</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">算法集成</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，每个步骤均需结合芯片特性调整，以下为具体实操：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第一步：声卡注册与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DTS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置（核心）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡是多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">数据传输的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">桥梁</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，需通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DTS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);"><a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>cpu</u></a>_dai</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如</span></span></font><span><span style="background-color:rgb(255,255,255);">I2S/PDM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口）、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">codec_dai</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如</span></span></font><span><span style="background-color:rgb(255,255,255);">RK809 codec</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）与</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dai-link</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（连接两者），分</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">种典型场景：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">场景</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PDM</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">多</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3326/PX30/RK3566/RK3568</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通用）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">PDM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口支持多通道（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1-8ch</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1-2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道通常用于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">回采</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3-8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道用于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">拾音，以</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3566</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">为例：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>// 路径：arch/arm64/boot/dts/rockchip/rk3566-evb2-lp4x-v1<span class="code-snippet__number">0</span>-pdm-mic-array.dts</span></code><code><span>rk809_sound_micarray: rk809-sound-micarray {</span></code><code><span>  compatible =<span class="code-snippet__string">"simple-audio-card"</span>;</span></code><code><span>  simple-audio-card,name =<span class="code-snippet__string">"rockchip,rk809-codec"</span>;<span class="code-snippet__regexp">//</span>声卡名称</span></code><code><span>  simple-audio-card,mclk-fs = &lt;<span class="code-snippet__number">256</span>&gt;;<span class="code-snippet__regexp">//</span>主时钟倍数（固定）</span></code><code><span> </span></code><code><span>  // dai-<span class="code-snippet__keyword">link</span><span class="code-snippet__number">0</span>：播放（I2S接口）</span></code><code><span>  simple-audio-card,dai-<span class="code-snippet__keyword">link</span>@0 {</span></code><code><span>   <span class="code-snippet__keyword">format</span>=<span class="code-snippet__string">"i2s"</span>;</span></code><code><span>    cpu { sound-dai = &lt;&amp;i2s1_8ch&gt;; };<span class="code-snippet__regexp">//</span>绑定I2S1_8ch播放接口</span></code><code><span>    codec { sound-dai = &lt;&amp;rk809_codec <span class="code-snippet__number">0</span>&gt;; };<span class="code-snippet__regexp">//</span>绑定Codec播放端</span></code><code><span>  };</span></code><code><span> </span></code><code><span> <span class="code-snippet__regexp">//</span>dai-link1：录音（PDM接口，多MIC）</span></code><code><span>  simple-audio-card,dai-<span class="code-snippet__keyword">link</span>@1 {</span></code><code><span>   <span class="code-snippet__keyword">format</span>=<span class="code-snippet__string">"pdm"</span>;</span></code><code><span>    cpu { sound-dai = &lt;&amp;pdm&gt;; };<span class="code-snippet__regexp">//</span>绑定PDM录音接口</span></code><code><span>    codec { sound-dai = &lt;&amp;rk809_codec <span class="code-snippet__number">1</span>&gt;; };<span class="code-snippet__regexp">//</span>绑定Codec录音端</span></code><code><span>  };</span></code><code><span>};</span></code><code><span><span class="code-snippet__regexp">//</span>使能I2S1_8ch播放接口</span></code><code><span>&amp;i2s1_8ch {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span> <span class="code-snippet__comment">#sound-dai-cells = &lt;0&gt;;</span></span></code><code><span>  rockchip,clk-trcm = &lt;<span class="code-snippet__number">1</span>&gt;;</span></code><code><span>  <a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>pi</u></a>nctrl-<span class="code-snippet__number">0</span>= &lt;&amp;i2s1m0_sclktx &amp;i2s1m0_lrcktx &amp;i2s1m0_sdo<span class="code-snippet__number">0</span>&gt;;</span></code><code><span>};</span></code><code><span><span class="code-snippet__regexp">//</span>使能PDM录音接口（多MIC核心）</span></code><code><span>&amp;pdm {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span> <span class="code-snippet__comment">#sound-dai-cells = &lt;0&gt;;</span></span></code><code><span>  pinctrl-<span class="code-snippet__number">0</span>= &lt;&amp;pdmm0_clk &amp;pdmm0_clk1 &amp;pdmm0_sdi<span class="code-snippet__number">0</span>&amp;pdmm0_<a href="https://www.elecfans.com/tags/sdi/" target="_blank"><u>sdi</u></a>1 &amp;pdmm0_<a href="https://www.hqchip.com/app/1522" target="_blank"><u>sd</u></a>i2 &amp;pdmm0_sdi3&gt;;</span></code><code><span>};</span></code><code><span><span class="code-snippet__regexp">//</span>配置RK809 Codec（需支持回采与多通道）</span></code><code><span>&amp;rk809_codec {</span></code><code><span> <span class="code-snippet__comment">#sound-dai-cells = &lt;1&gt;;</span></span></code><code><span>  compatible =<span class="code-snippet__string">"rockchip,rk809-codec"</span>,<span class="code-snippet__string">"rockchip,rk817-codec"</span>;</span></code><code><span>  clocks = &lt;&amp;cru I2S1_MCLKOUT&gt;;</span></code><code><span>  clock-names =<span class="code-snippet__string">"mclk"</span>;</span></code><code><span>  <a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a>c-<span class="code-snippet__keyword">for</span>-loopb<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>k;<span class="code-snippet__regexp">//</span>使能回采功能</span></code><code><span>  pdmdata-out-enable;<span class="code-snippet__regexp">//</span>PDM数据使能</span></code><code><span>  hp-volume = &lt;<span class="code-snippet__number">20</span>&gt;;<span class="code-snippet__regexp">//</span>耳机音量（可调整）</span></code><code><span>  spk-volume = &lt;<span class="code-snippet__number">3</span>&gt;;<span class="code-snippet__regexp">//</span>喇叭音量（可调整）</span></code><code><span>  mic-in-differential;<span class="code-snippet__regexp">//</span>差分MIC输入（提升抗干扰）</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span>};</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">场景</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2S</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">多</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3399/RK3326</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通用）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2S</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口连接（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3399</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">使用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ES8323 Codec</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），需配置</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2S</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">多通道与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Codec</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// RK3399 ES8323示例（无固定路径，需自定义）</span></span></code><code><span>es8323-sound {</span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span>  compatible =<span class="code-snippet__string">"simple-audio-card"</span>;</span></code><code><span>  simple-audio-card,format =<span class="code-snippet__string">"i2s"</span>;</span></code><code><span>  simple-audio-card,name =<span class="code-snippet__string">"rockchip,es8323-codec"</span>;</span></code><code><span>  simple-audio-card,mclk-fs = &lt;<span class="code-snippet__number">256</span>&gt;;</span></code><code><span> </span></code><code><span> <span class="code-snippet__comment">// CPU端：绑定I2S0</span></span></code><code><span>  simple-audio-card,cpu { sound-dai = &lt;&amp;i2s0&gt;; };</span></code><code><span> <span class="code-snippet__comment">// Codec端：绑定ES8323</span></span></code><code><span>  simple-audio-card,codec { sound-dai = &lt;&amp;es8323&gt;; };</span></code><code><span>};</span></code><code><span><span class="code-snippet__comment">// ES8323 Codec配置（<a href="https://www.elecfans.com/tags/i2c/" target="_blank"><u>I2C</u></a>地址0x11）</span></span></code><code><span>es8323: es8323@<span class="code-snippet__number">11</span>{</span></code><code><span> <span class="code-snippet__meta">#sound-dai-cells =</span><span class="code-snippet__meta"><span class="code-snippet__string">&lt;0&gt;</span></span><span class="code-snippet__meta">;</span></span></code><code><span>  compatible =<span class="code-snippet__string">"everest,es8323"</span>;</span></code><code><span>  reg = &lt;<span class="code-snippet__number">0x11</span>&gt;;</span></code><code><span>  clocks = &lt;&amp;cru SCLK_I2S_8CH_OUT&gt;;</span></code><code><span>  clock-names =<span class="code-snippet__string">"mclk"</span>;</span></code><code><span>  spk-con-gpio = &lt;&amp;gpio0 <span class="code-snippet__number">11</span>GPIO_ACTIVE_HIGH&gt;;<span class="code-snippet__comment">// 喇叭控制GPIO</span></span></code><code><span>  hp-det-gpio = &lt;&amp;gpio4 <span class="code-snippet__number">28</span>GPIO_ACTIVE_HIGH&gt;;<span class="code-snippet__comment">// 耳机检测GPIO</span></span></code><code><span>  status =<span class="code-snippet__string">"okay"</span>;</span></code><code><span>};</span></code><code><span><span class="code-snippet__comment">// 同时修改ES8323驱动，支持8通道（关键！）</span></span></code><code><span><span class="code-snippet__comment">// 路径：kernel/sound/soc/codecs/es8323.c（需全局搜索驱动文件）</span></span></code><code><span><span class="code-snippet__type">static</span><span class="code-snippet__keyword">struct</span><span class="code-snippet__title">snd_soc_dai_driver</span>es8323_dai = {</span></code><code><span>  .capture = {</span></code><code><span>    .stream_name =<span class="code-snippet__string">"Capture"</span>,</span></code><code><span>    .channels_min =<span class="code-snippet__number">2</span>,</span></code><code><span>    .channels_max =<span class="code-snippet__number">8</span>,<span class="code-snippet__comment">// 原默认2，改为8通道</span></span></code><code><span>    .ra<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>s = es8323_RATES,</span></code><code><span>    .formats = es8323_FORMATS,</span></code><code><span>  },</span></code><code><span>};</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">场景</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：外挂</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ADC +</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">虚拟声卡（所有芯片通用）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若</span></span></font><span><span style="background-color:rgb(255,255,255);">ADC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动无标准声卡逻辑（如仅初始化<a href="https://www.elecfans.com/tags/寄存器/" target="_blank"><u>寄存器</u></a>），需用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dummy-codec</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（虚拟</span></span></font><span><span style="background-color:rgb(255,255,255);">Codec</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）注册声卡：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>// 定义虚拟Codec</span></code><code><span>dummy_codec: dummy-codec {</span></code><code><span>  compatible =<span class="code-snippet__string">"rockchip,dummy-codec"</span>;</span></code><code><span> <span class="code-snippet__comment">#sound-dai-cells = &lt;0&gt;;</span></span></code><code><span>};</span></code><code><span><span class="code-snippet__regexp">//</span>注册声卡（以RT564<span class="code-snippet__number">0</span>为播放Codec，虚拟Codec为录音）</span></code><code><span>rt564<span class="code-snippet__number">0</span>-sound {</span></code><code><span>  compatible =<span class="code-snippet__string">"simple-audio-card"</span>;</span></code><code><span>  simple-audio-card,name =<span class="code-snippet__string">"rockchip,rt5640-codec"</span>;</span></code><code><span>  simple-audio-card,mclk-fs = &lt;<span class="code-snippet__number">256</span>&gt;;</span></code><code><span> </span></code><code><span> <span class="code-snippet__regexp">//</span>播放链路（RT564<span class="code-snippet__number">0</span>）</span></code><code><span>  simple-audio-card,dai-<span class="code-snippet__keyword">link</span>@0 {</span></code><code><span>   <span class="code-snippet__keyword">format</span>=<span class="code-snippet__string">"i2s"</span>;</span></code><code><span>    cpu { sound-dai = &lt;&amp;i2s<span class="code-snippet__number">0</span>&gt;; };</span></code><code><span>    codec { sound-dai = &lt;&amp;rt564<span class="code-snippet__number">0</span>&gt;; };</span></code><code><span>  };</span></code><code><span> </span></code><code><span> <span class="code-snippet__regexp">//</span>录音链路（虚拟Codec）</span></code><code><span>  simple-audio-card,dai-<span class="code-snippet__keyword">link</span>@1 {</span></code><code><span>   <span class="code-snippet__keyword">format</span>=<span class="code-snippet__string">"i2s"</span>;</span></code><code><span>    cpu { sound-dai = &lt;&amp;i2s<span class="code-snippet__number">0</span>&gt;; };</span></code><code><span>    codec { sound-dai = &lt;&amp;dummy_codec&gt;; };</span></code><code><span>  };</span></code><code><span>};</span></code></pre>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第二步：内核强制</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3399 、RK3576</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">必做，其他芯片可选）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">部分芯片（如</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3399</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）默认</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2S</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动仅支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道，需修改内核代码强制</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// 路径：kernel/sound/soc/rockchip/rockchip_i2s.c</span></span></code><code><span><span class="code-snippet__function"><span class="code-snippet__keyword">static</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__built_in">int</span></span><span class="code-snippet__function"/><span class="code-snippet__function"><span class="code-snippet__title">rockchip_i2s_hw_pa<a href="https://www.elecfans.com/tags/ram/" target="_blank"><u>ram</u></a>s</span></span><span class="code-snippet__function">(</span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">snd_pcm_<a href="https://m.hqchip.com/app/1525" target="_blank"><u>sub</u></a>stream *substream,</span></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">struct</span></span></span><span class="code-snippet__function"><span class="code-snippet__params">snd_pcm_hw_params *</span></span><span class="code-snippet__function"><span class="code-snippet__params"><span class="code-snippet__keyword">params</span></span></span><span class="code-snippet__function">)</span>{</span></code><code><span> <span class="code-snippet__comment">// ... 原有代码 ...</span></span></code><code><span> <span class="code-snippet__keyword">if</span>(substream-&gt;stream == SNDRV_PCM_STREAM_CAPTURE) {</span></code><code><span>    regmap_update_bits(i2s-&gt;regmap, I2S_RXCR, I2S_RXCR_VDW_MASK | I2S_RXCR_<a href="https://www.elecfans.com/tags/csr/" target="_blank"><u>CSR</u></a>_MASK, val);</span></code><code><span>  }<span class="code-snippet__keyword">else</span>{</span></code><code><span>    regmap_update_bits(i2s-&gt;regmap, I2S_TXCR, I2S_TXCR_VDW_MASK | I2S_TXCR_CSR_MASK, val);</span></code><code><span>   </span></code><code><span>   <span class="code-snippet__comment">// 新增：播放时强制录音8通道（用于回采+MIC）</span></span></code><code><span>    dev_info(i2s-&gt;dev,<span class="code-snippet__string">"for echo fixed 8 channels capture when playbackn"</span>);</span></code><code><span>    val =<span class="code-snippet__number">0</span>;</span></code><code><span>    val |= I2S_CHN_8;<span class="code-snippet__comment">// 8通道</span></span></code><code><span>    val |= I2S_TXCR_VDW(<span class="code-snippet__number">16</span>);<span class="code-snippet__comment">// 16bit（32bit需改为I2S_TXCR_VDW(32)）</span></span></code><code><span>    regmap_update_bits(i2s-&gt;regmap, I2S_RXCR, I2S_RXCR_VDW_MASK | I2S_RXCR_CSR_MASK, val);</span></code><code><span>  }</span></code><code><span> <span class="code-snippet__comment">// ... 原有代码 ...</span></span></code><code><span>}</span></code><code><span><span class="code-snippet__comment">// 修改DAI驱动，支持8通道</span></span></code><code><span><span class="code-snippet__keyword">static</span><span class="code-snippet__keyword">struct</span>snd_soc_dai_driver rockchip_i2s_dai = {</span></code><code><span>  .capture = {</span></code><code><span>    .stream_name =<span class="code-snippet__string">"Capture"</span>,</span></code><code><span>    .channels_min =<span class="code-snippet__number">2</span>,</span></code><code><span>    .channels_max =<span class="code-snippet__number">8</span>,<span class="code-snippet__comment">// 原默认2，改为8</span></span></code><code><span>    .rates = SNDRV_PCM_RATE_8000_192000,</span></code><code><span>    .formats = (SNDRV_PCM_FMTBIT_S8 | SNDRV_PCM_FMTBIT_S16_LE),</span></code><code><span>  },</span></code><code><span>};</span></code></pre>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第三步：音频测试（验证多通道是否正常）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试工具使用</span></span></font><span><span style="background-color:rgb(255,255,255);">TinyALSA</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">tinycap</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">录音、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">tinymix</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置通路），需先通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">mm</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">编译</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">external/tinyalsa/</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">生成工具，再按以下步骤操作：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：确认声卡注册成功</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 查看已注册声卡（需出现目标Codec，如rockchip,rk809-codec）</span></span></code><code><span>adb shell<span class="code-snippet__built_in">cat</span>/proc/asound/cards</span></code><code><span><span class="code-snippet__comment"># 查看录音设备节点（多MIC通常对应pcmCxD1c，如RK3566为pcmC1D1c）</span></span></code><code><span>adb shell<span class="code-snippet__built_in">ls</span>-l /dev/snd/</span></code></pre>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">示例输出（</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3566</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">crw</span>-rw----<span class="code-snippet__number">1</span>system audio<span class="code-snippet__number">116</span>,<span class="code-snippet__number">7</span><span class="code-snippet__number">2024</span>-<span class="code-snippet__number">05</span>-<span class="code-snippet__number">20</span><span class="code-snippet__number">10</span>:<span class="code-snippet__number">00</span>pcmC1D1c // 多MIC录音节点</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：打开录音通路</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 格式：tinymix -D [声卡ID] [通路ID] [使能值]</span></span></code><code><span><span class="code-snippet__comment"># 示例：RK3566打开声卡1的录音通路（通路ID需根据Codec调整，默认1为录音）</span></span></code><code><span><span class="code-snippet__attribute">adb</span>shell tinymix -D<span class="code-snippet__number">1</span><span class="code-snippet__number">1</span><span class="code-snippet__number">1</span></span></code><code><span><span class="code-snippet__comment"># （可选）打开喇叭放音通路（用于测试回采）</span></span></code><code><span><span class="code-snippet__attribute">adb</span>shell tinymix -D<span class="code-snippet__number">1</span><span class="code-snippet__number">0</span><span class="code-snippet__number">2</span></span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：录制</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道音频</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span># 格式：tinycap<span class="code-snippet__selector-attr">[保存路径]</span>-D<span class="code-snippet__selector-attr">[声卡ID]</span>-d<span class="code-snippet__selector-attr">[设备ID]</span>-c<span class="code-snippet__selector-attr">[通道数]</span>-r<span class="code-snippet__selector-attr">[采样率]</span>-<span class="code-snippet__selector-tag">b</span><span class="code-snippet__selector-attr">[位宽]</span>-<span class="code-snippet__selector-tag">p</span><span class="code-snippet__selector-attr">[周期大小]</span>-n<span class="code-snippet__selector-attr">[周期数]</span></span></code><code><span># 示例：RK3566录制<span class="code-snippet__number">8</span>通道、<span class="code-snippet__number">16</span>K采样率、<span class="code-snippet__number">16</span>bit音频</span></code><code><span>adb shell tinycap /sdcard/multi-mic-record<span class="code-snippet__selector-class">.wav</span>-D<span class="code-snippet__number">1</span>-d<span class="code-snippet__number">1</span>-c<span class="code-snippet__number">8</span>-r<span class="code-snippet__number">16000</span>-<span class="code-snippet__selector-tag">b</span><span class="code-snippet__number">16</span>-<span class="code-snippet__selector-tag">p</span><span class="code-snippet__number">1024</span>-n<span class="code-snippet__number">3</span></span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">4</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：分析录音文件</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">将录音文件导出到</span></span></font><span><span style="background-color:rgb(255,255,255);">PC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">Adobe Audition</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">或</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">Au<a href="https://www.elecfans.com/tags/dac/" target="_blank"><u>dac</u></a>ity</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">打开，查看</span></span></font><span><span style="background-color:rgb(255,255,255);">8</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个通道的波形：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">1-2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道：回采<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>（若播放了测试音频，应有波形）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">3-8</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">拾音（说话时应有波形，静音时无杂波）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">4.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第四步：多</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">算法集成（对接</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">AI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">降噪</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">回声消除）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_360" target="_blank"><u>Android</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原生录音机仅支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1-2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道，需集成第三方多</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">算法（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">AEC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、波束成形），核心是在</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">tinyalsa_hal</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中嵌入算法，步骤如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：修改</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TinyALSA HAL</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，关闭原生降噪</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// 路径：hardware/rockchip/audio/tinyalsa_hal/audio_hw.h</span></span></code><code><span><span class="code-snippet__meta">#</span><span class="code-snippet__meta"><span class="code-snippet__keyword">ifndef</span></span><span class="code-snippet__meta">RK3368</span></span></code><code><span><span class="code-snippet__comment">// 注释掉原生SPEEX降噪，避免与第三方算法冲突</span></span></code><code><span>+<span class="code-snippet__comment">//#define SPEEX_DENOISE_ENABLE</span></span></code><code><span>-<span class="code-snippet__meta">#</span><span class="code-snippet__meta"><span class="code-snippet__keyword">define</span></span><span class="code-snippet__meta">SPEEX_DENOISE_ENABLE</span></span></code><code><span><span class="code-snippet__meta">#</span><span class="code-snippet__meta"><span class="code-snippet__keyword">endif</span></span></span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：屏蔽通道固定代码（避免强制</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道）</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment">// 路径：external/tinyalsa/pcm.c</span></span></code><code><span><span class="code-snippet__comment">// 注释掉以下代码（强制通道检查的逻辑）</span></span></code><code><span><span class="code-snippet__comment">/*</span></span></code><code><span>if(!(pcm-&gt;config.channels == 1)) {</span></code><code><span>  if(channalFlags == -1 ) {</span></code><code><span>    if(startCheckCount &lt; SAMPLECOUNT) {</span></code><code><span>      startCheckCount += count;</span></code><code><span>    } else {</span></code><code><span>      channalFlags = channel_check(data,count/2);</span></code><code><span>    }</span></code><code><span>  }//if(channalFlags == -1)</span></code><code><span>  channel_fixed(data,count/2, channalFlags);</span></code><code><span>}</span></code><code><span>*/</span></code></pre>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：嵌入第三方算法</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">hardware/rockchip/audio/tinyalsa_hal/</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的录音流程中（如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">audio_hw.c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">start_input_stream</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">函数），添加算法调用：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">从</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">pcmCxD1c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">读取</span></span></font><span><span style="background-color:rgb(255,255,255);">8</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道原始数据；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调用算法处理（如</span></span></font><span><span style="background-color:rgb(255,255,255);">AEC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">消回音、降噪）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输出</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道处理后的数据（供原生</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">APP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">使用）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">算法集成框架参考：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixWAACCYAABgw75klw8313.png" alt="wKgZPGkaixWAACCYAABgw75klw8313.png"/><h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、常见问题与解决方案（避坑指南）</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：录音只有</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道，无</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道？</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Codec</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">channels_max</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">未设为</span></span></font><span><span style="background-color:rgb(255,255,255);">8</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ES8323</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动需改</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">channels_max = 8</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：内核</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">I2S</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动未强制</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3399</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">需改</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rockchip_i2s.c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决：检查</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">codec</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动</span></span></font></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">rockchip_i2s.c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的通道配置，确保均为</span></span></font><span><span style="background-color:rgb(255,255,255);">8</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：部分</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道无波形？</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PDM/I2S</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">引脚未配置（需在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DTS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">pinctrl-0</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中添加所有</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的引脚）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件故障（如虚焊、供电不足）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决：先检查</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">引脚配置，再用<a href="https://www.elecfans.com/v/tag/577/" target="_blank"><u>示波器</u></a>测量</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口的<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>与数据信号。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：回采通道无波形？</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：未打开回采功能（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Codec</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">需配置</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">adc-for-loopback</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：未播放测试音频（回采需先通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">tinyplay</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">播放音频）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决：确认</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">adc-for-loopback</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">已启用，且录音时播放了测试音频。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">4.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：算法集成后无输出？</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原因</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">tinyalsa_hal</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">未读取正确的录音节点（默认是</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">pcmC0D0c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，需改为多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">pcmC1D1c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">解决：在</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">audio_hw.c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">中修改</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">pcm_open</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的参数，指定多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的声卡</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ID</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">和设备</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ID</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、开发资源汇总</span></span></font></span></b></h2>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键文件路径（全局搜索关键词）</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">arch/arm64/boot/dts/rockchip/</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（搜索</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">pdm</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">i2s</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">mic-array</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核驱动：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">kernel/sound/soc/rockchip/rockchip_i2s.c</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">kernel/sound/soc/codecs/</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（搜索</span></span></font><span><span style="background-color:rgb(255,255,255);">Codec</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">型号如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">es8323</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">TinyALSA</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">external/tinyalsa/</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">hardware/rockchip/audio/tinyalsa_hal/</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具下载</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频分析：</span></span></font></span><u><span><span><span style="background-color:rgb(255,255,255);">Audacity</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（免费）</span></span></font></span></u><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><span><span style="background-color:rgb(255,255,255);">Adobe Audition</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">ADB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具：</span></span></font></span><u><span><span><span style="background-color:rgb(255,255,255);">Android SDK Platform Tools</span></span></span></u><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">五、总结</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">瑞芯微多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发的核心是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font></span><b><span><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置通道</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核适配</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">8</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">算法处理多通道数据</span></span></font></span></b><span><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，不同芯片的差异主要在接口（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PDM/I2S</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）与文件路径，<a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>可按以下流程快速落地：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">确定芯片的</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">PDM/I2S</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）与参考</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DTS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置</span></span></font><span><span style="background-color:rgb(255,255,255);">DTS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">cpu_dai</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">codec_dai</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">与</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dai-link</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试</span></span></font><span><span style="background-color:rgb(255,255,255);">8</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通道录音，验证硬件正常；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">4.</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">集成第三方算法，对接上层</span></span></font><span><span style="background-color:rgb(255,255,255);">APP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">附录：多</span></span></font><span><span style="background-color:rgb(255,255,255);">MIC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发脑图</span></span></font></span></b></h2>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixWAZQfrAANxnMnAnrA668.png" alt="wKgZPGkaixWAZQfrAANxnMnAnrA668.png"/>
		 <p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[Linux音频开发必藏！这个官网藏着从驱动到应用的全套解决方案]]></title>    <link>https://www.elecfans.com/d/7401319.html</link>    <guid>https://www.elecfans.com/d/7401319.html</guid>    <pubDate>2026-02-06 16:56:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<p>
		</p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、被低估的</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_300" target="_blank"><u>Linux</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a></span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">基础设施</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">门户</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">打开</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">alsa-project.org</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，首先会被这句简介击中：</span></span></font><span><span style="background-color:rgb(255,255,255);">"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Linux</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统提供音频与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MIDI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">功能的核心架构</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。作为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2.6</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本后</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Linux</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核默认的音频子系统，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ALSA</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">早已渗透进我们熟悉的场景</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——Ubuntu</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的音乐播放、<a href="https://www.elecfans.com/soft/data/21-22/" target="_blank"><u>嵌入式</u></a>设备的语音交互、专业音频工作站的多轨录制，背后都有它的支撑。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">但多数<a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>只知其名，却忽略了这个官网才是最权威的</span></span></font><span><span style="background-color:rgb(255,255,255);">"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">技术圣经</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。它不仅是项目主页，更是集文档、工具、驱动于一体的一站式工作台。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixSANHrKAALbytMffp4033.png" alt="wKgZPGkaixSANHrKAALbytMffp4033.png"/><h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、官网四大核心板块，解决</span></span></font><span><span style="background-color:rgb(255,255,255);">90%</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频开发难题</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">文档<a href="https://www.hqchip.com/tags" target="_blank"><u>中心</u></a>：从入门到精通的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">活字典</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">架构手册</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：清晰<a href="https://m.elecfans.com/v/tag/899/" target="_blank"><u>拆解</u></a>用户空间（</span></span></font><span><span style="background-color:rgb(255,255,255);">alsa-lib</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、工具集）与内核空间（核心层、驱动层）的分层设计，连</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">snd_card</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡抽象结构体、</span></span></font><span><span style="background-color:rgb(255,255,255);">PCM</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>工作流程等底层细节都有图文解析。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">实用指南</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：比如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">pcm_plugins.html</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">页面详细讲解</span></span></font><span><span style="background-color:rgb(255,255,255);">dmix</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">软件混音配置，只需修改</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">asound.conf</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">就能实现多应用同时发声，再也不用头疼设备占用问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">A<a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>PI</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">速查</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">alsa-lib</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">arecord</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">录音、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">amixer</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">音量控制等接口文档自带示例代码，复制粘贴就能快速验证功能。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具下载：开箱即用的调试</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">瑞士军刀</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">官网提供全套官方工具包，涵盖开发全流程：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">基础工具</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">aplay</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">播放</span></span></font><span><span style="background-color:rgb(255,255,255);">WAV</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">arecord</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">录制音频，一行命令即可测试硬件连通性；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试利器</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：终端图形化工具</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">alsamixer</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">可视化调节音量，解决嵌入式设备无界面调试痛点；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动组件</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：支持从消费级声卡到专业多声道设备的驱动包，还提供</span></span></font><span><span style="background-color:rgb(255,255,255);">ASoC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">嵌入式适配方案。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动支持：硬件适配的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">统一接口</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">无论是</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_863" target="_blank"><u>Intel</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">声卡、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1515" target="_blank"><u>USB</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">麦克风还是全志</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SoC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Audio Codec</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，官网都提供标准化驱动框架：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动开发者只需实现硬件回调，应用层就能通过统一</span></span></font><span><span style="background-color:rgb(255,255,255);">API</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">操作设备，无需关心硬件型号差异；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">内置</span></span></font><span><span style="background-color:rgb(255,255,255);">OSS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">兼容层，让旧版应用无缝迁移，省去重写适配代码的麻烦。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><span><span style="background-color:rgb(255,255,255);">4.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">社区交流：问题速解的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">技术朋友圈</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过邮件列表和</span></span></font><span><span style="background-color:rgb(255,255,255);">Wiki</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">贡献区，能直接对接核心开发者：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">嵌入式场景中遇到的</span></span></font><span><span style="background-color:rgb(255,255,255);">Machine</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动链路配置问题，搜历史讨论就能找到<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>瑞芯微</u></a>、全志等平台的适配案例；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">实时跟进内核新特性，比如</span></span></font><span><span style="background-color:rgb(255,255,255);">Linux 5.0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">后新增的压缩卸载功能，官网会第一时间更新适配指南。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、不同场景的</span></span></font><span><span style="background-color:rgb(255,255,255);">"</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">寻宝指南</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">"</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/v/tag/232/" target="_blank"><u>嵌入式开发</u></a>者</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：先看</span></span></font><span><span style="background-color:rgb(255,255,255);">ASoC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">文档，理解</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Codec</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Platform</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Machine</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">三组件的驱动联动逻辑，再下载对应</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">SoC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的参考驱动；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">桌面应用开发</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：直接用工具包的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">aplay</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试音频输出，结合</span></span></font><span><span style="background-color:rgb(255,255,255);">alsa-lib API</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">快速集成播放功能；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动工程师</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：重点研究</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">/sound</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">源码目录结构，</span></span></font><span><span style="background-color:rgb(255,255,255);">core</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心层与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">pci/usb</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备驱动的实现范式全在其中。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、为什么一定要收藏这个官网？</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">比起零散的博客笔记，官网的优势无可替代：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">权威性</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：所有文档由项目核心团队维护，与内核版本同步更新；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">实用性</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：工具和驱动经过千锤百炼，兼容性远超第三方封装；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">前瞻性</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：最新的采样率转换、<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>同步等技术，这里总是第一个发布指南。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">下次遇到</span></span></font><span><span style="background-color:rgb(255,255,255);">Linux</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">音频问题，别再到处搜教程了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">打开</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">alsa-project.org</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，你要的答案都在这里。</span></span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>
<br/>]]></description></item><item>    <title><![CDATA[面向企业办公场景的智能照明系统建设思路]]></title>    <link>https://www.elecfans.com/d/7641986.html</link>    <guid>https://www.elecfans.com/d/7641986.html</guid>    <pubDate>2026-02-06 16:57:00</pubDate>    <description><![CDATA[<p>
	安科瑞刘鸿鹏 172 一 ⑥⑨⑦② 一 5322</p>
<p>
	在企业办公大楼中，照明系统几乎全天候运行，看似“基础”，却往往是能耗高、管理粗放、投诉频繁的子系统之一。灯常亮却无人使用、不同办公区域照度不匹配、加班与节假日用电混乱、人工巡检效率低下，这些问题长时存在，却很少被系统性解决。<br/>
	智能照明<a href="https://www.elecfans.com/v/tag/8966/" target="_blank"><u>控制系统</u></a>，正是在这样的背景下逐步成为现代办公建筑的重要基础设施。它并不是简单的“远程开关灯”，而是通过感知环境、理解使用需求，并结合统一管理策略，让照明真正服务于办公效率、能耗管理与人员舒适度。<br/>
	</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/15/wKgZO2mFrQ-AF9KnAAJzDBlmVEk992.png" alt="wKgZO2mFrQ-AF9KnAAJzDBlmVEk992.png"/></p>
<p>
	从“被动照明”到“主动响应”，办公空间发生了变化</p>
<p>
	传统办公照明以人工控制为主，更多依赖使用者自觉。而在企业办公大楼中，人员流动具有明显的时间性与区域性差异，例如会议室、走廊、电梯厅、公共办公区与加班区域，对照明的需求并不相同。</p>
<p>
	智能照明系统通过照度探测、人体存在感知以及时间策略的协同，使照明从“始终开启”转变为“按需响应”。当自然采光充足时，系统可自动降低人工照明亮度；人员离开后，灯光在延时后自动关闭；下班时间、节假日与特殊活动日的照明策略也可提规划并自动执行，从而避免人为遗漏带来的浪费。</p>
<p>
	这种变化的直接结果，是办公楼整体照明能耗显著下降，同时员工几乎感受不到任何额外操作负担。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFrQ-ALaCfAAR3nyOzais397.png" alt="wKgZPGmFrQ-ALaCfAAR3nyOzais397.png"/></p>
<p>
	办公舒适度提升，不只是“亮一点”这么简单</p>
<p>
	企业办公大楼对照明的要求，早已不只是满足低照度标准。长时间伏案工作，对光环境的稳定性、眩光控制、色温变化都有更高要求。</p>
<p>
	智能照明系统支持精细化调光与场景管理，使不同区域在不同时段呈现更适合办公的光环境。上午偏高色温、提高清醒度，午后适度柔和，减少视觉疲劳；会议模式、演示模式、清洁模式等照明场景一键切换，让照明真正融入办公流程，而不是干扰流程。</p>
<p>
	这种以人为<a href="https://www.hqchip.com/tags" target="_blank"><u>中心</u></a>的照明方式，在实际应用中往往能明显降低员工对照明问题的投诉率，也有助于提升整体办公体验。</p>
<p>
	集中管理，让照明成为“可管、可算、可分析”的系统</p>
<p>
	对于物业管理方和企业后勤部门而言，照明系统是否“好用”，不仅取决于现场效果，更取决于后台是否清晰、可控。</p>
<p>
	智能照明系统支持集中管理平台，可对办公楼内各区域照明状态、能耗情况与设备运行状态进行统一展示与记录。管理人员无需逐层巡检，即可掌握哪些区域长时间高负载运行，哪些回路存在异常，哪些策略仍有优化空间。照明不再是“黑箱”，而是一个可量化、可分析、可持续优化的管理对象。</p>
<p>
	在大型办公园区或多栋写字楼场景中，这种集中化管理优势尤为明显。</p>
<p>
	<img src="https://file1.elecfans.com//web3/M00/4B/14/wKgZPGmFrRGAdRhMAAbO1XHpX3I057.png" alt="wKgZPGmFrRGAdRhMAAbO1XHpX3I057.png"/></p>
<p>
	与建筑系统协同运行，构建更完整的智能办公体系</p>
<p>
	在现代企业办公大楼中，照明并不是孤立存在的系统。智能照明可通过<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>与楼宇自控、能效管理平台以及消防系统等实现联动运行。</p>
<p>
	例如，在消防事件发生时，照明系统可自动切换至应急状态；在能耗管理平台中，照明数据可与空调、电力等用能信息统一分析；在智慧楼宇体系下，照明作为子系统接入统一平台，减少系统割裂带来的运维复杂度。</p>
<p>
	这种“可集成”的能力，使智能照明不仅服务当下，更为办公建筑的长时数字化升打下基础。</p>
<p>
	</p>
<p>
	结语：照明系统，正在成为办公楼精细化管理的起点</p>
<p>
	对于企业办公大楼而言，智能照明并非可有可无的“高配”，而是一种兼顾节能、安全、舒适与管理效率的基础能力。它以照明为切入口，帮助企业逐步建立起对建筑能耗与运行状态的感知能力。</p>
<p>
	当灯光开始“思考”，办公空间也随之变得更加有效、有序且可持续。这，正是智能照明在企业办公大楼中真正的价值所在。</p>
<p>
	审核编辑 黄宇</p>]]></description></item><item>    <title><![CDATA[RK平台声卡基础知识总结（基于ALSA框架）]]></title>    <link>https://www.elecfans.com/d/7401318.html</link>    <guid>https://www.elecfans.com/d/7401318.html</guid>    <pubDate>2026-02-06 16:58:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">一、核心概述</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:#ffffff;">RK</span></span><font face="等线"><span><span style="background-color:#ffffff;">平台声卡基于</span></span></font></span><b><span><span><span style="background-color:#ffffff;">ALSA</span></span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;"><a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>Ad</u></a>vanced <a href="https://bbs.elecfans.com/group_300" target="_blank"><u>Linux</u></a> Sound Archi<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>cture</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）框架</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">构建，核心目标是实现<a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a>数据的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">采集</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">-</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">传输</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">-</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">处理</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">-</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">输出</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">全链路管理。其本质是通过多个功能模块的协作，将</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">SoC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">内部的数字音频<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>与外部音频设备（麦克风、耳机、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;"><a href="https://www.hqchip.com/app/1685" target="_blank"><u>HDMI</u></a></span></span></font><font face="等线"><span><span style="background-color:#ffffff;">等）连接，同时解决数据同步、格式兼容、硬件适配等问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:#ffffff;">根据《</span></span></font><span><span style="background-color:#ffffff;"><a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>Rockchip</u></a> Audio</span></span><font face="等线"><span><span style="background-color:#ffffff;">开发指南》，</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">RK</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">平台声卡的核心特点是</span></span></font></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">模块化设计</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">和</span></span></font></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">高灵活性</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">，支持</span></span></font><span><span style="background-color:#ffffff;">I2S/SAI/PDM</span></span><font face="等线"><span><span style="background-color:#ffffff;">等多种数字音频<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>、内部</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">/</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">外部</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">组合，以及多声道、异步采样率转换（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">ASRC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）、数字回采（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DLP</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）等高级功能，可适配<a href="https://www.elecfans.com/v/tag/663/" target="_blank"><u>智能家居</u></a>、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">SoundBar</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">OTT</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">盒子等多种场景。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">二、声卡核心构成组件</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:#ffffff;">RK</span></span><font face="等线"><span><span style="background-color:#ffffff;">平台声卡由</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">5</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">大核心组件构成，各组件职责明确且协同工作，具体定义与功能如下：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">组件</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">英文全称</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">核心作用</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">RK</span></span><font face="等线"><span><span style="background-color:#ffffff;">平台特有细节</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">DAI</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">Digital Audio Interface</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">数字音频接口，连接</span></span></font><span><span style="background-color:#ffffff;">SoC</span></span><font face="等线"><span><span style="background-color:#ffffff;">与</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，负责传输数字音频信号（时序控制、格式解析）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">支持</span></span></font><span><span style="background-color:#ffffff;">SAI</span></span><font face="等线"><span><span style="background-color:#ffffff;">（灵活协议）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">I2S/I2S-TDM</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（多声道）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">PDM</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（数字麦）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">SPDIF</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（数字输出）等类型</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">MACHINE</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">声卡整合层</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">关联</span></span></font><span><span style="background-color:#ffffff;">DAI</span></span><font face="等线"><span><span style="background-color:#ffffff;">与</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，配置音频拓扑（如协议格式、<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>主从），生成最终声卡设备</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">支持</span></span></font><span><span style="background-color:#ffffff;"><a href="https://m.hqchip.com/app/1522" target="_blank"><u>Sim</u></a>ple Card</span></span><font face="等线"><span><span style="background-color:#ffffff;">（通用场景）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Multi Codecs Machine Driver</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（多</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">场景）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;"><a href="https://www.elecfans.com/tags/dma/" target="_blank"><u>DMA</u></a>ENGINE</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">DMA</span></span><font face="等线"><span><span style="background-color:#ffffff;"><a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a></span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">实现内存（</span></span></font><span><span style="background-color:#ffffff;"><a href="https://www.hqchip.com/app/1729" target="_blank"><u>DDR</u></a>/S<a href="https://www.elecfans.com/tags/ram/" target="_blank"><u>RAM</u></a></span></span><font face="等线"><span><span style="background-color:#ffffff;">）与</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI FIFO</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">之间的高速数据传输，避免</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;"><a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>CPU</u></a></span></span></font><font face="等线"><span><span style="background-color:#ffffff;">占用</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">支持</span></span></font><span><span style="background-color:#ffffff;">PL330</span></span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">8</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">通道限制）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">RKDMA</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（无通道限制），可动态申请释放通道（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CONFIG_SND_SOC_DYNAMIC_DMA_CHAN</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">CODEC</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">Coder-Decoder</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">实现</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;"><a href="https://www.hqchip.com/app/1381" target="_blank"><u>数字信号</u></a></span></span></font><font face="等线"><span><span style="background-color:#ffffff;"><a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>信号</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">转换，含增益控制、滤波、静音等功能</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">分内部</span></span></font><span><span style="background-color:#ffffff;">CODEC</span></span><font face="等线"><span><span style="background-color:#ffffff;">（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">RK812/RK817</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，集成于</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;"><a href="https://www.hqchip.com/app/1731" target="_blank"><u>PMIC</u></a></span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）、外部</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">ES8388</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">TAS5731</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Combo CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">HDMI +</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">模拟输出）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">PCM</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">Pulse Code Modulation</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">ALSA</span></span><font face="等线"><span><span style="background-color:#ffffff;">框架的核心接口，向上提供应用层访问接口（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">aplay/arecord</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">），向下适配硬件</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">支持多种采样率（</span></span></font><span><span style="background-color:#ffffff;">8k~384k</span></span><font face="等线"><span><span style="background-color:#ffffff;">）、位宽（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">16bit~32bit</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）、声道数（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">2CH~256CH</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">三、声卡数据传输流程（附流程图）</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:#ffffff;">RK</span></span><font face="等线"><span><span style="background-color:#ffffff;">平台声卡的数据流分为</span></span></font></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">播放（输出）</span></span></font></span></b><span><span><span style="background-color:#ffffff;"/></span><font face="等线"><span><span style="background-color:#ffffff;">和</span></span></font></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">录音（输入）</span></span></font></span></b><span><span><span style="background-color:#ffffff;"/></span><font face="等线"><span><span style="background-color:#ffffff;">两大方向，所有数据均通过</span></span></font><span><span style="background-color:#ffffff;">DMAENGINE</span></span><font face="等线"><span><span style="background-color:#ffffff;">实现无</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CPU</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">干预的传输，确保低延迟和高稳定性。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">1.</span></span><font face="等线"><span><span style="background-color:#ffffff;">播放流程（数字</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">→</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">模拟</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">/</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">数字输出）</span></span></font></span></b></h3>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixSABarZAAA2MYjCJjs194.png" alt="wKgZPGkaixSABarZAAA2MYjCJjs194.png"/><h3>
		<b><span><span><span style="background-color:#ffffff;">2.</span></span><font face="等线"><span><span style="background-color:#ffffff;">录音流程（模拟</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">/</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">数字输入</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">→</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">数字）</span></span></font></span></b></h3>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixSAd5rwAAA3C3mvbnQ226.png" alt="wKgZPGkaixSAd5rwAAA3C3mvbnQ226.png"/><h3>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">关键说明</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">时序同步</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font><span><span style="background-color:#ffffff;">DAI</span></span><font face="等线"><span><span style="background-color:#ffffff;">负责与</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">协商时钟（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">MCLK/BCLK/LRCK</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）和协议格式（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">I2S</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">TDM</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">），确保数据传输无错位；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">无</span></span></font><span><span style="background-color:#ffffff;">CPU</span></span><font face="等线"><span><span style="background-color:#ffffff;">干预</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font><span><span style="background-color:#ffffff;">DMAENGINE</span></span><font face="等线"><span><span style="background-color:#ffffff;">直接管理内存与</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI FIFO</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">的数据搬运，仅在缓冲区满</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">/</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">空时触发中断通知</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CPU</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">格式适配</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：若输入输出采样率不一致（如</span></span></font><span><span style="background-color:#ffffff;">UAC</span></span><font face="等线"><span><span style="background-color:#ffffff;">场景），可通过</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">ASRC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（异步采样率<a href="https://www.hqchip.com/app/1718" target="_blank"><u>转换器</u></a>）进行实时转换，避免失真。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">四、</span></span></font><span><span style="background-color:#ffffff;">RK</span></span><font face="等线"><span><span style="background-color:#ffffff;">平台声卡核心子模块详解</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">1. DAI</span></span><font face="等线"><span><span style="background-color:#ffffff;">（数字音频接口）：声卡的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">传输中枢</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:#ffffff;">DAI</span></span><font face="等线"><span><span style="background-color:#ffffff;">是</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">SoC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">与</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">桥梁</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">RK</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">平台支持多种</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">类型，适配不同场景需求：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">DAI</span></span><font face="等线"><span><span style="background-color:#ffffff;">类型</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">核心特点</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">支持声道数</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">典型应用场景</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">SAI</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">协议灵活（可构造</span></span></font><span><span style="background-color:#ffffff;">I2S/<a href="https://www.hqchip.com/app/1378" target="_blank"><u>DSP</u></a>/TDM</span></span><font face="等线"><span><span style="background-color:#ffffff;">时序）、支持多</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Lane</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">合并、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">FIFO</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">交织配置</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">8CH IN/OUT</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">SoundBar</span></span><font face="等线"><span><span style="background-color:#ffffff;">（多声道输出）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Mic Array</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">I2S</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">支持标准</span></span></font><span><span style="background-color:#ffffff;">I2S/PCM</span></span><font face="等线"><span><span style="background-color:#ffffff;">协议，时钟补偿（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;"><a href="https://m.hqchip.com/app/1703" target="_blank"><u>AC</u></a>C</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">8CH IN/OUT</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">普通音频设备（耳机、单麦克风）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">I2S-TDM</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">基于</span></span></font><span><span style="background-color:#ffffff;">I2S</span></span><font face="等线"><span><span style="background-color:#ffffff;">扩展，支持</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">TDM</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">协议，可异步</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">/</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">同步模式</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">16CH IN/OUT</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">多麦克风阵列、多声道录音</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">PDM</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">仅</span></span></font><span><span style="background-color:#ffffff;">Master</span></span><font face="等线"><span><span style="background-color:#ffffff;">模式，支持数字麦克风阵列，含<a href="https://www.elecfans.com/tags/高通/" target="_blank"><u>高通</u></a>滤波（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">HPF</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">8CH IN / 2CH OUT</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">智能家居（远场语音唤醒）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">SPDIF</span></span></span></b></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">支持</span></span></font><span><span style="background-color:#ffffff;"><a href="https://www.elecfans.com/tags/lpc/" target="_blank"><u>LPC</u></a>M</span></span><font face="等线"><span><span style="background-color:#ffffff;">（无损）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DD/DTS</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（压缩）格式，数字透传</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">2CH</span></span><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">LPCM</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">/7.1CH</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（压缩）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="230">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">家庭影院（</span></span></font><span><span style="background-color:#ffffff;">HDMI /</span></span><font face="等线"><span><span style="background-color:#ffffff;">光纤输出）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><h3>
		<b><span><span><span style="background-color:#ffffff;">2. CODEC</span></span><font face="等线"><span><span style="background-color:#ffffff;">（编解码器）：</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">数模转换核心</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:#ffffff;">CODEC</span></span><font face="等线"><span><span style="background-color:#ffffff;">是实现</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">数字信号</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">模拟信号</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">转换的关键，</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">RK</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">平台分为两类：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">内部</span></span></font><span><span style="background-color:#ffffff;">CODEC</span></span></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：集成于</span></span></font><span><span style="background-color:#ffffff;">SoC</span></span><font face="等线"><span><span style="background-color:#ffffff;">或</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">PMIC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，成本低、适配简单，如：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><span><span style="background-color:#ffffff;">RK812/RK817</span></span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">PMIC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">集成</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，支持立体声</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;"><a href="https://www.elecfans.com/tags/dac/" target="_blank"><u>DAC</u></a>/<a href="https://www.elecfans.com/tags/adc/" target="_blank"><u>ADC</u></a></span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，可直驱外部</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">PA</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><span><span style="background-color:#ffffff;"><a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>ODEC</span></span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">SoC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">内置数字</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，支持</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DSM</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Delta Sigma Modulation</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）模式，节省外部</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">PA</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">成本。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">外部</span></span></font><span><span style="background-color:#ffffff;">CODEC</span></span></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：独立芯片，音质优、功能丰富，需通过</span></span></font><span><span style="background-color:#ffffff;"><a href="https://www.elecfans.com/tags/i2c/" target="_blank"><u>I2C</u></a>/SPI</span></span><font face="等线"><span><span style="background-color:#ffffff;">控制，如：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><span><span style="background-color:#ffffff;">ES8388</span></span><font face="等线"><span><span style="background-color:#ffffff;">：立体声</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，支持高信噪比（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">SNR≥95dB</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><span><span style="background-color:#ffffff;">TAS5731</span></span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">D</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">类功放</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，适合大音量场景（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">SoundBar</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:#ffffff;">3. MACHINE</span></span><font face="等线"><span><span style="background-color:#ffffff;">（声卡整合层）：</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">配置管家</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:#ffffff;">MACHINE</span></span><font face="等线"><span><span style="background-color:#ffffff;">的核心是</span></span></font></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">解析</span></span></font><span><span style="background-color:#ffffff;">DTS</span></span><font face="等线"><span><span style="background-color:#ffffff;">配置</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">并</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">绑定</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">” DAI</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">与</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，避免开发人员重复编写驱动。</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">RK</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">平台支持两种主流</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">MACHINE</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">驱动：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><span><span style="background-color:#ffffff;">Simple Card</span></span></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：适用于</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“1</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">个</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI+1</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">个</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">的通用场景，通过</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DTS</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">配置协议格式（如</span></span></font></span><span><span><span style="background-color:#ffffff;">simple-audio-card,format = "i2s"</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">）、时钟主从（</span></span></font></span><span><span><span style="background-color:#ffffff;">simple-audio-card,bitclock-master</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">）等参数，无需编写额外代码；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span><span><span style="background-color:#ffffff;">Multi Codecs Machine Driver</span></span></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：适用于</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“1</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">个</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI/Combo DAI +</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">多个</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">的复杂场景（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">HDMI +</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">模拟输出、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI+VAD</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">），需通过</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DTS</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">配置</span></span></font></span><span><span><span style="background-color:#ffffff;">rockchip,codec</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">列表和音频路由（</span></span></font></span><span><span><span style="background-color:#ffffff;">rockchip,audio-rou<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>ti</u></a>ng</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">五、</span></span></font><span><span style="background-color:#ffffff;">RK</span></span><font face="等线"><span><span style="background-color:#ffffff;">平台声卡开发关键点</span></span></font></span></b></h2>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">驱动开发重点</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">多数场景下，基于</span></span></font><span><span style="background-color:#ffffff;">RK <a href="https://www.hqchip.com/app/1522" target="_blank"><u>SD</u></a>K</span></span><font face="等线"><span><span style="background-color:#ffffff;">开发只需</span></span></font></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">移植</span></span></font><span><span style="background-color:#ffffff;">/</span></span><font face="等线"><span><span style="background-color:#ffffff;">编写</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">驱动</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">（如</span></span></font><span><span style="background-color:#ffffff;">I2C</span></span><font face="等线"><span><span style="background-color:#ffffff;">接口的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">ES8388</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">驱动）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">仅在多</span></span></font><span><span style="background-color:#ffffff;">CODEC</span></span><font face="等线"><span><span style="background-color:#ffffff;">、特殊时序（如自定义</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">TDM</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）场景下，需编写</span></span></font></span><b><span><span><span style="background-color:#ffffff;">MACHINE</span></span><font face="等线"><span><span style="background-color:#ffffff;">驱动</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span><span><span style="background-color:#ffffff;">DAI</span></span><font face="等线"><span><span style="background-color:#ffffff;">驱动已由</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">RK</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">提供（如</span></span></font></span><span><span><span style="background-color:#ffffff;">rockchip_i2s.c</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font></span><span><span><span style="background-color:#ffffff;">rockchip_sai.c</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">），无需修改，仅需通过</span></span></font><span><span style="background-color:#ffffff;">DTS</span></span><font face="等线"><span><span style="background-color:#ffffff;">配置属性（如时钟、协议）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">核心代码路径</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">（内核源码）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>kernel/sound/soc/rockchip/ <span class="code-snippet__comment"># RK平台核心音频驱动</span></span></code><code><span>├─ rockchip_asrc.c     <span class="code-snippet__comment"># ASRC驱动</span></span></code><code><span>├─ rockchip_i2s.c     <span class="code-snippet__comment"># I2S驱动</span></span></code><code><span>├─ rockchip_i2s_tdm.c   <span class="code-snippet__comment"># I2S-TDM驱动</span></span></code><code><span>├─ rockchip_pdm.c     <span class="code-snippet__comment"># PDM驱动</span></span></code><code><span>├─ rockchip_sai.c     <span class="code-snippet__comment"># SAI驱动</span></span></code><code><span>└─ rockchip_multicodecs.c <span class="code-snippet__comment"># Multi Codecs Machine驱动</span></span></code><code><span>kernel/sound/soc/codecs/  <span class="code-snippet__comment"># CODEC驱动</span></span></code><code><span>├─ rk817_codec.c      <span class="code-snippet__comment"># 内部CODEC（RK817）</span></span></code><code><span>├─ es8388.c        <span class="code-snippet__comment"># 外部CODEC（ES8388）</span></span></code><code><span>└─ hdmi-codec.c      <span class="code-snippet__comment"># HDMI CODEC</span></span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">声卡添加步骤</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">a.</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">使能内核配置（如</span></span></font></span><span><span><span style="background-color:#ffffff;">CONFIG_SND_SIMPLE_CARD</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font></span><span><span><span style="background-color:#ffffff;">CONFIG_SND_SOC_ROCKCHIP_I2S</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">b.</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">在</span></span></font><span><span style="background-color:#ffffff;">DTS</span></span><font face="等线"><span><span style="background-color:#ffffff;">中使能</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">节点（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">I2S/SAI</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">），配置引脚、时钟；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">c.</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">在</span></span></font><span><span style="background-color:#ffffff;">DTS</span></span><font face="等线"><span><span style="background-color:#ffffff;">中添加</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">节点（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">I2C</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">总线下的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">ES8388</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">d.</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">添加</span></span></font><span><span style="background-color:#ffffff;">MACHINE</span></span><font face="等线"><span><span style="background-color:#ffffff;">节点（如</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Simple Card</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">），关联</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">与</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">e.</span></span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">编译内核，通过</span></span></font></span><span><span><span style="background-color:#ffffff;">cat /proc/asound/cards</span></span></span><span><font face="等线"><span><span style="background-color:#ffffff;">验证声卡注册成功。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">六、声卡构成脑图</span></span></font></span></b></h2>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixSAKkj_AAGzrglaHZI956.png" alt="wKgZPGkaixSAKkj_AAGzrglaHZI956.png"/><h2>
		<b><span><font face="等线"><span><span style="background-color:#ffffff;">七、关键总结</span></span></font></span></b></h2>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">模块化设计</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font><span><span style="background-color:#ffffff;">RK</span></span><font face="等线"><span><span style="background-color:#ffffff;">声卡的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">MACHINE</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">等组件解耦，开发时可聚焦</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">移植</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">和</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“MACHINE</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">配置</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，降低复杂度；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">灵活性适配</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：通过</span></span></font><span><span style="background-color:#ffffff;">SAI</span></span><font face="等线"><span><span style="background-color:#ffffff;">的灵活协议、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Combo DAI</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">的多接口组合、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">ASRC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">的异步同步，可覆盖从简单耳机到复杂多声道系统的场景；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">3.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:#ffffff;">开发简化</span></span></font></span></b><span><font face="等线"><span><span style="background-color:#ffffff;">：</span></span></font><span><span style="background-color:#ffffff;">RK SDK</span></span><font face="等线"><span><span style="background-color:#ffffff;">已提供完善的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DAI</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">驱动和</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">MACHINE</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">模板，多数场景下仅需修改</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">DTS</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">和</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">驱动，无需从零开发。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:#ffffff;">如需进一步调试（如播放无声、录音失真），可使用<a href="https://www.elecfans.com/v/tag/577/" target="_blank"><u>示波器</u></a>（测时钟</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">/</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">数据）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">aplay/arecord</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（定位用户态</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">/</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">内核态问题）、</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">amixer</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（控制</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">CODEC</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">通路）等工具。</span></span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[Linux内核bug狩猎指南：从栈跟踪到修复，官方文档教你搞定系统核心故障]]></title>    <link>https://www.elecfans.com/d/7401315.html</link>    <guid>https://www.elecfans.com/d/7401315.html</guid>    <pubDate>2026-02-06 16:59:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">内核是</span></span></font><span><span style="background-color:#ffffff;"><a href="https://bbs.elecfans.com/group_300" target="_blank"><u>Linux</u></a></span></span><font face="等线"><span><span style="background-color:#ffffff;">系统的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">心脏</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”——</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">一旦它出</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">bug</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，小则功能异常，大则系统崩溃、死机。但内核</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">bug</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">往往藏在百万行代码中，想快速定位、修复绝非易事。</span></span></font></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixKAEFOlAAG3zpFDihU196.png" alt="wKgZPGkaixKAEFOlAAG3zpFDihU196.png"/><p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">好在</span></span></font><span><span style="background-color:#ffffff;">Linux</span></span><font face="等线"><span><span style="background-color:#ffffff;">内核官方提供了一份详细的《</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">bug</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">狩猎手册》（</span></span></font></span><u><span style="font-family:Arial;color:rgb(5,99,193);text-decoration:underline;"><span><span style="background-color:#ffffff;">kernel.org/doc/html/latest/<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a>min-guide/bug-hun<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>ti</u></a>ng.html</span></span></span></u><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">），从识别日志<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>到提交修复补丁，全程<a href="https://m.elecfans.com/v/tag/899/" target="_blank"><u>拆解</u></a>实用方法。今天我们就基于这份权威文档，梳理一套</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">内核</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">bug</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">排查实操指南</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，帮你高效解决内核故障。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:#ffffff;">一、先看懂内核的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">求救信号</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">：栈跟踪与</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Oops</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">信息</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">当内核遇到</span></span></font><span><span style="background-color:#ffffff;">bug</span></span><font face="等线"><span><span style="background-color:#ffffff;">时，不会</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">沉默</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”——</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">它会输出</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">栈跟踪（</span></span></font><span><span style="background-color:#ffffff;">st<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>k dump</span></span><font face="等线"><span><span style="background-color:#ffffff;">）</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;"/></span><font face="等线"><span><span style="background-color:#ffffff;">日志，告诉你</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">哪里出了问题</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">。这类日志通常分两种场景：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:#ffffff;">1.</span></span><font face="等线"><span><span style="background-color:#ffffff;">常见的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">警告型</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">日志（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">WARNING</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">比如文档中给出的例子，内核会明确标出出错的</span></span></font><span><span style="background-color:#ffffff;"><a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>CPU</u></a></span></span><font face="等线"><span><span style="background-color:#ffffff;">、进程、代码位置：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>------------[<span class="code-snippet__built_in">cut</span>here ]------------</span></code><code><span>WARNING: CPU: 1 <a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>PI</u></a>D: 28102 at kernel/module.c:1108 module_put+0x57/0x70</span></code><code><span>Modules linked<span class="code-snippet__keyword">in</span>: dvb_<a href="https://www.hqchip.com/app/1515" target="_blank"><u>usb</u></a>_gp8psk(-) dvb_usb dvb_core nvidia_drm(PO) ...</span></code><code><span>CPU: 1 PID: 28102 Comm: rmmod T<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>ai</u></a>n<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>d: P    WC O 4.8.4-build.1<span class="code-snippet__comment">#1</span></span></code><code><span>Hardware name: MSI MS-7309/MS-7309, B<a href="https://www.elecfans.com/tags/ios/" target="_blank"><u>IOS</u></a> V1.12 02/23/2009</span></code><code><span>...</span></code><code><span>Call Trace: <span class="code-snippet__comment"># 函数调用栈，记录bug触发时的代码执行路径</span></span></code><code><span>[<c12ba080>] ? dump_stack+0x44/0x64</c12ba080></span></code><code><span>[<c103ed6a>] ? __warn+0xfa/0x120</c103ed6a></span></code><code><span>[<c109e8a7>] ? module_put+0x57/0x70 <span class="code-snippet__comment"># 关键：出错函数及偏移</span></c109e8a7></span></code><code><span>...</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:#ffffff;">2.</span></span><font face="等线"><span><span style="background-color:#ffffff;">严重的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">崩溃型</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">日志（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Oops/BUG</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">如果</span></span></font><span><span style="background-color:#ffffff;">bug</span></span><font face="等线"><span><span style="background-color:#ffffff;">导致内核无法继续运行，会输出带</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“BUG”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">或</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“Oops”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">的日志，比如空指针引用：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>BUG: unable to handle kernel<span class="code-snippet__literal">NULL</span>pointer dereference at  (<span class="code-snippet__literal">null</span>)</span></code><code><span>IP: [<c06969d4>] iret_exc+<span class="code-snippet__number">0x7d0</span>/<span class="code-snippet__number">0xa59</span><span class="code-snippet__comment"># IP=指令指针，指向出错代码地址</span></c06969d4></span></code><code><span>Oops:<span class="code-snippet__number">0002</span>[<span class="code-snippet__comment">#1] PREEMPT SMP</span></span></code><code><span>...</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:#ffffff;">3.</span></span><font face="等线"><span><span style="background-color:#ffffff;">日志中的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">模块标记</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">要注意</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">日志里</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“Modules linked in”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">后的模块名，会带特殊标记，暗示模块状态：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">(PO)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">：模块处于</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">待处理</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">状态（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Pending</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">(-)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">：模块正在卸载；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">(+)</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">：模块正在加载；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">Tainted: P WC O</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">：内核被</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">污染</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（比如加载了非开源模块，影响调试）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:#ffffff;">二、别让关键日志溜走：找到</span></span></font><span><span style="background-color:#ffffff;">Oops</span></span><font face="等线"><span><span style="background-color:#ffffff;">信息的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">3</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">种场景</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">想定位</span></span></font><span><span style="background-color:#ffffff;">bug</span></span><font face="等线"><span><span style="background-color:#ffffff;">，首先得拿到完整的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Oops</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">日志</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">——</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">内核会把日志存在不同地方，分场景获取：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:#ffffff;">1.</span></span><font face="等线"><span><span style="background-color:#ffffff;">系统还能操作：从常规日志文件拿</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">内核默认通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">klogd</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">把日志传给</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">syslogd</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">，存到这些位置：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">传统系统：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">/var/log/messages</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">（路径由</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">/etc/syslog.conf</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">配置）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">systemd</span></span><font face="等线"><span><span style="background-color:#ffffff;">系统：用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">journalctl</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">命令查看（比如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">journalctl -k</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">只看内核日志）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">如果</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">klogd</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">进程意外退出，还能直接读内核缓冲区：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 把缓冲区日志存到文件</span></span></code><code><span>dmesg &gt; kernel_bug.log</span></code><code><span><span class="code-snippet__comment"># 或实时读取（按Ctrl+C停止）</span></span></code><code><span><span class="code-snippet__built_in">cat</span>/proc/kmsg &gt; kernel_bug.log</span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:#ffffff;">2.</span></span><font face="等线"><span><span style="background-color:#ffffff;">系统崩溃卡死：</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">3</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">种</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">救命</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">方法</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">如果机器完全冻住，无法输入命令，试试这</span></span></font><span><span style="background-color:#ffffff;">3</span></span><font face="等线"><span><span style="background-color:#ffffff;">招：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">应急方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">：手抄屏幕日志（或拍照），重启后整理。若日志滚屏太快，可重启时加</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">vga=791</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">（高分辨率模式）显示更多内容（需开启</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">vesafb</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">驱动，早期启动阶段的</span></span></font><span><span style="background-color:#ffffff;">bug</span></span><font face="等线"><span><span style="background-color:#ffffff;">无效）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">提前准备</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">：用</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">串口控制台</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">（参考文档</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">Documentation/admin-guide/serial-console.<a href="https://www.elecfans.com/tags/rs/" target="_blank"><u>rs</u></a>t</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">）</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">——</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">把两台机器用串口线连接，另一台用</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">Minicom</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">等工具捕获日志，适合长期调试；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">专业方案</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">：开启</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">Kdump</span></span></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">（内核崩溃转储）</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">——</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">提前配置后，崩溃时会通过</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">kexec</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">启动备用内核，从内存中提取日志（具体看</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">Documentation/admin-guide/kdump/gdbmac<a href="https://m.elecfans.com/v/tag/1004/" target="_blank"><u>ros</u></a>.txt</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:#ffffff;">三、核心步骤：精准定位</span></span></font><span><span style="background-color:#ffffff;">bug</span></span><font face="等线"><span><span style="background-color:#ffffff;">的代码行</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">拿到</span></span></font><span><span style="background-color:#ffffff;">Oops</span></span><font face="等线"><span><span style="background-color:#ffffff;">日志后，下一步是找到</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">具体哪行代码出了问题</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">。文档推荐两种工具，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">gdb</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">最常用，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">objdump</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">可备用。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:#ffffff;">1.</span></span><font face="等线"><span><span style="background-color:#ffffff;">首选工具：</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">gdb</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（需开启调试信息）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">gdb</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">能直接把</span></span></font><span><span style="background-color:#ffffff;">Oops</span></span><font face="等线"><span><span style="background-color:#ffffff;">中的内存地址，翻译成</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">文件名</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">+</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">行号</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”——</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">但前提是内核编译时开启了</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">**</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">CONFIG_DEBUG_INFO</span></span></span><span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:#ffffff;">**</span></span><font face="等线"><span><span style="background-color:#ffffff;">（调试信息）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:#ffffff;">步骤</span></span></font><span><span style="background-color:#ffffff;">1</span></span><font face="等线"><span><span style="background-color:#ffffff;">：开启内核调试信息</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">在</span></span></font><span><span style="background-color:#ffffff;">kernel</span></span><font face="等线"><span><span style="background-color:#ffffff;">源码目录下，执行命令开启配置：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 关闭COMPILE_TEST，开启DEBUG_KERNEL和DEBUG_INFO</span></span></code><code><span>./scripts/config -d COMPILE_TEST -e DEBUG_KERNEL -e DEBUG_INFO</span></code><code><span><span class="code-snippet__comment"># 重新编译内核（生成带调试信息的vmlinux文件）</span></span></code><code><span>make vmlinux</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:#ffffff;">步骤</span></span></font><span><span style="background-color:#ffffff;">2</span></span><font face="等线"><span><span style="background-color:#ffffff;">：用</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">gdb</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">定位代码</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">根据</span></span></font><span><span style="background-color:#ffffff;">Oops</span></span><font face="等线"><span><span style="background-color:#ffffff;">日志中的关键信息（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">EIP</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">地址或函数偏移），用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">gdb</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">解析：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">情况</span></span></font><span><span style="background-color:#ffffff;">1</span></span><font face="等线"><span><span style="background-color:#ffffff;">：有</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">EIP</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">地址</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">（比如日志中</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">EIP: 0060:[<c021e50e>]</c021e50e></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">gdb</span>vmlinux <span class="code-snippet__comment"># 加载带调试信息的内核文件</span></span></code><code><span>(gdb) l *0xc021e50e <span class="code-snippet__comment"># 查看该地址对应的代码</span></span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">情况</span></span></font><span><span style="background-color:#ffffff;">2</span></span><font face="等线"><span><span style="background-color:#ffffff;">：有函数偏移</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">（比如日志中</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">EIP is at vt_ioctl+0xda8/0x1482</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">gdb</span>vmlinux</span></code><code><span>(gdb) l *vt_ioctl+0xda8 <span class="code-snippet__comment"># 查看vt_ioctl函数偏移0xda8的代码</span></span></code><code><span><span class="code-snippet__comment"># 输出会直接指向文件和行号，比如：</span></span></code><code><span><span class="code-snippet__comment"># 0x1888 is in vt_ioctl (drivers/tty/vt/vt_ioctl.c:293)</span></span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:#ffffff;">步骤</span></span></font><span><span style="background-color:#ffffff;">3</span></span><font face="等线"><span><span style="background-color:#ffffff;">：模块级定位</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">如果</span></span></font><span><span style="background-color:#ffffff;">bug</span></span><font face="等线"><span><span style="background-color:#ffffff;">在加载的模块中（比如日志中</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">dvb_usb_adapter_frontend_exit+0x3a/0x70 [dvb_usb]</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">），直接加载模块文件解析：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 加载dvb-usb模块的.o文件</span></span></code><code><span>gdb drivers/media/usb/dvb-usb/dvb-usb.o</span></code><code><span>(gdb) l *dvb_usb_adapter_frontend_exit+0x3a <span class="code-snippet__comment"># 定位模块内代码</span></span></code></pre>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:#ffffff;">2.</span></span><font face="等线"><span><span style="background-color:#ffffff;">备用工具：</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">objdump</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（无调试信息也能用）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">如果没开启</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">CONFIG_DEBUG_INFO</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">，或只有模块文件，可用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">objdump</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">反<a href="https://m.elecfans.com/v/tag/3195/" target="_blank"><u>汇编</u></a>代码，间接定位问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:#ffffff;">基本用法（查看带源码的反汇编）</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># -r：显示重定位信息；-S：混合显示源码和汇编；-l：显示行号</span></span></code><code><span>objdump -r -S -l net/<a href="https://m.hqchip.com/app/1703" target="_blank"><u>dc</u></a>cp/ipv4.o</span></code></pre>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:#ffffff;">极端情况：无源码时</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">如果连源码都没有，可提取</span></span></font><span><span style="background-color:#ffffff;">Oops</span></span><font face="等线"><span><span style="background-color:#ffffff;">日志中</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“Code:”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">后的字节码，手动反汇编：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">1.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">把</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">Code:</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">后的字节（比如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">44 24 04 e8 6f ...</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">）存到</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">foo.s</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">文件：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>.text</span></code><code><span>.globl foo</span></code><code><span>foo:</span></code><code><span>  .<span class="code-snippet__built_in">byte</span><span class="code-snippet__number">0x44</span>,<span class="code-snippet__number">0x24</span>,<span class="code-snippet__number">0x04</span>,<span class="code-snippet__number">0xe8</span>,<span class="code-snippet__number">0x6f</span>, ... <span class="code-snippet__meta"># 替换成实际字节</span></span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">1.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">编译并反汇编：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attribute">gcc</span>-c -o foo.o foo.s</span></code><code><span>objdump --di<a href="https://m.hqchip.com/app/1686" target="_blank"><u>sas</u></a>semble foo.o <span class="code-snippet__comment"># 查看汇编代码，推断逻辑</span></span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">1.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">简化操作：用内核自带脚本</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">scripts/decodecode</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">自动处理（支持多架构）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:#ffffff;">四、报告</span></span></font><span><span style="background-color:#ffffff;">bug</span></span><font face="等线"><span><span style="background-color:#ffffff;">：让维护者快速接手</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">定位到</span></span></font><span><span style="background-color:#ffffff;">bug</span></span><font face="等线"><span><span style="background-color:#ffffff;">后，若自己无法修复，需向上游报告</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">——</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">关键是</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">找对人</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，让负责该模块的维护者看到。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:#ffffff;">1.</span></span><font face="等线"><span><span style="background-color:#ffffff;">用脚本找维护者：</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">get_maintainer.pl</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">内核源码中的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">scripts/get_maintainer.pl</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">，能直接输出文件的维护者、邮件列表：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span># 查看drivers<span class="code-snippet__regexp">/media/</span>usb<span class="code-snippet__regexp">/gspca/</span>sonixj.c的维护信息</span></code><code><span><span class="code-snippet__operator">./</span>scripts<span class="code-snippet__regexp">/get_maintainer.pl --bug -f drivers/</span>media<span class="code-snippet__regexp">/usb/</span>gspca<span class="code-snippet__operator">/</span>sonixj.c</span></code></pre>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">输出结果会包含：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">模块维护者（比如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">Hans Verkuil <hverkuil/></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">子系统维护者（比如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">Mauro Carvalho Chehab <mchehab/></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">相关邮件列表（比如</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">linux-media@vger.kernel.org</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">，模块专属列表）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">内核通用列表（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">linux-kernel@vger.kernel.org</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:#ffffff;">2.</span></span><font face="等线"><span><span style="background-color:#ffffff;">报告优先级：先</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">bug tracker</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，再邮件</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">若输出中有</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“bug reporting URIs”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">（</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">bug</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">跟踪链接），优先在跟踪系统提交；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">若无，发送邮件到</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">模块专属邮件列表</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，并抄送维护者；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">完全没头绪时，直接发</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">linux-kernel@vger.kernel.org</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">（通用列表，覆盖所有维护者）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:#ffffff;">五、修复</span></span></font><span><span style="background-color:#ffffff;">bug</span></span><font face="等线"><span><span style="background-color:#ffffff;">：从定位到提交的最后一步</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">若你有<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>能力，可尝试修复</span></span></font><span><span style="background-color:#ffffff;">bug——</span></span><font face="等线"><span><span style="background-color:#ffffff;">提交补丁时，务必先读</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">Documentation/process/<a href="https://m.hqchip.com/app/1525" target="_blank"><u>sub</u></a>mitting-patches.rst</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">，遵守内核代码规范（比如补丁格式、</span></span></font><span><span style="background-color:#ffffff;">commit</span></span><font face="等线"><span><span style="background-color:#ffffff;">信息写法），这能大幅提高补丁被接受的概率。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">毕竟开源的核心是协作，你的一个小补丁，可能让成千上万台</span></span></font><span><span style="background-color:#ffffff;">Linux</span></span><font face="等线"><span><span style="background-color:#ffffff;">机器更稳定～</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:#ffffff;">最后：</span></span></font><span><span style="background-color:#ffffff;">klogd</span></span><font face="等线"><span><span style="background-color:#ffffff;">的小技巧</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">klogd</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">（内核日志守护进程）是调试的</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">隐形助手</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">，注意两点：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">1.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">用</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:#ffffff;">1.3-pl3</span></span><font face="等线"><span><span style="background-color:#ffffff;">以上版本</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">sysklogd</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">包，支持地址自动解析；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">2.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">它会通过两种方式解析地址：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">静态解析：用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">System.map</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">文件（内核符号表）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">◦</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">动态解析：自动获取加载模块的符号表（支持动态调试模块</span></span></font><span><span style="background-color:#ffffff;">bug</span></span><font face="等线"><span><span style="background-color:#ffffff;">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:#ffffff;">1.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">模块加载</span></span></font><span><span style="background-color:#ffffff;">/</span></span><font face="等线"><span><span style="background-color:#ffffff;">卸载后，可重启</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">klogd</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">刷新符号表（具体看</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">klogd</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">手册）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:#ffffff;">总结</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">内核</span></span></font><span><span style="background-color:#ffffff;">bug</span></span><font face="等线"><span><span style="background-color:#ffffff;">调试看似复杂，但只要跟着</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">识别日志</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">→</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">获取日志</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">→</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">定位代码</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">→</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">报告</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">/</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">修复</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">的流程走，再借助</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">gdb</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">、</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:#ffffff;">get_maintainer.pl</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">等工具，就能从</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">无从下手</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">变成</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">“</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">有条理排查</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">”</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">这份指南的所有方法都来自内核官方文档，权威且实用</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">——</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">下次遇到内核</span></span></font><font face="Arial"><span><span style="background-color:#ffffff;">bug</span></span></font><font face="等线"><span><span style="background-color:#ffffff;">时，不妨按这个流程试试，说不定你就是解决问题的关键人物～</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:#ffffff;">如果有内核调试的经验，欢迎在评论区分享你的小技巧～</span></span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[安科瑞智慧赋能 筑就零碳园区新标杆]]></title>    <link>https://www.elecfans.com/d/7641994.html</link>    <guid>https://www.elecfans.com/d/7641994.html</guid>    <pubDate>2026-02-06 17:00:00</pubDate>    <description><![CDATA[<p>
	安科瑞销售<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>-蔡禹 咨询：187安/0210科瑞9681<br/>
	一、时代背景与发展诉求<br/>
	在全球积极应对气候变化、我国“双碳”战略持续深化落地的大环境下，传统产业园区作为能源消耗和碳排放的核心集聚区，其绿色低碳转型已成为推动区域经济高质量发展的关键抓手，更是践行国家生态战略的必然选择。零碳园区以“碳收支平衡”为核心目标，通过科学的能源结构优化、能效水平提升及智能化运营管理，实现园区碳排放与碳吸收的动态均衡，是承载绿色产业、践行低碳理念的重要载体。但当前园区零碳转型进程中，普遍面临能源消耗数据模糊、系统调控缺乏精准性、清洁能源消纳效率偏低等现实难题，亟需专业化、智能化的解决方案突破瓶颈。<br/>
	二、零碳园区的核心建设价值<br/>
	零碳园区的转型价值并非单一维度的环保达标，而是涵盖经济、社会、运营、产业四大层面的综合提升，具体体现在以下方面：<br/>
	（一）经济层面：降本增效，开辟新型盈利路径<br/>
	1. 压缩运营开支：借助全方位节能改造、分布式光伏等可再生能源替代传统化石能源，搭配智慧能源系统的精细化调控，可有效降低园区长期电力、热力等能源消耗成本，实现运营成本的持续优化。<br/>
	2. 规避碳相关风险：提前布局适配未来逐步收紧的碳配额管理及碳定价政策，有效避免因碳排放超标引发的高额罚款，将环保合规要求转化为成本竞争优势，保障园区长期稳定运营。<br/>
	3. 挖掘资产增值空间：园区整合的绿色电力资源、节约的碳配额可进入碳交易市场实现变现，配套储能设施可参与电网需求响应获取额外收益，为园区开辟全新的盈利增长点。<br/>
	（二）环境与社会层面：践行责任，塑造绿色品牌<br/>
	1. 降低生态环境负荷：从源头减少温室气体及各类污染物排放，持续改善区域生态环境质量，助力国家“双碳”目标及全球气候治理，充分彰显园区及入驻企业的社会责任与行业引领力。<br/>
	2. 提升品牌核心竞争力：“零碳”标识已成为园区参与市场竞争的重要名片，能够显著增强对高端产业客户、国际资本及绿色领域优秀人才的吸引力，满足产业链上下游对绿色供应链的刚性需求。<br/>
	（三）运营与竞争层面：强化韧性，抢占发展先机<br/>
	1. 提升能源供应稳定性：构建以可再生能源为核心、多能源协同互补的本地化微电网体系，减少对外部能源市场波动及供应变化的依赖，增强园区应对极端天气、能源短缺等突发风险的能力。<br/>
	2. 享受政策红利倾斜：零碳园区作为各级政府绿色发展重点扶持对象，在土地供应、财税减免、项目审批等方面可获得优先支持，同时在绿色金融融资、专项资金补贴等领域具备天然优势。<br/>
	3. 构筑长期竞争壁垒：绿色低碳已成为全球经贸合作及产业发展的核心规则，率先完成零碳转型的园区，可为主入驻企业搭建绿色发展门槛，培育面向未来的核心竞争力。<br/>
	（四）产业生态层面：集聚创新，推动能级跃升<br/>
	1. 吸引绿色产业集聚：零碳园区凭借完善的绿色基础设施及发展环境，成为<a href="https://m.elecfans.com/v/tag/293/" target="_blank"><u>新能源</u></a>、节能环保、碳管理服务等绿色科技产业的优选集聚地，逐步形成良性循环、协同发展的绿色产业生态。<br/>
	2. 驱动技术与人才集聚：为零碳相关技术提供规模化落地应用场景，有效吸引高端研发人才及创新团队入驻，推动园区从传统制造基地向绿色技术创新核心区升级。<br/>
	三、安科瑞智慧能源管理平台：零碳转型的“智慧引擎”<br/>
	智慧能源管理平台依托<a href="https://bbs.elecfans.com/group_57" target="_blank"><u>物联网</u></a>（<a href="https://www.elecfans.com/tags/iot/" target="_blank"><u>IoT</u></a>）、大数据、<a href="https://m.elecfans.com/v/tag/475/" target="_blank"><u>云计算</u></a>、<a href="https://www.elecfans.com/v/tag/150/" target="_blank"><u>人工智能</u></a>（<a href="https://www.elecfans.com/tags/ai/" target="_blank"><u>AI</u></a>）等现代信息技术，实现对园区能源消耗的全面监测、精准控制及优化调度，核心解决能源利用效率偏低、管理粗放等问题，为园区零碳转型提供技术支撑。<br/>
	</p>
<p>
	<img src="https://file1.elecfans.com/web3/M00/4B/15/wKgZO2mFrRaAFVovAAD9KQwEqmE817.png" alt="wKgZO2mFrRaAFVovAAD9KQwEqmE817.png"/><img src="https://file1.elecfans.com/web3/M00/4B/15/wKgZO2mFrWWANRKFAAF_Tinkb10749.png" alt="wKgZO2mFrWWANRKFAAF_Tinkb10749.png"/><img src="https://file1.elecfans.com/web3/M00/4B/15/wKgZO2mFrRaAOuWsAAHnV3Q7XOY704.png" alt="wKgZO2mFrRaAOuWsAAHnV3Q7XOY704.png"/><img src="https://file1.elecfans.com/web3/M00/4B/14/wKgZPGmFrWWAKHScAAGqwFWVBO8450.png" alt="wKgZPGmFrWWAKHScAAGqwFWVBO8450.png"/><img src="https://file1.elecfans.com/web3/M00/4B/15/wKgZO2mFrRaAOuWsAAHnV3Q7XOY704.png" alt="wKgZO2mFrRaAOuWsAAHnV3Q7XOY704.png"/><img src="https://file1.elecfans.com/web3/M00/4B/15/wKgZO2mFrRaAOuWsAAHnV3Q7XOY704.png" alt="wKgZO2mFrRaAOuWsAAHnV3Q7XOY704.png"/><img src="https://file1.elecfans.com/web3/M00/4B/14/wKgZPGmFrRaAdnI4AAEjxXnKfi8447.png" alt="wKgZPGmFrRaAdnI4AAEjxXnKfi8447.png"/><img src="https://file1.elecfans.com/web3/M00/4B/15/wKgZO2mFrReAes1DAAIsWrG6my8577.png" alt="wKgZO2mFrReAes1DAAIsWrG6my8577.png"/><img src="https://file1.elecfans.com/web3/M00/4B/14/wKgZPGmFrReAP_0dAAHe97_BSq4901.png" alt="wKgZPGmFrReAP_0dAAHe97_BSq4901.png"/><img src="https://file1.elecfans.com/web3/M00/4B/15/wKgZO2mFrReACsFkAAGT_SYrH0o000.png" alt="wKgZO2mFrReACsFkAAGT_SYrH0o000.png"/><img src="https://file1.elecfans.com/web3/M00/4B/15/wKgZO2mFrReACsFkAAGT_SYrH0o000.png" alt="wKgZO2mFrReACsFkAAGT_SYrH0o000.png"/><img src="https://file1.elecfans.com/web3/M00/4B/14/wKgZPGmFrReAbYUcAAFSgRZk7l0344.png" alt="wKgZPGmFrReAbYUcAAFSgRZk7l0344.png"/><img src="https://file1.elecfans.com/web3/M00/4B/15/wKgZO2mFrReAOK0pAAEwCTu3VsI001.png" alt="wKgZO2mFrReAOK0pAAEwCTu3VsI001.png"/><img src="https://file1.elecfans.com/web3/M00/4B/15/wKgZO2mFrReAPCWoAAGNK2TZMSY457.png" alt="wKgZO2mFrReAPCWoAAGNK2TZMSY457.png"/><img src="https://file1.elecfans.com/web3/M00/4B/15/wKgZO2mFrReAPCWoAAGNK2TZMSY457.png" alt="wKgZO2mFrReAPCWoAAGNK2TZMSY457.png"/><img src="https://file1.elecfans.com/web3/M00/4B/14/wKgZPGmFrReAO_-WAAG-e7xzeGM164.png" alt="wKgZPGmFrReAO_-WAAG-e7xzeGM164.png"/><img src="https://file1.elecfans.com/web3/M00/4B/15/wKgZO2mFrWaAHMU4AAEfM7xBs9g531.png" alt="wKgZO2mFrWaAHMU4AAEfM7xBs9g531.png"/></p>
<p>
	<br/>
	安科瑞<a href="https://m.hqchip.com/app/1703" target="_blank"><u>Ac</u></a>relEMS园区智慧能源管理系统，以“优化零碳<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>供给、强化智能能源调度”为核心导向，深度融合物联网与人工智能技术，构建全流程零碳园区解决方案。该方案全面覆盖可再生能源利用、电化学储能、智能充电设施、微电网建设、节能技术应用、智慧运营管理等核心领域，打通能源生产、消耗、存储、调控、管理的全链条，实现全流程碳减排。<br/>
	通过该平台，可有效提升园区绿色电力占比，促进可再生能源高效消纳，持续降低能源使用成本、提升能源利用效率，推动园区实现可持续发展，最终达成经济收益与生态效益的双重提升，助力园区迈向零碳未来。<br/>
	四、结语<br/>
	碳中和转型是一场涉及经济、社会、产业、技术的全方位系统性变革，而零碳园区作为这场变革的前沿实践载体，承载着推动产业绿色升级、践行生态发展理念的重要使命。智慧能源管理系统作为零碳园区建设的核心支撑，是实现园区碳收支平衡、提升运营效率的“智慧大脑”。安科瑞智慧能源管理平台以数据为纽带、以智能为核心，精准对接园区零碳转型需求，助力园区在绿色发展道路上稳步前行，将低碳发展愿景转化为实实在在的运营效益与生态贡献，携手各界共创可持续发展的绿色未来。<br/><br/>
	审核编辑 黄宇</p>]]></description></item><item>    <title><![CDATA[Dalsa线阵工业相机的高性价比之选——Tetra系列]]></title>    <link>https://www.elecfans.com/d/7642001.html</link>    <guid>https://www.elecfans.com/d/7642001.html</guid>    <pubDate>2026-02-06 17:04:00</pubDate>    <description><![CDATA[<p style="text-align:justify;">如果想选一款经济型的线阵工业相机，又要考虑其稳定性和技术优势，那么可以看看Dalsa的<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>Te</u></a>tra系列，拥有超高性价比。</p><img src="https://file1.elecfans.com/web3/M00/4B/15/wKgZO2mFrmOAC0pkAARQn5zJxxk732.png" alt="wKgZO2mFrmOAC0pkAARQn5zJxxk732.png"/><p style="text-align:justify;">Tetra系列线扫描相机搭载Te<a href="https://www.hqchip.com/app/1721" target="_blank"><u>led</u></a>yne全新CMOS线扫描<a href="https://www.elecfans.com/v/tag/117/" target="_blank"><u>传感器</u></a>技术，可呈现超高清成像品质，兼具高动态范围与低功耗特性，高度适配各类对成本敏感的应用场景。</p><p style="text-align:justify;">Tetra系列相机凭借<strong>2.<a href="https://m.elecfans.com/v/tag/1225/" target="_blank"><u>5G</u></a>igE Vision<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a></strong>实现高性价比的性能输出，该接口在长距离布线的数传场景下，能提供GigE<a href="https://www.hqchip.com/app/1720" target="_blank"><u>以太网</u></a>2.5倍的传输带宽。产品提供2k、4k、8k<strong>多种分辨率可选</strong>，涵盖黑白、彩色两款机型，全系列功耗均低于6瓦。其中黑白款机型成像品质优异，支持单通道黑白、双通道高动态范围两种模式选配；彩色款机型采用真三线阵技术实现红、绿、蓝三色原生成像，全程无任何数据插值处理。</p><img src="https://file1.elecfans.com/web3/M00/4B/14/wKgZPGmFrmOAPVU1AAVkE2CI83o123.png" alt="wKgZPGmFrmOAPVU1AAVkE2CI83o123.png"/><p style="text-align:justify;">Tetra系列相机标配<strong>多感兴趣区域、可<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>系数组、以太网供电（<a href="https://m.hqchip.com/app/1720" target="_blank"><u>PoE</u></a>）等</strong>线扫描相机核心功能。其2.5GigE Vision接口的优异性能，让产品可广泛适配电子检测、<a href="https://m.elecfans.com/v/tag/4854/" target="_blank"><u>光学</u></a>分选、印刷品检测、包装检测、纸病检测及通用机器视觉等各类应用场景。</p>]]></description></item><item>    <title><![CDATA[Ubuntu 25升级全解析！即将移植RK系列芯片，技术实践抢先预告]]></title>    <link>https://www.elecfans.com/d/7401313.html</link>    <guid>https://www.elecfans.com/d/7401313.html</guid>    <pubDate>2026-02-06 17:07:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span><font face="等线"><span>各位<a href="https://bbs.elecfans.com/group_1231" target="_blank"><u>开发者</u></a>伙伴们，</span></font><span>Ubuntu 25</span><font face="等线"><span>系列（</span></font><font face="Arial"><span>25.04 “Plucky Puffin”</span></font><font face="等线"><span>及后续</span></font><font face="Arial"><span>25.10</span></font><font face="等线"><span>版本）的更新堪称</span></font><font face="Arial"><span>“</span></font><font face="等线"><span>史诗级</span></font><font face="Arial"><span>”</span></font><font face="等线"><span>！相比</span></font><font face="Arial"><span>24.04 LTS</span></font><font face="等线"><span>等前代版本，它在桌面体验、系统性能、开发工具等维度实现了全方位突破。更重磅的是</span></font><font face="Arial"><span>——</span></font><font face="等线"><span>我已启动将</span></font><font face="Arial"><span>Ubuntu 25</span></font><font face="等线"><span>移植到</span></font><font face="Arial"><span>RK</span></font><font face="等线"><span>系列芯片的计划，后续会持续分享实践细节，各位敬请期待！</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixGAUlx8AAG3mRsu4uU586.png" alt="wKgZPGkaixGAUlx8AAG3mRsu4uU586.png"/><h2>
		<b><span><font face="等线"><span>一、</span></font><span>Ubuntu 25</span><font face="等线"><span>核心升级：与前代版本的关键差异</span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span><span>1.</span><font face="等线"><span>桌面体验：从</span></font><font face="Arial"><span>“</span></font><font face="等线"><span>能用</span></font><font face="Arial"><span>”</span></font><font face="等线"><span>到</span></font><font face="Arial"><span>“</span></font><font face="等线"><span>好用</span></font><font face="Arial"><span>”</span></font><font face="等线"><span>的质变</span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span><span>GNOME 48</span><font face="等线"><span>颠覆性优化</span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span>对比</span></font><span>24.04</span><font face="等线"><span>搭载的</span></font><font face="Arial"><span>GNOME 46</span></font><font face="等线"><span>，新增三大核心功能：「电池健康模式」解决长期充电损耗问题；「健康面板」精准统计屏幕使用时长；</span></font></span><b><span><font face="等线"><span>原生</span></font><span>HDR</span><font face="等线"><span>显示支持</span></font></span></b><span><font face="等线"><span>配合上游合并的三重缓冲补丁，图形渲染帧率从平均</span></font><span>35fps</span><font face="等线"><span>跃升至</span></font><font face="Arial"><span>60fps</span></font><font face="等线"><span>，低配置设备也能丝滑运行。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span><font face="等线"><span>默认工具链大换血</span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span>替换老旧的</span></font><span>Evince PDF</span><font face="等线"><span>阅读器为「</span></font><font face="Arial"><span>Pape<a href="https://www.elecfans.com/tags/rs/" target="_blank"><u>rs</u></a></span></font><font face="等线"><span>」，加载速度提升</span></font><font face="Arial"><span>40%</span></font><font face="等线"><span>；弃用退役的</span></font><font face="Arial"><span>Mozilla</span></font><font face="等线"><span>定位服务，改用</span></font><font face="Arial"><span>BeaconDB</span></font><font face="等线"><span>后，时区自动同步准确率从</span></font><font face="Arial"><span>82%</span></font><font face="等线"><span>提升至</span></font><font face="Arial"><span>99%</span></font><font face="等线"><span>。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span>2.</span><font face="等线"><span>系统性能：内核与启动的双重突破</span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span><span><a href="https://bbs.elecfans.com/group_300" target="_blank"><u>Linux</u></a> 6.14/6.17</span><font face="等线"><span>内核迭代</span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><span>25.04</span><font face="等线"><span>首发</span></font><font face="Arial"><span>Linux 6.14</span></font><font face="等线"><span>内核，引入</span></font><font face="Arial"><span>sched_ext</span></font><font face="等线"><span>用户态调度系统</span></font><font face="Arial"><span>——</span></font><font face="等线"><span>开发者可通过</span></font><font face="Arial"><span>eBPF</span></font><font face="等线"><span>自定义调度策略，比</span></font><font face="Arial"><span>24.04</span></font><font face="等线"><span>的固定调度器灵活度提升</span></font><font face="Arial"><span>300%</span></font><font face="等线"><span>；</span></font><font face="Arial"><span>25.10</span></font><font face="等线"><span>更将升级至</span></font><font face="Arial"><span>Linux 6.17</span></font><font face="等线"><span>，默认开启多核</span></font><font face="Arial"><span>SMP</span></font><font face="等线"><span>支持，</span></font><font face="Arial"><span>EXT4</span></font><font face="等线"><span>文件系统吞吐量提升</span></font><font face="Arial"><span>25%</span></font><font face="等线"><span>。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span><font face="等线"><span>启动与存储效率飞跃</span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span>实验性采用</span></font><span>Dracut</span><font face="等线"><span>替代</span></font><font face="Arial"><span>initramfs-tools</span></font><font face="等线"><span>，启动时间从</span></font><font face="Arial"><span>24</span></font><font face="等线"><span>秒压缩至</span></font><font face="Arial"><span>18</span></font><font face="等线"><span>秒；</span></font><font face="Arial"><span>ZFS</span></font><font face="等线"><span>加密根分区从</span></font><font face="Arial"><span>“</span></font><font face="等线"><span>实验性</span></font><font face="Arial"><span>”</span></font><font face="等线"><span>转为稳定支持，数据校验速度比</span></font><font face="Arial"><span>24.04</span></font><font face="等线"><span>快</span></font><font face="Arial"><span>1.8</span></font><font face="等线"><span>倍，且支持内核级系统回滚。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span>3.</span><font face="等线"><span>开发者工具：全栈版本与生态升级</span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span><font face="等线"><span>工具链版本全面跃升</span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>工具</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>Ubuntu 25</span><font face="等线"><span>版本</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>24.04</span><font face="等线"><span>版本</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>性能提升</span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><a href="https://www.elecfans.com/tags/python/" target="_blank"><u>Python</u></a></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>3.13.3</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>3.12.2</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>编译快</span></font><span>20%</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>Golang</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>1.24</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>1.22</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>并发性能</span></font><span>+ 15%</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>Rust</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>1.84</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>1.75</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>编译速度快</span></font><span>40%</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>GCC</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>15</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span>13</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span>代码优化率</span></font><span>+ 8%</span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span><span>APT 3.0</span><font face="等线"><span>效率革命</span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span>新增命令自动分页功能，解决</span></font><span>24.04</span><font face="等线"><span>中长列表刷屏问题；移除老旧的</span></font><font face="Arial"><span>apt-key</span></font><font face="等线"><span>工具，改用</span></font><font face="Arial"><span>gpgv</span></font><font face="等线"><span>管理密钥，依赖解析错误率从</span></font><font face="Arial"><span>12%</span></font><font face="等线"><span>降至</span></font><font face="Arial"><span>3%</span></font><font face="等线"><span>。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span><span>DevPacks</span><font face="等线"><span>生态首创</span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span>首次推出</span></font><span>Spring</span><font face="等线"><span>专用开发包，预装</span></font><font face="Arial"><span>Spring Boot 3.4</span></font><font face="等线"><span>与</span></font><font face="Arial"><span>Framework 6.2</span></font><font face="等线"><span>，相比</span></font><font face="Arial"><span>24.04</span></font><font face="等线"><span>手动配置环境，节省</span></font><font face="Arial"><span>2</span></font><font face="等线"><span>小时</span></font><font face="Arial"><span>/</span></font><font face="等线"><span>人的部署时间。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span>4.</span><font face="等线"><span>硬件与安全：</span></font><font face="Arial"><span><a href="https://m.hqchip.com/app/1378" target="_blank"><u>ARM</u></a></span></font><font face="等线"><span>支持与防护升级</span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span><span>ARM64</span><font face="等线"><span>桌面生态成熟</span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span>官方首次发布独立</span></font><span>ARM64</span><font face="等线"><span>桌面</span></font><font face="Arial"><span>ISO</span></font><font face="等线"><span>，对比</span></font><font face="Arial"><span>24.04</span></font><font face="等线"><span>的服务器版衍生镜像，驱动兼容性提升</span></font><font face="Arial"><span>60%</span></font><font face="等线"><span>，对</span></font><font face="Arial"><span>RK</span></font><font face="等线"><span>系列等</span></font><font face="Arial"><span>ARM</span></font><font face="等线"><span>芯片的</span></font><font face="Arial"><span>Mali <a href="https://www.elecfans.com/tags/gpu/" target="_blank"><u>GPU</u></a></span></font><font face="等线"><span>、</span></font><font face="Arial"><span>NPU</span></font><font face="等线"><span>支持更完善。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span>•</span></span></span><b><span><font face="等线"><span>后量子安全加固</span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span>默认启用</span></font><span>NTS</span><font face="等线"><span>安全时间同步，配合</span></font><font face="Arial"><span>WPA-PSK-SHA256</span></font><font face="等线"><span>加密，网络攻击防御成功率提升至</span></font><font face="Arial"><span>99.5%</span></font><font face="等线"><span>；系统年漏洞数量仅为</span></font><font face="Arial"><span>Windows</span></font><font face="等线"><span>的</span></font><font face="Arial"><span>1/5</span></font><font face="等线"><span>，补丁响应速度快</span></font><font face="Arial"><span>40%</span></font><font face="等线"><span>。</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span>二、重磅预告：</span></font><span>Ubuntu 25</span><font face="等线"><span>即将登陆</span></font><font face="Arial"><span>RK</span></font><font face="等线"><span>系列芯片</span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><font face="等线"><span>正是看中</span></font><span>Ubuntu 25</span><font face="等线"><span>在</span></font><font face="Arial"><span>ARM</span></font><font face="等线"><span>性能、开发工具链和系统安全上的升级，我已正式启动</span></font></span><b><span><span>Ubuntu 25</span><font face="等线"><span>对</span></font><font face="Arial"><span>RK</span></font><font face="等线"><span>系列芯片（含</span></font><font face="Arial"><span>RK3568</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>RK3576</span></font><font face="等线"><span>、</span></font><font face="Arial"><span>RK3588</span></font><font face="等线"><span>等型号）的移植计划</span></font></span></b><span><font face="等线"><span>！</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span>后续将重点攻克这些核心方向，并持续分享技术细节：</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="Arial"><span/></font><font face="等线"><span>内核驱动适配：不同版本的<a href="https://www.hqchip.com/app/1522" target="_blank"><u>sd</u></a>k可能内核不一样（目前rk内核最高应该是支持到6.1版本）</span></font></span></p>
	<p>
		<span><font face="Arial"><span/></font><font face="等线"><span>性能调优：性能分析和实测</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="Arial"><span/></font><font face="等线"><span>开发环境搭建：安装docker，隔离和保护本地环境</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="Arial"><span/></font><font face="等线"><span>踩坑实录：解决</span></font><font face="Arial"><span>ARM64</span></font><font face="等线"><span>架构下的驱动兼容问题</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span>移植过程中的关键技术点、优化数据和最终成果，都会第一时间在公众号同步～</span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span>如果您正在关注</span></font><span>RK</span><font face="等线"><span>系列芯片的高性能系统方案，或者对</span></font><font face="Arial"><span>Ubuntu 25</span></font><font face="等线"><span>的新特性有疑问，欢迎在评论区交流！蹲守后续更新，一起解锁</span></font><font face="Arial"><span>ARM</span></font><font face="等线"><span>开发新体验～</span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>
<br/>]]></description></item><item>    <title><![CDATA[【RK3588 Android驱动实战】USB TP XY轴反转？不用改TP固件！系统端改上报数据快速搞定]]></title>    <link>https://www.elecfans.com/d/7401312.html</link>    <guid>https://www.elecfans.com/d/7401312.html</guid>    <pubDate>2026-02-06 17:09:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">做<a href="https://www.elecfans.com/soft/data/21-22/" target="_blank"><u>嵌入式</u></a></span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_360" target="_blank"><u>Android</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发的同学，大概率遇到过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1515" target="_blank"><u>USB</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">触控面板（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）的适配坑</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">比如</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">XY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">轴反转</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：明明点屏幕左边，系统却识别成右边；向上滑动，页面反而向下走。最近在</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3588</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台调试</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB TP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">时，就碰到了这个问题，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">供应商给的方案是改</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">端固件，但需要重新烧录</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">程序、协调供应商联调，操作麻烦还耗时间。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">后来我们换了个思路：</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">直接在</span></span></font><span><span style="background-color:rgb(255,255,255);">Android</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统端修改</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">上报的坐标数据</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，不用动</span></span></font><span><span style="background-color:rgb(255,255,255);">TP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">固件，半小时就搞定了。今天就把这个实战方案<a href="https://m.elecfans.com/v/tag/899/" target="_blank"><u>拆解</u></a>清楚，附上核心</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">patch</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">解析，希望能帮到有同样需求的同学。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、问题回顾：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3588 USB TP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">反向</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">烦恼</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">先明确下我们遇到的具体问题：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3588 Android 12/13</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统上，接入某款</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB TP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">后，触控功能正常，但</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">坐标映射完全反了</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">比如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">物理坐标的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">X</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">轴（横向）对应系统的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Y</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">轴（纵向），且单轴方向还存在反转（比如按</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">右侧，系统识别为左侧）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">最初联系</span></span></font><span><span style="background-color:rgb(255,255,255);">TP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">供应商，得到的解决方案是：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">提供</span></span></font><span><span style="background-color:rgb(255,255,255);">TP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的固件烧录工具；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">修改</span></span></font><span><span style="background-color:rgb(255,255,255);">TP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内部的坐标映射参数；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">重新烧录固件到</span></span></font><span><span style="background-color:rgb(255,255,255);">TP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">但这个方案有明显痛点：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">需额外安装烧录工具，部分工具还依赖</span></span></font><span><span style="background-color:rgb(255,255,255);">Windows</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">烧录过程有风险，操作不当可能导致</span></span></font><span><span style="background-color:rgb(255,255,255);">TP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">变砖；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">若后续换批次</span></span></font><span><span style="background-color:rgb(255,255,255);">TP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，可能需要重复适配，灵活性差。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">既然</span></span></font><span><span style="background-color:rgb(255,255,255);">TP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">是通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB HID</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">协议向系统上报坐标数据，那能不能在</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统驱动层拦截并修改这些数据</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">？答案是肯定的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">这就是我们最终采用的方案。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、核心方案</span></span></font></span></b></h2>
	<h3>
		<b><span style="font-family:Arial;font-weight:bold;font-size:15pt;"><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心逻辑：</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">hid-multitouch.c</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（坐标转换的关键）</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">文件路径：</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">kernel-5.10/drivers/hid/hid-multitouch.c</span></span></span></p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixGAUs5yAACFuC-kohc057.png" alt="wKgZPGkaixGAUs5yAACFuC-kohc057.png"/><p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">这是</span></span></font><span><span style="background-color:rgb(255,255,255);">USB HID</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">多点触控驱动的核心文件，我们的</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">坐标反转</span></span></font><span><span style="background-color:rgb(255,255,255);">+</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">交换逻辑</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">就加在这里。</span></span></font><span><span style="background-color:rgb(255,255,255);">TP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">上报的原始</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">X/Y</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">坐标会经过这个文件处理后，再传递给</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Android</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入子系统，所以在这里修改数据最直接有效。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">先看原代码和修改后的对比：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>// 原代码（直接上报原始坐标）</span></code><code><span>input_event(<span class="code-snippet__built_in">input</span>, EV_ABS, ABS_MT_POSITION_X, *slot-&gt;x);</span></code><code><span>input_event(<span class="code-snippet__built_in">input</span>, EV_ABS, ABS_MT_POSITION_Y, *slot-&gt;y);</span></code><code><span>// 修改后（先转换坐标，再上报）</span></code><code><span><span class="code-snippet__built_in">int</span>max_x = input_abs_get_max(<span class="code-snippet__built_in">input</span>, ABS_MT_POSITION_X);</span></code><code><span><span class="code-snippet__built_in">int</span>max_y = input_abs_get_max(<span class="code-snippet__built_in">input</span>, ABS_MT_POSITION_Y);</span></code><code><span><span class="code-snippet__built_in">int</span>new_x = max_y - *slot-&gt;y;    </span></code><code><span><span class="code-snippet__built_in">int</span>new_y = *slot-&gt;x; </span></code><code><span>new_x = clamp_val(new_x,<span class="code-snippet__number">0</span>, max_y);</span></code><code><span>new_y = clamp_val(new_y,<span class="code-snippet__number">0</span>, max_x);</span></code><code><span>input_event(<span class="code-snippet__built_in">input</span>, EV_ABS, ABS_MT_POSITION_X, new_x);</span></code><code><span>input_event(<span class="code-snippet__built_in">input</span>, EV_ABS, ABS_MT_POSITION_Y, new_y);</span></code></pre>
	<p>
		<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">这部分是核心，必须逐行理解</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：获取</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的最大坐标值</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__built_in">int</span>max_x = input_abs_get_max(<span class="code-snippet__built_in">input</span>, ABS_MT_POSITION_X);</span></code><code><span><span class="code-snippet__built_in">int</span>max_y = input_abs_get_max(<span class="code-snippet__built_in">input</span>, ABS_MT_POSITION_Y);</span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">input_abs_get_max</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_300" target="_blank"><u>Linux</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">输入子系统提供的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">A<a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>PI</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，用于获取指定输入设备（这里是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB TP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">绝对坐标最大值</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">比如</span></span></font><span><span style="background-color:rgb(255,255,255);">TP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的分辨率是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1920x1080</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，那么</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">max_x=1919</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">max_y=1079</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">（坐标从</span></span></font><span><span style="background-color:rgb(255,255,255);">0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开始计数）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">为什么要获取最大值？因为后续要通过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">最大值</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">-</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">原始坐标</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">实现</span></span></font></span><b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">单轴方向反转</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：坐标交换</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">方向反转</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__built_in">int</span>new_x = max_y - *slot-&gt;y;    </span></code><code><span><span class="code-snippet__built_in">int</span>new_y = *slot-&gt;x; </span></code></pre>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">这两行是解决</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“XY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">轴反转</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的关键，我们用一个实际例子理解：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">假设</span></span></font><span><span style="background-color:rgb(255,255,255);">TP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原始上报坐标是（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">x=200</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">y=500</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），且</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">max_x=1919</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">max_y=1079</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">原逻辑：系统收到</span></span></font><span><span style="background-color:rgb(255,255,255);">X=200</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Y=500</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（对应错误的轴映射）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">新逻辑：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">new_x = 1079 - 500 = 579</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Y</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">轴最大值减原始</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Y</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，实现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Y</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">轴反转，再作为新</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">X</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">new_y = 200</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（直接把原始</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">X</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">作为新</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Y</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，实现</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">XY</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">轴交换）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">最终系统收到</span></span></font><span><span style="background-color:rgb(255,255,255);">X=579</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Y=200</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，正好修正了轴反转问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span style="font-family:Arial;font-weight:bold;font-size:14pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">步骤</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：限制坐标范围（防异常）</span></span></font></span></b></h4>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__attr">new_x</span>= clamp_val(new_x,<span class="code-snippet__number">0</span>, max_y)<span class="code-snippet__comment">;</span></span></code><code><span><span class="code-snippet__attr">new_y</span>= clamp_val(new_y,<span class="code-snippet__number">0</span>, max_x)<span class="code-snippet__comment">;</span></span></code></pre>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">clamp_val</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">Linux</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核的工具函数，作用是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">将数值限制在指定范围内</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（小于最小值则取最小值，大于最大值则取最大值）；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">为什么需要？防止</span></span></font><span><span style="background-color:rgb(255,255,255);">TP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">上报异常数据（比如负数、超出最大值），导致系统识别到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">无效坐标</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，出现触控漂移或无响应；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">比如</span></span></font><span><span style="background-color:rgb(255,255,255);">new_x</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">计算后是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">- 10</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，会被修正为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；若</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">new_x</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1080</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（超过</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">max_y=1079</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），会被修正为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1079</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、测试验证：修改后效果如何？</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">修改完上述</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">个文件后，按以下步骤验证：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">重新编译</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3588</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">内核；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">将编译后的内核镜像（</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">boot.img</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">）烧录到</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3588</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开发板；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">接入</span></span></font><span><span style="background-color:rgb(255,255,255);">USB TP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，测试触控功能。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">验证结果</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">单点触控：点击屏幕任意位置，光标精准对应，无偏移；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">滑动操作：向上</span></span></font><span><span style="background-color:rgb(255,255,255);">/</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">下</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">左</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">右滑动，页面滚动方向完全正确；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">多点触控：双指缩放图片、双指旋转，功能正常无异常；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">边缘测试：点击</span></span></font><span><span style="background-color:rgb(255,255,255);">TP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">边缘区域，无</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">超出范围</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">或</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">无响应</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">整个适配过程从修改代码到验证通过，流程简单，比供应商提供的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">改</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">固件</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">方案效率高太多。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">四、实用小贴士：适配其他</span></span></font><span><span style="background-color:rgb(255,255,255);">TP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的扩展思路</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">这个方案的优势在于</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">通用性</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">如果后续换其他型号的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB TP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，只要遇到类似的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">轴反转</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">或</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">方向反</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题，都可以参考这个思路修改，只需调整</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">hid-multitouch.c</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">中的坐标转换公式：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题类型</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">调整思路</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">示例公式（假设原始</span></span></font><span><span style="background-color:rgb(255,255,255);">x/y</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">max_x/max_y</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">仅</span></span></font><span><span style="background-color:rgb(255,255,255);">XY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">轴交换</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">new_x =</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原始</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">y</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">new_y =</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">原始</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">x</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">new_x=*slot-&gt;y; new_y=*slot-&gt;x</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">仅</span></span></font><span><span style="background-color:rgb(255,255,255);">X</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">轴方向反</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">new_x = max_x -</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原始</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">x</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">new_y =</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">原始</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">y</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">new_x=max_x-*slot-&gt;x; new_y=*slot-&gt;y</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">仅</span></span></font><span><span style="background-color:rgb(255,255,255);">Y</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">轴方向反</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">new_x =</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原始</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">x</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">new_y = max_y -</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">原始</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">y</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">new_x=*slot-&gt;x; new_y=max_y-*slot-&gt;y</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">XY</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">轴交换</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">+</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">双轴方向反</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">new_x = max_y -</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">原始</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">y</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">；</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">new_y = max_x -</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">原始</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">x</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">new_x=max_y-*slot-&gt;y; new_y=max_x-*slot-&gt;x</span></span></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><p>
		<b><span style="font-family:Arial;font-weight:bold;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">修改前必做的准备</span></span></font></span></b><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">用</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">getevent</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">命令查看</span></span></font><span><span style="background-color:rgb(255,255,255);">TP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的原始坐标数据（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Android</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">终端执行</span></span></font></span><span style="font-family:Arial;font-size:11pt;background:rgb(0,255,255);"><span><span style="background-color:rgb(255,255,255);">getevent -l</span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">），确认原始</span></span></font><span><span style="background-color:rgb(255,255,255);">x/y</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的范围和上报规律，再针对性调整公式，避免盲目修改。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span style="font-family:Arial;font-weight:bold;font-size:16pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">五、总结：嵌入式适配的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">灵活思维</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">这次</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3588 USB TP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的适配，本质上是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">绕开硬件限制，用软件灵活解决问题</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。在<a href="https://www.elecfans.com/v/tag/232/" target="_blank"><u>嵌入式开发</u></a>中，我们常会遇到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件端修改麻烦</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的场景，此时不妨多想想：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动层能不能拦截数据做处理？</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统层有没有</span></span></font><span><span style="background-color:rgb(255,255,255);">API</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">能适配需求？</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">应用层能不能通过配置兼容差异？</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">毕竟，软件的灵活性才是嵌入式开发的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心优势</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。如果大家在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">TP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">适配中还遇到过其他坑（比如多点触控失效、触控延迟），欢迎在评论区分享，我们一起探讨解决方案～</span></span></font></span></p>
	<p>
		</p>
</div>
<div class="wx_detail">
	<p>
		</p>
</div>]]></description></item><item>    <title><![CDATA[新洁能NCE30H12K高效稳定的N沟道增强型功率MOSFET]]></title>    <link>https://www.elecfans.com/d/7642013.html</link>    <guid>https://www.elecfans.com/d/7642013.html</guid>    <pubDate>2026-02-06 17:09:00</pubDate>    <description><![CDATA[<p><span style="background-color:#FFFFFF;">新洁能 NCE30H12K是南山电子代理的一款N沟道增强型功率 <a href="https://www.elecfans.com/tags/mosfet/" target="_blank"><u>MOSFET</u></a>，有着出色的<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>性能和可靠的品质，可以提供极低的导通电阻（RDS (ON)）和低栅极电荷，还具备良好的稳定性与抗干扰能力，满足多种复杂场景下的功率控制需求，是当前市场上高性价比功率 MOSFET的代表性产品之一。</span></p><img src="https://file1.elecfans.com/web3/M00/4B/15/wKgZO2mFr5aAb_VdAABoshtiYVQ606.png" alt="wKgZO2mFr5aAb_VdAABoshtiYVQ606.png"/><p><strong>核心技术与性能特点：</strong></p><p>1.优异的电气参数，满足大电流需求</p><p>作为一款面向中低压场景的功率 MOSFET，NCE30H12K的关键电气参数表现突出。其漏源电压（VDS）额定值为 30V，连续漏极<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>（ID）可达 120A，即使在外壳温度（TC）为 100℃的高温环境下，连续漏极电流仍能保持 84A，足以应对多数中大功率设备的电流需求。在导通性能上，当栅源电压（VGS）为 10V时，导通电阻（RDS (ON)）最大值仅 4.5mΩ，典型值更是低至 3.5mΩ，极低的导通电阻能有效减少电流通过时的损耗，提升设备整体能效，尤其适合对功耗敏感的功率控制场景。</p><p>2.先进技术加持，保障性能稳定</p><p>为了进一步优化性能，NCE30H12K采用了高密度单元设计，这一设计让器件实现了 “超低 RDS (ON)”的特性，同时配合先进的沟槽技术，大幅降低了栅极电荷，减少了开关过程中的能量损耗，让器件在高频工作场景下也能保持高效运转。此外，该器件具备完全表征的雪崩电压和电流，单次脉冲雪崩能量（EAS）高达 350mJ，即便在电路中出现电压尖峰等突发状况，也能稳定承受，避免因瞬时过载导致器件损坏。</p><p>3.抗干扰与可靠性强</p><p>NCE30H12K 搭载了特殊工艺技术，赋予其出色的 <a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a>（静电放电）防护能力，能有效抵御静电对器件的冲击，延长产品在复杂电磁环境中的使用寿命。封装设计上，其采用的 TO-252-2L封装不仅结构紧凑，更具备优良的散热性能，可快速传导器件工作时产生的热量，避免因高温积累导致性能衰减，为器件在高负载、长时间运行工况下的稳定性提供了有力支撑。</p><p/><p><strong>典型应用领域：</strong></p><p>凭借其低导通电阻、高开关速度与强电流能力，NCE30H12K非常适合用于：</p><ul><li><strong>功率开关应用</strong>：如<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>-DC<a href="https://www.hqchip.com/app/1718" target="_blank"><u>转换器</u></a>、<a href="https://bbs.elecfans.com/zhuti_dianji_1.html" target="_blank"><u>电机</u></a>驱动等；</li><li><strong>硬开关与高频电路</strong>：适用于<a href="https://www.hqchip.com/app/1703" target="_blank"><u>开关电源</u></a>、<a href="https://m.hqchip.com/app/1852" target="_blank"><u>同步整流</u></a>等拓扑；</li><li><strong>不间断<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>（UPS）</strong>：在逆变与整流环节中提供高效能的功率处理。</li></ul><p/><p>新洁能 NCE30H12K以先进的沟槽技术为核心，兼具超低导通电阻、大电流承载能力、稳定的雪崩特性和优良的散热表现，既满足了中低压功率场景的高效运行需求，又通过严苛测试和可靠设计保障了使用安全性。无论是普通电子设备，还是工业、<a href="https://m.elecfans.com/v/tag/293/" target="_blank"><u>新能源</u></a>等专业领域，它都能以高性价比的优势，为各类电子系统提供稳定、高效的功率支持。</p>]]></description></item><item>    <title><![CDATA[LMK1D210x低附加抖动LVDS缓冲器的深度解析与应用指南]]></title>    <link>https://www.elecfans.com/d/7642008.html</link>    <guid>https://www.elecfans.com/d/7642008.html</guid>    <pubDate>2026-02-06 17:10:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7642008" value="https://file1.elecfans.com/web3/M00/4B/13/wKgZPGmFp12AJ-BEAC4igR5_GR4325.pdf"/><h1>LMK1D210x低附加抖动LVDS缓冲器的深度解析与应用指南</h1>
<p>在电子设计领域，<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a><a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>的精确分配至关重要，它直接影响着整个系统的性能和稳定性。今天，我们就来深入探讨<a href="https://www.elecfans.com/tags/德州仪器/" target="_blank"><u>德州仪器</u></a>（<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>）推出的LMK1D210x系列低附加抖动LVDS缓冲器，包括LMK1D2106和LMK1D2108两款产品，看看它们在时钟分配方面能为我们带来哪些出色的解决方案。</p><p>文件下载：<a href="javascript:;" data-annex="annex0_7642008" target="_blank">lmk1d2106.pdf</a></p>
<h2>一、产品特性亮点</h2>
<h3>高性能时钟缓冲</h3>
<p>LMK1D210x属于高性能LVDS<a href="https://www.elecfans.com/tags/时钟缓冲器/" target="_blank"><u>时钟缓冲器</u></a>家族，支持高达2 GHz的时钟频率，能够满足大多数高速应用的需求。它有双1:6（LMK1D2106）和双1:8（LMK1D2108）的差分缓冲配置，为时钟信号的分配提供了灵活的选择。</p>
<h3>低附加抖动与低相噪</h3>
<p>在抖动和相噪方面，LMK1D210x表现卓越。其最大附加抖动在12kHz至20 - MHz频段内，于156.25 MHz时钟频率下小于60 fs <a href="https://m.hqchip.com/app/1718" target="_blank"><u>RMS</u></a>，典型相噪底板低至 - 164 dBc/Hz，这使得它在对时钟精度要求极高的应用中也能游刃有余。</p>
<h3>宽<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>电压范围</h3>
<p>这款缓冲器的电源电压范围为1.71 V至3.465 V，能够适应多种不同的电源环境，为设计带来了更大的灵活性。</p>
<h3>低传播延迟与低输出偏斜</h3>
<p>传播延迟最大小于575 ps，输出偏斜最大为20 ps，确保了时钟信号在传输过程中的准确性和一致性，减少了信号失真的风险。</p>
<h3>高摆幅LVDS输出</h3>
<p>通过AMP_SEL引脚，可选择高摆幅LVDS输出模式（增强模式），典型输出电压差（VOD）可达500 - mV，增强了信号的驱动能力。</p>
<h3>输出银行使能/禁用功能</h3>
<p>利用EN引脚，能够方便地对输出银行进行使能或禁用操作，提高了系统的可配置性。</p>
<h3>通用输入兼容性</h3>
<p>输入支持LVDS、LVPECL、LVCMOS、HCSL和CML等多种信号电平，可与不同类型的时钟源轻松连接。</p>
<h3>工业级温度范围</h3>
<p>工作温度范围为 - 40°C至105°C，适用于各种恶劣的工业环境。</p>
<h3>小型封装</h3>
<p>LMK1D2106采用6 - mm × 6 - mm、40 - 引脚的VQFN（RHA）封装，LMK1D2108采用7 - mm × 7 - mm、48 - 引脚的VQFN（RGZ）封装，节省了电路板空间。</p>
<h2>二、应用领域广泛</h2>
<h3><a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>与网络</h3>
<p>在通信和网络设备中，精确的时钟信号对于数据的同步和传输至关重要。LMK1D210x的低抖动和低偏斜特性，能够确保时钟信号的稳定分配，提<a href="https://www.elecfans.com/tags/高通/" target="_blank"><u>高通</u></a>信系统的性能和可靠性。</p>
<h3>医疗成像</h3>
<p>医疗成像设备对时钟信号的精度要求极高，以保证图像的清晰和准确。LMK1D210x的高性能表现使其成为医疗成像领域的理想选择。</p>
<h3>测试与测量</h3>
<p>在测试和测量仪器中，需要精确的时钟信号来进行数据采集和分析。LMK1D210x能够提供稳定可靠的时钟分配，满足<a href="https://www.elecfans.com/soft/data/50-103/" target="_blank"><u>测试测量</u></a>设备的<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>要求。</p>
<h3>无线基础设施</h3>
<p>无线基站等无线基础设施需要高质量的时钟信号来保证信号的同步和调制。LMK1D210x的高性能特性能够为无线基础设施提供可靠的时钟支持。</p>
<h3>专业音视频与 signage</h3>
<p>在专业音视频和数字标牌系统中，时钟信号的准确性对于音视频的同步和显示效果至关重要。LMK1D210x能够确保时钟信号的稳定分配，提升音视频系统的整体性能。</p>
<h2>三、详细产品描述</h2>
<h3>时钟分配原理</h3>
<p>LMK1D210x时钟缓冲器能够将两个时钟输入（IN0和IN1）分别分配到多个差分LVDS时钟输出。在LMK1D2106中，可输出12对时钟（OUT0至OUT11）；在LMK1D2108中，可输出16对时钟（OUT0至OUT15），且能保证最小的时钟分配偏斜。</p>
<h3>输入输出特性</h3>
<p>输入支持多种信号电平，输出为LVDS差分信号。在单端模式下输入时，需对未使用的负输入引脚施加适当的偏置电压。</p>
<h3>输出银行控制</h3>
<p>通过EN引脚可控制输出银行的使能或禁用。当EN引脚悬空时，两个输出银行均启用；当EN引脚置为逻辑“0”时，两个输出银行均禁用；当EN引脚置为逻辑“1”时，一个银行的输出启用，另一个银行的输出禁用。</p>
<h3>故障保护输入功能</h3>
<p>LMK1D210x支持故障保护输入操作，允许在施加VDD之前驱动设备输入而不损坏设备。同时，它还具有输入迟滞特性，可防止在无输入信号时输出随机振荡，即使输入引脚悬空也能正常工作。</p>
<h2>四、规格参数解析</h2>
<h3>绝对最大额定值</h3>
<p>在使用过程中，我们需要关注绝对最大额定值，如电源电压、输入电压、输出电压、输入<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>、输出电流、结温等参数的限制，避免超出这些范围对设备造成永久性损坏。</p>
<h3><a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a>额定值</h3>
<p>该系列产品的人体模型（HBM）静电放电额定值为±3000 V，带电设备模型（CDM）静电放电额定值为±1000 V，在使用和处理过程中要注意静电防护。</p>
<h3>推荐工作条件</h3>
<p>推荐的电源电压范围为1.8 V、2.5 V或3.3 V，工作温度范围为 - 40°C至105°C，电源电压斜坡要求为单调斜坡（10 - 90 %的VDD），时间在0.1至20 ms之间。</p>
<h3>热信息</h3>
<p>了解器件的热特性对于确保其正常工作至关重要。LMK1D210x的热阻参数，如结到环境热阻、结到外壳热阻、结到电路板热阻等，为我们在散热设计提供了重要依据。</p>
<h3><a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性</h3>
<p>电气特性包括电源供应特性、输入输出特性等。例如，静态核心电源电流在不同配置下有所不同，输入输出电压、电流、频率等参数也有相应的规定，这些参数是我们进行<a href="https://www.elecfans.com/v/tag/167/" target="_blank"><u>电路设计</u></a>和性能评估的重要参考。</p>
<h2>五、典型特性曲线分析</h2>
<p>文档中给出了不同条件下的典型特性曲线，如电流消耗随输入频率和电源电压的变化曲线，以及差分输出电压（VOD）随频率的变化曲线。通过分析这些曲线，我们可以更好地了解器件在不同工作条件下的性能表现，为实际应用提供指导。</p>
<h2>六、参数测量信息</h2>
<p>文档中详细介绍了各项参数的测量方法和测试配置，如LVDS输出的直流和交流配置、输入输出偏斜和器件间偏斜的测量方法等。了解这些测量信息有助于我们准确评估器件的性能，确保设计的准确性。</p>
<h2>七、应用与实现案例</h2>
<h3>典型应用设计</h3>
<p>以JESD204B/C <a href="https://www.elecfans.com/tags/adc/" target="_blank"><u>ADC</u></a>系统为例，LMK1D210x可用于扇出<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a>C时钟和SYSREF时钟。其低输出偏斜、低附加抖动和出色的双银行杂散抑制特性，使其成为该系统时钟分配的简单、可靠且低成本的解决方案。</p>
<h3>设计注意事项</h3>
<p>在设计过程中，需要注意输入输出的<a href="https://www.elecfans.com/tags/耦合/" target="_blank"><u>耦合</u></a>方式和终端匹配。A<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>时钟接收器模块通常采用<a href="https://m.hqchip.com/app/1703" target="_blank"><u>AC</u></a>耦合，而SYSREF时钟接收器模块在共模电压匹配的情况下可采用DC耦合。未使用的输出建议采用100 - Ω<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>进行差分终端匹配，以获得最佳性能。</p>
<h3>应用曲线分析</h3>
<p>通过实际的应用曲线可以看到，LMK1D210x在低噪声源驱动下，输出的附加抖动很低，进一步验证了其在实际应用中的出色性能。</p>
<h2>八、电源供应与布局建议</h2>
<h3>电源供应</h3>
<p>高性能时钟缓冲器对电源噪声非常敏感，因此需要采取有效的电源滤波和去耦措施。建议使用滤波<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>消除低频噪声，旁路电容提供高频噪声的低阻抗路径，并将旁路电容靠近电源引脚放置，以减少电感。同时，可考虑在板级电源和芯片电源之间插入铁氧体磁珠，隔离高频开关噪声。</p>
<h3>布局指南</h3>
<p>为了确保器件的可靠性和性能，需要注意布局设计。器件封装有暴露的焊盘，应将其焊接到印刷电路板上，以提供主要的散热路径。在<a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>布局中，应在封装的占位区内设计热焊盘和多个过孔连接到接地平面，以增强散热效果。</p>
<h2>九、支持资源与注意事项</h2>
<h3>文档支持</h3>
<p>TI提供了丰富的相关文档，如评估板用户指南、<a href="https://www.elecfans.com/analog/" target="_blank"><u>模拟</u></a>设计期刊和应用报告等，可帮助我们更好地了解和使用该产品。</p>
<h3>文档更新通知</h3>
<p>通过ti.com上的设备产品文件夹，我们可以订阅文档更新通知，及时获取产品信息的变化。</p>
<h3>支持<a href="https://www.elecfans.com/article/bbs/" target="_blank"><u>论坛</u></a></h3>
<p>TI E2E™支持论坛是获取快速、准确答案和设计帮助的好地方，我们可以在这里与专家和其他<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>交流经验。</p>
<h3>静电放电注意事项</h3>
<p>该<a href="https://www.elecfans.com/v/tag/123/" target="_blank"><u>集成电路</u></a>容易受到静电放电的损坏，在处理和安装过程中要采取适当的静电防护措施，避免因静电放电导致器件性能下降或损坏。</p>
<p>总之，LMK1D210x系列低附加抖动LVDS缓冲器凭借其出色的性能和丰富的功能，为时钟分配应用提供了优秀的解决方案。在实际设计中，我们需要充分了解其特性和规格参数，结合应用需求进行合理的设计和布局，以发挥其最大的优势。大家在使用过程中遇到过哪些问题或者有什么独特的应用经验呢？欢迎在评论区分享交流。 </p>]]></description></item><item>    <title><![CDATA[德州仪器CDCDB400：PCIe时钟缓冲器的理想之选]]></title>    <link>https://www.elecfans.com/d/7642009.html</link>    <guid>https://www.elecfans.com/d/7642009.html</guid>    <pubDate>2026-02-06 17:10:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7642009" value="https://file1.elecfans.com/web3/M00/4B/13/wKgZO2mFp12AJw3LAByC2Sft1_w396.pdf"/><h1><a href="https://www.elecfans.com/tags/德州仪器/" target="_blank"><u>德州仪器</u></a>C<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>DB400：PCIe<a href="https://www.elecfans.com/tags/时钟缓冲器/" target="_blank"><u>时钟缓冲器</u></a>的理想之选</h1>
<p>在电子设计领域，<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>缓冲器对于确保系统时钟<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>的稳定传输至关重要。今天，我们就来深入探讨一下德州仪器（<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>Te</u></a>xas Instruments）的CDCDB400时钟缓冲器，它专为PCIe Gen 1至Gen 7<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>设计，具备诸多出色特性，能满足多种应用场景的需求。</p><p>文件下载：<a href="javascript:;" data-annex="annex0_7642009" target="_blank">cdcdb400.pdf</a></p>
<h2>一、产品概述</h2>
<p>CDCDB400是一款符合DB800ZL标准的4输出LP - HCSL时钟缓冲器，可用于分配PCIe Gen 1 - 7、QuickPath Interconnect（Q<a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>PI</u></a>）、UPI、<a href="https://m.hqchip.com/app/1686" target="_blank"><u>SAS</u></a>和<a href="https://www.hqchip.com/app/1686" target="_blank"><u>SATA</u></a>接口的参考时钟，支持Common Clock（CC）和Individual Reference（IR）架构，并且与扩频兼容。它采用5mm × 5mm、32引脚的VQFN封装，集成度高，适合多种应用场景。</p>
<h2>二、产品特性亮点</h2>
<h3>1. 低抖动性能</h3>
<p>CDCDB400在不同<a href="https://www.elecfans.com/tags/滤波器/" target="_blank"><u>滤波器</u></a>下展现出极低的附加相位抖动。例如，经过PCIE Gen 7滤波器后，附加相位抖动<a href="https://m.hqchip.com/app/1718" target="_blank"><u>RMS</u></a>最大值仅为11.3fs；经过PCIE Gen 6滤波器后为16.1fs；经过PCIE Gen 5滤波器后为25fs；经过DB2000Q滤波器后为38fs。这种低抖动特性对于对时钟信号质量要求极高的PCIe系统来说至关重要，能够有效减少信号干扰和误码率。</p>
<h3>2. 灵活的输出配置</h3>
<ul>
<li><strong>输出端接阻抗可<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a></strong>：支持85Ω（默认）或100Ω的差分输出端接，可根据不同的应用场景和电路板特性进行灵活调整，提高信号传输的匹配度。</li>
<li><strong>输出使能控制</strong>：配备4个硬件输出使能（OE#）控制引脚，结合SMBus接口，可对四个输出通道进行单独配置和控制，方便实现不同的时钟分配策略。</li>
</ul>
<h3>3. 快速响应与低延迟</h3>
<p>输出到输出的偏斜（skew）小于50ps，输入到输出的延迟（delay）小于3ns，确保时钟信号能够快速、准确地传输到各个目标设备，减少系统的时序误差。</p>
<h3>4. 其他特性</h3>
<ul>
<li><strong>故障安全输入</strong>：支持故障安全输入操作，允许在施加(V_{DD})之前驱动设备输入而不会损坏设备，提高了系统的可靠性。</li>
<li><strong>可编程输出摆率控制</strong>：通过SMBus控制寄存器CAPTRIM，可在一定范围内改变4个输出（CK0 - CK3）的摆率，以补偿因电路板设计导致的输出走线长度增加问题。</li>
<li><strong>可选SMBus地址</strong>：提供3个可选的SMBus地址，方便在多设备系统中进行地址分配，避免地址冲突。</li>
</ul>
<h2>三、引脚配置与功能</h2>
<p>CDCDB400的32引脚VQFN封装具有明确的引脚功能定义：</p>
<h3>1. 输入时钟引脚</h3>
<p>CLKIN_P和CLKIN_N为LP - HCSL差分时钟输入，通常直接连接到时钟源的差分输出，输入频率范围为50 - 250MHz，输入电压摆幅为200 - 2300mV Diff - peak。</p>
<h3>2. 输出时钟引脚</h3>
<p>CK0_P - CK3_P和CK0_N - CK3_N为4个通道的LP - HCSL差分时钟输出，通常直接连接到PCIe差分时钟输入。如果某个通道未使用，相应引脚可悬空。</p>
<h3>3. 管理与控制引脚</h3>
<ul>
<li>CKPWRGD_PD#：为时钟<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>正常和电源关断多功能输入引脚，内部有180kΩ下拉<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>。用于控制设备的电源状态，低电平为电源关断模式，所有输出通道呈三态；高电平为正常工作模式。</li>
<li>OE0# - OE3#：分别控制4个输出通道的使能状态，低电平有效，内部有180kΩ下拉电阻。</li>
</ul>
<h3>4. SMBus接口引脚</h3>
<ul>
<li>SADR0：SMBus地址选择引脚，可设置为高、中、低三个电平，用于配置SMBus地址。</li>
<li>SMBDAT和SMBCLK：分别为SMBus接口的数据和时钟引脚，通常使用外部上拉电阻上拉到3.3V VDD。</li>
</ul>
<h3>5. 电源与接地引脚</h3>
<ul>
<li>V<a href="https://www.hqchip.com/app/1729" target="_blank"><u>DDR</u></a>：输入时钟接收器的电源输入，需连接到3.3V电源轨，并使用去耦电容连接到GND。</li>
<li>VDD：输出通道和核心电压的3.3V电源。</li>
<li>GND：接地引脚，需将接地焊盘连接到系统地。</li>
</ul>
<h2>四、<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性</h2>
<h3>1. <a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>消耗</h3>
<p>在不同工作模式下，CDCDB400的电流消耗表现出色。例如，在核心电源电流方面，工作模式下CKPWRGD_PD# = 1时为8.5 - 2mA；电源关断模式下CKPWRGD_PD# = 0时电流极低。在IO电源电流方面，所有输出禁用时为18mA，所有输出激活且频率为100MHz时，每个输出为8.5mA，电源关断模式下为1.5mA。</p>
<h3>2. 时钟输入与输出特性</h3>
<p>输入和输出频率范围均为50 - 250MHz，输入和输出<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>分别为2.2pF和4pF左右。输出高电压和低电压在规定范围内，能够满足不同设备的输入要求。</p>
<h3>3. 时序特性</h3>
<ul>
<li>电源正常断言到稳定时钟输出时间（tSTABLE）为1.8ms（CKPWRGD_PD#从0到1，fIN = 100MHz）。</li>
<li>输出使能断言到稳定时钟输出时间（tOE）为10个CLKIN周期（OEx#从1到0）。</li>
<li>电源关断断言到无时钟输出时间（tPD）为3个CLKIN周期（CKPWRGD_PD#从1到0）。</li>
</ul>
<h2>五、应用场景</h2>
<p>CDCDB400适用于多种领域的应用：</p>
<h3>1. 服务器领域</h3>
<p>包括微服务器、塔式服务器和机架服务器等，可将PCIe参考时钟从<a href="https://m.hqchip.com/app/1381" target="_blank"><u>处理器</u></a>芯片组的PCH分配到多个端点，确保服务器系统的稳定运行。</p>
<h3>2. 存储领域</h3>
<p>如存储区域网络、网络附加存储和主机总线适配卡等，为存储设备提供稳定的时钟信号，提高数据传输的准确性和可靠性。</p>
<h3>3. <a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>领域</h3>
<p>可用于通信<a href="https://www.elecfans.com/v/tag/1392/" target="_blank"><u>交换机</u></a>、计算机模块等设备，满足通信系统对时钟信号的<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>要求。</p>
<h3>4. 其他领域</h3>
<p>还可应用于硬件加速器、CT和PET扫描仪、坚固型笔记本<a href="https://m.elecfans.com/v/tag/1247/" target="_blank"><u>电脑</u></a>等设备中。</p>
<h2>六、设计与应用建议</h2>
<h3>1. 输出使能控制方法</h3>
<p>可选择使用SMBus编程寄存器（软件）或硬件OE#引脚来控制输出。使用软件控制时，硬件OE#引脚可悬空；使用硬件控制时，将OE#引脚连接到GPIO<a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a>，并设置相应的高低电平。</p>
<h3>2. SMBus地址选择</h3>
<p>从表7 - 1中选择合适的SMBus地址，并在SADR0引脚放置适当的上拉或下拉电阻，确保地址不冲突。</p>
<h3>3. 电源供应</h3>
<p>高性能时钟缓冲器对电源噪声敏感，应使用滤波电容消除低频噪声，旁路电容提供高频噪声低阻抗路径。建议在板级电源和芯片电源之间插入铁氧体磁珠，隔离时钟缓冲器产生的高频开关噪声。</p>
<h3>4. 布局设计</h3>
<ul>
<li>所有连接到CKx引脚的传输线应根据输出阻抗设置为85Ω差分阻抗（42.5Ω单端阻抗）或100Ω差分阻抗（50Ω单端阻抗），并尽量减少传输线上的短截线。</li>
<li>参考<a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>布局示例，确保良好的热性能和低电感接地连接。</li>
</ul>
<h2>七、支持与资源</h2>
<h3>1. 设备支持</h3>
<p>可使用<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>CS Pro离线软件工具进行EVM编程和<a href="https://www.elecfans.com/tags/寄存器/" target="_blank"><u>寄存器</u></a>映射生成，以配置设备用于特定应用。工具下载地址：<a href="https://www.elecfans.com/outside?redirect=https://www.ti.com/tool/TICSPRO" target="_blank">https://www.ti.com/tool/TICSPRO</a> - SW。</p>
<h3>2. 文档支持</h3>
<p>可参考相关文档，如Texas Instruments的CDCDB800/803超低附加抖动、8输出PCIe Gen1到Gen5时钟缓冲器文档。</p>
<h3>3. 通知更新</h3>
<p>在ti.com上的设备产品文件夹中注册通知，可接收文档更新的每周摘要。</p>
<h3>4. 技术支持</h3>
<p>TI E2E™支持<a href="https://www.elecfans.com/article/bbs/" target="_blank"><u>论坛</u></a>是获取快速、验证答案和设计帮助的好地方，可搜索现有答案或提出自己的问题。</p>
<p>总之，德州仪器的CDCDB400时钟缓冲器凭借其低抖动、灵活配置、快速响应等出色特性，为PCIe系统的时钟分配提供了可靠的解决方案。在实际设计中，我们需要根据具体应用场景，合理选择输出控制方式、SMBus地址，优化电源供应和布局设计，以充分发挥其性能优势。大家在使用过程中遇到过哪些问题呢？欢迎在评论区交流分享。 </p>]]></description></item><item>    <title><![CDATA[高速时钟分配新利器——LMK1D1208P LVDS缓冲器深度解析]]></title>    <link>https://www.elecfans.com/d/7642010.html</link>    <guid>https://www.elecfans.com/d/7642010.html</guid>    <pubDate>2026-02-06 17:10:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7642010" value="https://file1.elecfans.com/web3/M00/4B/13/wKgZPGmFp16AVYCyAB551yZuXKU273.pdf"/><h1>高速<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>分配新利器——LMK1D1208P LVDS缓冲器深度解析</h1>
<p>在电子系统设计中，时钟<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>的精确分配至关重要，它直接影响着系统的性能和稳定性。特别是在高速<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>、医疗成像等领域，对时钟信号的质量和分配精度要求极高。<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>推出的LMK1D1208P <a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>Pi</u></a>n - Control<a href="https://www.hqchip.com/app/1721" target="_blank"><u>led</u></a> OE Low <a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>Ad</u></a>ditive Jit<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>r LVDS Buffer，为这些应用场景提供了出色的解决方案。下面我们就来深入了解这款产品。</p><p>文件下载：<a href="javascript:;" data-annex="annex0_7642010" target="_blank">lmk1d1208p.pdf</a></p>
<h2>产品特性亮点</h2>
<h3>高性能时钟分配能力</h3>
<p>LMK1D1208P属于高性能LVDS<a href="https://www.elecfans.com/tags/时钟缓冲器/" target="_blank"><u>时钟缓冲器</u></a>家族，具备2个输入和8个输出（2:8）的配置，能够将两个可选的时钟输入信号（IN0和IN1）分配到8对差分LVDS时钟输出（OUT0 - OUT7），为系统提供了灵活的时钟源选择和多路同步时钟输出。其输出频率最高可达2 GHz，能满足大多数高速应用的需求。</p>
<h3>超低抖动与噪声性能</h3>
<p>低抖动是衡量时钟信号质量的关键指标之一。LMK1D1208P在156.25 MHz频率下，12 kHz至20 MHz积分范围内的最大加性抖动小于60 fs <a href="https://m.hqchip.com/app/1718" target="_blank"><u>rms</u></a>，能够有效减少时钟信号的相位误差，从而提高系统的稳定性和可靠性。同时，它还具有极低的相位噪声底，典型值为 - 164 dBc/Hz，这使得在高速数据传输过程中，时钟信号能够保持干净、稳定，减少噪声干扰。</p>
<h3>引脚灵活控制</h3>
<p>该器件提供了丰富的硬件引脚，可对单个输出进行独立的使能或禁用操作。通过设置对应的OEx引脚为逻辑高电平1，可使LVDS差分输出正常工作；而设置为逻辑低电平0时，输出将处于高阻（Hi - Z）状态，从而降低功耗。此外，IN_SEL引脚用于选择将哪个输入信号路由到输出，方便用户根据实际需求切换时钟源。</p>
<h3>宽<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>电压范围与温度适应性</h3>
<p>LMK1D1208P支持1.8 V、2.5 V和3.3 V ± 5%的电源电压，适用于多种不同的电源环境。其工作温度范围为 - 40°C至105°C，能够在工业级温度环境下稳定工作，满足了各种恶劣工业应用场景的需求。</p>
<h3>通用输入兼容性</h3>
<p>它的输入具有很强的通用性，能够接收LVDS、LVPECL、LVCMOS、HCSL和CML等多种类型的信号，方便与不同类型的时钟源或<a href="https://bbs.elecfans.com/group_755" target="_blank"><u>驱动电路</u></a>进行<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>连接。同时，还提供了LVDS参考电压V<a href="https://m.hqchip.com/app/1703" target="_blank"><u>AC</u></a>_REF，可用于<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a><a href="https://www.elecfans.com/tags/耦合/" target="_blank"><u>耦合</u></a>输入。</p>
<h2>产品规格细节</h2>
<h3>绝对最大额定值</h3>
<p>了解器件的绝对最大额定值是确保其安全可靠工作的基础。LMK1D1208P的电源电压（VDD）最大为3.6 V，输入电压（VIN）和输出电压（VO）也有相应的限制范围，输入<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>（IIN）和连续输出电流（IO）同样有具体的最大值要求。此外，结温（TJ）最大为135°C，存储温度范围为 - 65°C至150°C。超出这些额定值可能会导致器件永久性损坏，因此在设计时必须严格遵守。</p>
<h3><a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a>（静电放电）额定值</h3>
<p>在实际应用中，静电放电是一个不容忽视的问题，它可能会对器件造成损害。LMK1D1208P在人体模型（HBM）下，所有引脚的ESD额定值为 ±3000 V，在带电设备模型（CDM）下为 ±1000 V。在生产和使用过程中，必须采取适当的静电防护措施，以确保器件的可靠性。</p>
<h3>推荐工作条件</h3>
<p>为了使器件能够正常、稳定地工作，需要遵循推荐的工作条件。如核心电源电压在不同供电模式下有相应的取值范围，3.3 - V供电时为3.135 - 3.465 V，2.5 - V供电时为2.375 - 2.625 V，1.8 - V供电时为1.71 - 1.89 V。同时，电源电压的上升斜率也有要求，需在0.1 - 20 ms内实现单调上升。工作自由空气温度范围为 - 40°C至105°C，结温范围为 - 40°C至135°C。</p>
<h3><a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性</h3>
<p>器件的电气特性决定了其在不同条件下的性能表现。例如，在所有输出启用且未端接、频率为0 Hz时，静态核心电源电流（IDD STAT）典型值为75 mA；当所有输出启用、负载<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>RL = 100 Ω、频率为100 MHz时，核心电源电流（IDD 100M）最大为110 mA。输入和输出的电压、电流、电容等参数也都有详细的规定，这些参数对于<a href="https://www.elecfans.com/v/tag/167/" target="_blank"><u>电路设计</u></a>和性能评估非常重要。</p>
<h3>典型特性曲线</h3>
<p>通过典型特性曲线，我们可以直观地了解器件在不同工作条件下的性能变化。如LMK1D1208P的电流消耗与输入频率和电源电压的关系曲线，以及差分输出电压（VOD）随频率的变化曲线。这些曲线为用户在选择合适的工作频率和电源电压时提供了重要参考。</p>
<h2>应用与设计要点</h2>
<h3>典型应用场景</h3>
<p>LMK1D1208P适用于多个领域，包括电信和网络、医疗成像、测试与测量、无线基础设施以及专业<a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a>、视频和 signage等。在这些应用中，它能够为系统提供<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>、低抖动的时钟信号分配，确保各个子系统的同步运行。</p>
<h3>设计要求与步骤</h3>
<p>以典型的线卡应用为例，需要选择合适的输入信号，如156.25 - MHz的LVDS时钟或LVCMOS时钟。对于LVDS时钟，采用AC耦合并使用集成的参考电压发生器进行偏置；对于LVCMOS时钟，使用电阻分压器正确设置<a href="https://www.elecfans.com/tags/阈值电压/" target="_blank"><u>阈值电压</u></a>。输入信号选择后，可将其扇出到所需的设备，如PHY、<a href="https://bbs.elecfans.com/zhuti_fpga_1.html" target="_blank"><u>ASIC</u></a>、<a href="https://www.elecfans.com/soft/data/30-91/" target="_blank"><u>FPGA</u></a>和<a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>CPU</u></a>等。不同的设备可能需要不同的耦合方式和终端匹配，如PHY和ASIC具有内部终端匹配，无需额外组件；FPGA和CPU需要外部AC耦合电容。</p>
<p>在设计过程中，要注意输入和输出的终端匹配，确保信号完整性。对于未使用的输出，应使用相应的OEx引脚将其禁用，以降低功耗并消除终端电阻的需求。同时，电源供应的滤波和去耦也非常关键，可使用滤波电容消除低频噪声，旁路电容提供高频噪声的低阻抗路径。建议在电源引脚附近添加多个高频旁路电容，并在板级电源和芯片电源之间插入铁氧体磁珠，以隔离高频开关噪声。</p>
<h3><a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>布局要点</h3>
<p>良好的PCB布局对于器件的性能和可靠性至关重要。为了确保芯片的温度在安全范围内，需将芯片的裸片温度限制在最大135°C以内。该器件的封装有一个外露焊盘，它是主要的散热路径，需要在PCB封装的焊盘内设计一个包含多个过孔到接地层的散热焊盘图案，并将散热焊盘焊接到PCB上，以确保良好的散热性能。同时，要注意布线的长度、间距和阻抗匹配，减少信号干扰和反射。</p>
<h2>与其他同类产品对比</h2>
<p>文档中还给出了LMK1D1208P与其他同类产品的对比表格。不同的产品在输出通道数量、输出摆幅控制方式、封装尺寸等方面存在差异。例如，LMK1D1208P通过引脚控制单个输出使能，而部分产品采用全局输出使能控制。在选择产品时，需要根据具体的应用需求，综合考虑这些因素，选择最适合的器件。</p>
<h2>总结</h2>
<p>LMK1D1208P以其高性能、低抖动、灵活的引脚控制和广泛的兼容性，为电子系统的时钟分配提供了优秀的解决方案。在实际应用中，<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>需要深入理解其特性、规格和设计要点，合理进行电路设计和PCB布局，以充分发挥该器件的优势，提高系统的性能和可靠性。你在使用这款器件或者类似的时钟缓冲器时，遇到过哪些问题呢？欢迎在评论区分享。 </p>]]></description></item><item>    <title><![CDATA[高性能低抖动LVDS缓冲器：LMK1D210x的技术剖析与应用指南]]></title>    <link>https://www.elecfans.com/d/7642011.html</link>    <guid>https://www.elecfans.com/d/7642011.html</guid>    <pubDate>2026-02-06 17:10:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7642011" value="https://file1.elecfans.com/web3/M00/4B/13/wKgZPGmFp12AJ-BEAC4igR5_GR4325.pdf"/><h1>高性能低抖动LVDS缓冲器：LMK1D210x的技术剖析与应用指南</h1>
<p>在电子设计领域，<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a><a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>的精确分配对系统性能至关重要。今天，我们聚焦于<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>的LMK1D210x系列低附加抖动LVDS缓冲器，深入探讨其特性、应用及设计要点。</p><p>文件下载：<a href="javascript:;" data-annex="annex0_7642011" target="_blank">lmk1d2108.pdf</a></p>
<h2>一、LMK1D210x系列概述</h2>
<p>LMK1D210x系列包括LMK1D2106和LMK1D2108两款产品。这是一款高性能LVDS<a href="https://www.elecfans.com/tags/时钟缓冲器/" target="_blank"><u>时钟缓冲器</u></a>家族，具备高达2GHz的工作频率，能实现双路1:6或1:8的差分缓冲功能。其工作电压范围为1.71V至3.465V，可适应多种<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>环境。</p>
<h3>1.1 关键特性亮点</h3>
<ul>
<li><strong>低附加抖动</strong>：在12kHz至20MHz的积分范围内，156.25MHz时钟信号下最大附加抖动小于60fs <a href="https://m.hqchip.com/app/1718" target="_blank"><u>RMS</u></a>，这意味着在时钟分配过程中能有效减少信号误差，提高系统的稳定性和精度。</li>
<li><strong>极低相位噪声</strong>：典型相位噪声低至 -164 dBc/Hz，有助于降低信号干扰，提升信号质量。</li>
<li><strong>快速传播延迟</strong>：最大传播延迟小于575ps，确保时钟信号能够快速准确地传输到各个输出端。</li>
<li><strong>输出偏差极小</strong>：最大输出偏差仅20ps，保证了多个输出时钟信号之间的同步性。</li>
<li><strong>高摆幅LVDS</strong>：当AMP_SEL = 1时，典型差分输出电压幅度可达500mV VOD，满足一些对信号幅度有较高要求的应用场景。</li>
<li><strong>灵活的输出控制</strong>：通过EN引脚可实现输出组的开启或关闭，方便系统节能和控制。</li>
<li><strong>通用输入兼容性</strong>：能够接受LVDS、LVPECL、LVCMOS、HCSL和CML等多种信号电平，增强了与不同电路的适配性。</li>
</ul>
<h3>1.2 产品封装信息</h3>
<table>
<thead>
<tr>
<th>型号</th>
<th>封装</th>
<th>尺寸</th>
</tr>
</thead>
<tbody>
<tr>
<td>LMK1D2106</td>
<td>6 - mm × 6 - mm, 40 - <a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>pi</u></a>n VQFN (RHA)</td>
<td>6.00 mm × 6.00 mm</td>
</tr>
<tr>
<td>LMK1D2108</td>
<td>7 - mm × 7 - mm, 48 - pin VQFN (RGZ)</td>
<td>7.00 mm × 7.00 mm</td>
</tr>
</tbody>
</table>
<p>不同的封装尺寸可根据实际<a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>布局和空间要求进行选择。</p>
<h2>二、应用领域广泛</h2>
<p>LMK1D210x凭借其优秀的性能，在多个领域都有广泛的应用。</p>
<ul>
<li><strong>电信与网络</strong>：在高速数据传输和<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>系统中，精确的时钟分配对数据同步和传输准确性至关重要。LMK1D210x的低抖动和低偏差特性能够满足这些系统的严格要求。</li>
<li><strong>医疗成像</strong>：医疗设备对信号质量和稳定性要求极高，LMK1D210x可以为成像设备提供稳定的时钟信号，确保图像的清晰和准确。</li>
<li><strong>测试与测量</strong>：在<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>的测试和测量仪器中，需要精确的时钟信号来保证测量结果的可靠性。该系列缓冲器能够提供高质量的时钟信号，满足测试设备的需求。</li>
<li><strong>无线基础设施</strong>：如基站、无线接入点等设备，需要稳定的时钟信号来支持<a href="https://www.elecfans.com/soft/data/43-45/" target="_blank"><u>无线通信</u></a>的正常运行。LMK1D210x的高性能能够确保无线信号的准确传输和接收。</li>
<li><strong>专业音视频与显示</strong>：在音视频处理和显示系统中，准确的时钟信号对音视频同步和画质显示起着关键作用。该系列缓冲器可以提供稳定的时钟，提升音视频质量。</li>
</ul>
<h2>三、详细功能解析</h2>
<h3>3.1 功能框图与<a href="https://m.elecfans.com/v/tag/773/" target="_blank"><u>工作原理</u></a></h3>
<p>LMK1D210x的核心是通过CMOS<a href="https://m.hqchip.com/app/1555" target="_blank"><u>晶体管</u></a>控制输出<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>。它有两个输入（IN0和IN1），在LMK1D2108中可将时钟信号分配到16对差分LVDS输出（OUT0至OUT15），在LMK1D2106中可分配到12对输出（OUT0至OUT11）。每个缓冲模块由一个输入和最多6（LMK1D2106）或8（LMK1D2108）个LVDS输出组成。</p>
<h3>3.2 特色功能详述</h3>
<ul>
<li><strong>故障安全输入功能</strong>：该系列产品支持故障安全输入操作，在未施加VDD电源时驱动设备输入不会损坏器件。同时，内部的输入迟滞特性可防止在没有输入信号时输出随机振荡，允许输入引脚悬空。这一设计增强了系统的可靠性和抗干扰能力。</li>
<li><strong>输出组控制</strong>：通过EN引脚可以灵活控制输出组的状态。当EN引脚悬空时，两个输出组均开启；当EN引脚为逻辑“0”时，两个输出组均关闭；当EN引脚为逻辑“1”时，一个输出组开启，另一个关闭。这种控制方式方便系统实现节能和功能选择。</li>
<li><strong>输出幅度控制</strong>：AMP_SEL引脚用于选择输出幅度。用户可以根据实际应用需求，选择标准LVDS摆幅（350mV）或更高的摆幅（500mV）。在对信号幅度要求较高的应用中，如长距离传输或对噪声敏感的环境，可选择更高的摆幅来提高信号的抗干扰能力。</li>
</ul>
<h2>四、<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性与性能指标</h2>
<h3>4.1 绝对最大额定值与<a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a>防护</h3>
<p>在使用LMK1D210x时，需要注意其绝对最大额定值，如电源电压范围为 -0.3V至3.6V，输入电压范围为 -0.3V至3.6V等。超出这些额定值可能会对器件造成永久性损坏。同时，该器件具有一定的ESD防护能力，人体模型（HBM）下为 ±3000V，充电器件模型（CDM）下为 ±1000V。在实际操作中，仍需采取适当的ESD防护措施，以确保器件的安全。</p>
<h3>4.2 推荐工作条件</h3>
<p>推荐的电源电压有1.8V、2.5V和3.3V三种可选，每种电压都有相应的电压范围。例如，1.8V电源时，电压范围为1.71V至1.89V。此外，工作温度范围为 -40°C至105°C，结温范围为 -40°C至135°C。在设计电路时，应确保器件在推荐的工作条件下运行，以保证其性能的稳定性和可靠性。</p>
<h3>4.3 电气参数分析</h3>
<ul>
<li><strong>电源电流</strong>：在不同的工作频率和输出状态下，器件的电源电流会有所变化。例如，在静态情况下（所有输出开启且未端接，f = 0 Hz），LMK1D2106的静态核心电源电流典型值为75mA，LMK1D2108为80mA。当工作频率为100MHz且所有输出开启、负载<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>为100Ω时，电流会相应增加。</li>
<li><strong>输入输出特性</strong>：输入频率方面，单端LVCMOS/LVTTL时钟输入频率范围为<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>至250MHz，差分时钟输入频率可达2GHz。输出特性包括差分输出电压幅度、共模输出电压等。通过调整AMP_SEL引脚，可以改变输出幅度。在VIN,DIFF(P - P) = 0.3V，RLO<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a> = 100Ω条件下，当AMP_SEL = 0时，典型差分输出电压幅度为350mV；当AMP_SEL = 1时，典型值可达500mV。</li>
</ul>
<h2>五、应用设计要点</h2>
<h3>5.1 输入输出端接设计</h3>
<ul>
<li><strong>输出端接</strong>：为了保证最佳性能，建议使用100Ω的差分电阻对未使用的输出进行端接。虽然未端接的输出也能工作，但会导致使用中的输出<a href="https://m.hqchip.com/app/1703" target="_blank"><u>AC</u></a>共模电压（VOS）略有下降。可采用DC<a href="https://www.elecfans.com/tags/耦合/" target="_blank"><u>耦合</u></a>或AC耦合方式连接到LVDS<a href="https://m.hqchip.com/app/1847" target="_blank"><u>接收器</u></a>。当接收器内部偏置电压与LMK1D210x输出共模电压不同时，需采用AC耦合方式。</li>
<li><strong>输入端接</strong>：该系列输入可与LVDS、LVPECL、HCSL或LVCMOS<a href="https://m.hqchip.com/app/1847" target="_blank"><u>驱动器</u></a>连接。对于不同的驱动器类型，连接方式有所不同。例如，LVDS驱动器可采用DC或AC耦合方式连接，LVPECL输入需要串联电阻来降低信号摆幅（当信号摆幅 &gt; 1.6VPP时）。对于未使用的输入引脚，建议使用1kΩ电阻将两个输入引脚（INP, INN）接地。</li>
</ul>
<h3>5.2 电源设计与布局</h3>
<ul>
<li><strong>电源设计</strong>：高性能时钟缓冲器对电源噪声非常敏感，因此必须采取措施降低系统电源的噪声。可使用滤波<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>消除电源的低频噪声，旁路电容为高频噪声提供低阻抗路径。旁路电容应靠近电源引脚布局，且布线环路要短，以减小电感。同时，可在板级电源和芯片电源之间插入铁氧体磁珠，隔离时钟驱动器产生的高频开关噪声。</li>
<li><strong>PCB布局</strong>：为了确保散热和性能，<a href="https://bbs.elecfans.com/group_67" target="_blank"><u>芯片封装</u></a>的裸焊盘应与PCB的接地平面相连，通过多个过孔将热量散发到PCB上。在布局时，要注意合理安排引脚和布线，减少信号干扰。</li>
</ul>
<h2>六、典型应用案例分析</h2>
<p>以JESD204B/C <a href="https://www.elecfans.com/tags/adc/" target="_blank"><u>ADC</u></a>系统为例，LMK1D210x可用于分配ADC时钟和SYSREF时钟。在这个应用中，由于ADC时钟接收器模块与驱动器的共模电压可能不同，通常采用AC耦合方式；而SYSREF时钟接收器模块在共模电压匹配的情况下，可采用DC耦合方式。未使用的输出应使用100Ω电阻进行差分端接，以优化性能。</p>
<p>在实际设计过程中，可能会遇到输出电压与接收器共模电压不匹配的问题。可以采用电阻分压网络来降低共模电压，同时使用AMP_SEL引脚选择更高的摆幅模式来补偿分压后的信号衰减。</p>
<p>通过对LMK1D210x系列低附加抖动LVDS缓冲器的详细介绍，我们可以看到它在时钟分配领域具有出色的性能和广泛的应用前景。在实际设计中，<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>们需要根据具体的应用需求和系统要求，合理选择器件参数，进行精心的<a href="https://www.elecfans.com/v/tag/167/" target="_blank"><u>电路设计</u></a>和布局，以充分发挥其优势，实现高性能的时钟分配方案。你在使用类似的时钟缓冲器时，遇到过哪些问题呢？欢迎在评论区分享。</p>]]></description></item><item>    <title><![CDATA[LMK1D121x低附加抖动LVDS缓冲器的深度剖析与应用指南]]></title>    <link>https://www.elecfans.com/d/7642012.html</link>    <guid>https://www.elecfans.com/d/7642012.html</guid>    <pubDate>2026-02-06 17:10:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7642012" value="https://file1.elecfans.com/web3/M00/4B/13/wKgZO2mFp1-ACy9XACwzWKjKS-U906.pdf"/><h1>LMK1D121x低附加抖动LVDS缓冲器的深度剖析与应用指南</h1>
<h2>引言</h2>
<p>在电子设计领域，<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a><a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>的精确分配至关重要。LMK1D121x系列低附加抖动LVDS缓冲器，凭借其出色的性能和广泛的适用性，成为了众多<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>的首选。今天，我们就来深入探讨一下这款缓冲器的特点、应用以及设计要点。</p><p>文件下载：<a href="javascript:;" data-annex="annex0_7642012" target="_blank">lmk1d1216.pdf</a></p>
<h2>一、LMK1D121x的核心特性</h2>
<h3>高性能时钟缓冲</h3>
<p>LMK1D121x属于高性能LVDS<a href="https://www.elecfans.com/tags/时钟缓冲器/" target="_blank"><u>时钟缓冲器</u></a>家族，最高支持2 GHz的时钟频率。其中，LMK1D1212为2:12差分缓冲器，LMK1D1216为2:16差分缓冲器，能够满足不同的输出需求。</p>
<h3>宽电压范围与低抖动</h3>
<p>该系列缓冲器的<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>电压范围为1.71 V至3.465 V，具有良好的电源适应性。在156.25 MHz频率下，12kHz至20 - MHz频段内的最大附加抖动小于60 fs <a href="https://m.hqchip.com/app/1718" target="_blank"><u>RMS</u></a>，极低的附加抖动确保了时钟信号的稳定性和准确性。</p>
<h3>低噪声与低延迟</h3>
<p>其相位噪声基底典型值为 - 164 dBc/Hz，能够有效减少噪声干扰。传播延迟最大小于575 ps，输出偏斜最大为20 ps，保证了信号的快速传输和同步性。</p>
<h3>高摆幅与通用输入</h3>
<p>在AMP_SEL = 1时，高摆幅LVDS（增强模式）典型输出电压差（VOD）为500 mV。输入支持LVDS、LVPECL、LVCMOS、HCSL和CML等多种信号电平，具有很强的通用性。</p>
<h3>宽温度范围与小封装</h3>
<p>工作温度范围为 - 40°C至105°C，适用于各种工业环境。LMK1D1212采用6 - mm × 6 - mm、40引脚的VQFN（RHA）封装，LMK1D1216采用7 - mm × 7 - mm、48引脚的VQFN（RGZ）封装，小封装节省了电路板空间。</p>
<h2>二、应用领域广泛</h2>
<h3><a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>与网络</h3>
<p>在电信和网络设备中，LMK1D121x能够为高速数据传输提供稳定的时钟信号，确保数据的准确收发。</p>
<h3>医疗成像</h3>
<p>医疗成像设备对时钟信号的精度要求极高，该缓冲器的低抖动和低噪声特性能够满足其需求，提高成像质量。</p>
<h3>测试与测量</h3>
<p>在测试和测量仪器中，精确的时钟分配是保证测量准确性的关键，LMK1D121x可以提供可靠的时钟支持。</p>
<h3>无线基础设施</h3>
<p>无线基站等基础设施需要稳定的时钟信号来实现信号的调制和解调，LMK1D121x能够满足其对时钟的严格要求。</p>
<h3>专业音视频与 signage</h3>
<p>在音视频和数字 signage系统中，该缓冲器可以确保音视频信号的同步传输，提升用户体验。</p>
<h2>三、详细功能解析</h2>
<h3>输入选择与输出分配</h3>
<p>LMK1D121x通过输入复用器可以接受两个时钟源，用户可以通过IN_SEL引脚选择将哪个输入时钟信号分配到输出端。当IN_SEL引脚悬空时，输出将被禁用。</p>
<h3>输出幅度控制</h3>
<p>AMP_SEL引脚用于控制输出幅度，用户可以根据实际需求选择标准LVDS摆幅（350 mV）或增强LVDS摆幅（500 mV），以满足不同接收器的要求。</p>
<h3>故障安全输入与迟滞</h3>
<p>该系列缓冲器支持故障安全输入功能，允许在施加VDD之前驱动设备输入而不会损坏设备。同时，输入迟滞功能可以防止在没有输入信号时输出随机振荡，提高了系统的稳定性。</p>
<h2>四、设计要点与注意事项</h2>
<h3>输入输出端接</h3>
<h4>输出端接</h4>
<p>为了获得最佳性能，建议对未使用的输出端进行差分100 Ω端接。可以采用<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a><a href="https://www.elecfans.com/tags/耦合/" target="_blank"><u>耦合</u></a>或<a href="https://m.hqchip.com/app/1703" target="_blank"><u>AC</u></a>耦合的端接方式，具体取决于<a href="https://m.hqchip.com/app/1847" target="_blank"><u>接收器</u></a>的特性。</p>
<h4>输入端接</h4>
<p>LMK1D121x的输入可以与多种类型的<a href="https://m.hqchip.com/app/1847" target="_blank"><u>驱动器</u></a><a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>，不同的输入信号需要采用不同的端接方式。例如，LVDS输入可以采用DC或AC耦合，LVPECL输入可能需要串联<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>来降低信号摆幅。</p>
<h3>电源设计</h3>
<p>电源噪声对时钟缓冲器的性能影响很大。为了减少电源噪声，建议在电源引脚附近添加多个高频旁路<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>（如0.1 - µF），并在板级电源和芯片电源之间插入铁氧体磁珠，以隔离高频开关噪声。</p>
<h3>布局设计</h3>
<h4>热管理</h4>
<p>为了确保器件的可靠性和性能，需要将芯片的结温限制在135°C以内。通过在<a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>上设计包含多个过孔连接到接地层的热焊盘，可以提高器件的散热性能。</p>
<h4>布线规则</h4>
<p>在布线时，应尽量缩短信号路径，减少信号干扰。对于差分信号，要保证差分对的长度匹配，以减少偏斜。</p>
<h2>五、典型应用案例分析</h2>
<p>以线路卡应用为例，LMK1D121x可以配置为选择两个输入时钟信号：一个是来自背板的156.25 - MHz LVDS时钟，另一个是2.5 - V的156.25 - MHz LVCMOS<a href="https://www.hqchip.com/app/850" target="_blank"><u>振荡器</u></a>。通过合理的端接和滤波设计，可以将输入信号分配到多个LVDS接收器，如PHY、<a href="https://bbs.elecfans.com/zhuti_fpga_1.html" target="_blank"><u>ASIC</u></a>、<a href="https://www.elecfans.com/soft/data/30-91/" target="_blank"><u>FPGA</u></a>和<a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>CPU</u></a>等。</p>
<h2>六、总结</h2>
<p>LMK1D121x系列低附加抖动LVDS缓冲器以其高性能、宽适用性和灵活的设计特点，为<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>提供了一个强大的时钟分配解决方案。在实际设计中，我们需要充分考虑其特性和设计要点，以确保系统的稳定性和可靠性。希望本文能为大家在使用LMK1D121x进行设计时提供一些有价值的参考。你在使用LMK1D121x过程中遇到过哪些问题呢？欢迎在评论区分享你的经验和见解。 </p>]]></description></item><item>    <title><![CDATA[RK平台USB问题排查与性能分析：从入门到实战]]></title>    <link>https://www.elecfans.com/d/7401310.html</link>    <guid>https://www.elecfans.com/d/7401310.html</guid>    <pubDate>2026-02-06 17:10:00</pubDate>    <description><![CDATA[<div class="rich_media_content js_underline_content autoTypeSetting24psection">
	<h1>
		</h1>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在<a href="https://www.elecfans.com/v/tag/232/" target="_blank"><u>嵌入式开发</u></a>中，</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（<a href="https://bbs.elecfans.com/zhuti_1179_1.html" target="_blank"><u>瑞芯微</u></a>）平台凭借高性价比被广泛用于智能设备、<a href="https://bbs.elecfans.com/group_57" target="_blank"><u>物联网</u></a>终端等场景，而</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.hqchip.com/app/1515" target="_blank"><u>USB</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">作为设备与外部交互的核心<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>（如连接</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">U</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">盘、网卡、相机），其稳定性和性能直接影响产品体验。实际调试中，我们常遇到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">枚举失败、传输卡顿、速率不达标等问题，今天就从</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题排查</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">性能优化</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">两个维度，分享一套适用于</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台的实战方法论。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">一、</span></span></font><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题排查：从硬件到软件的系统化流程</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题本质是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">物理层</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">协议层</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动层</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的层层传递，排查时需按</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">先硬后软</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的顺序，避免陷入</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">软件调半天，实则线松了</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的坑。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第一步：先查硬件</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">排除</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">物理层</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">隐患</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">很多时候</span></span></font><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">故障根源在硬件，优先做以下检查：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">线缆与接口</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：更换原厂</span></span></font><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">线（尤其是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB3.0 <a href="https://www.elecfans.com/tags/type-c/" target="_blank"><u>Type-C</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">线，劣质线易导致<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>衰减），检查设备接口是否有氧化、松动，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Host</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">端与</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Device</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">端接口类型是否匹配（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB3.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">接口插</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB2.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备需确认兼容性）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">供电稳定性</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：用<a href="https://www.elecfans.com/v/tag/796/" target="_blank"><u>万用表</u></a>测</span></span></font><span><span style="background-color:rgb(255,255,255);">USB VBUS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">电压（需稳定在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">5V±5%</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），供电不足会导致设备枚举时掉电（常见于多设备同时挂载场景，如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3399</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">同时接</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">相机和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">U</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">盘）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">信号质量</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：若为</span></span></font><span><span style="background-color:rgb(255,255,255);">USB2.0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">高速（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">480Mbps</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）或</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB3.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">超速（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.elecfans.com/v/tag/1225/" target="_blank"><u>5G</u></a>bps</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）设备，需用<a href="https://www.elecfans.com/v/tag/577/" target="_blank"><u>示波器</u></a>测</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">眼图（眼高、眼宽需符合</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB-IF</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">规范），信号失真会导致频繁丢包重传，表现为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备时断时续</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第二步：日志分析</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">抓准</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">枚举</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">关键信息</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Kernel</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">3.10/4.4</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本）会输出</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">初始化和枚举的详细日志，通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dmesg</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">或串口日志，重点关注以下关键词：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）初始化日志：确认</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心与<a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a>正常加载</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">USB Core</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">加载</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：出现</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">usbcore: registered new interface driver usbfs</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">文件系统注册）、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">usbcore: registered new device driver usb</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（通用设备驱动注册），说明</span></span></font><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心模块正常启动；若缺失，需检查</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Kernel</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置中</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">USB support</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">是否开启。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">控制器驱动加载</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台常见</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">控制器有</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">EHCI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB2.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">OHCI</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB1.1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DWC2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB2.0 OTG</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DWC3</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB3.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），不同控制器日志特征不同：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">EHCI/OHCI</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">ehci-platform ff5c0000.usb: new USB bus registered, assigned bus number 3</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（总线号</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB2.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">ohci-platform ff5d0000.usb: irq 49, io mem 0xff5d0000</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（中断号</span></span></font><span><span style="background-color:rgb(255,255,255);">49</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB1.1</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">DWC3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB3.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）：会同时注册</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB2.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">和</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB3.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">总线，如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">xhci-hcd xhci-hcd.7.auto: new USB bus registered, assigned bus number 4</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">USB2.0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">usb usb5: New USB device found, idVendor=1d6b, idProduct=0003</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">USB3.0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">idProduct=0003</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB3.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">标识）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）枚举日志：定位设备</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">连不上</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的原因</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">正常枚举：会出现</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">New USB device found, idVendor=xxxx, idProduct=xxxx</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（设备</span></span></font><span><span style="background-color:rgb(255,255,255);">ID</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">识别）、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">usb usbX: Product: XXX</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（设备名称），最后提示</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">hub X-0 X port de<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>te</u></a>cted</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">HUB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.hqchip.com/app/1808" target="_blank"><u>端口</u></a>就绪）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">枚举失败：重点看错误信息：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若出现</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">usb X-Y: device descriptor re<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>ad</u></a>/64, error -110</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（超时），可能是硬件供电不足或信号差；</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若出现</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">no drivers matched</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（无匹配驱动），需确认设备类驱动（如</span></span></font><span><span style="background-color:rgb(255,255,255);">U</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">盘的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">usb-storage</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">、相机的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">uvcvideo</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）是否编译进</span></span></font><span><span style="background-color:rgb(255,255,255);">Kernel</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第三步：驱动配置</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">确认</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">软件开关</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">没踩坑</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">通过</span></span></font><span><span style="background-color:rgb(255,255,255);">Kernel</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">menuconfig</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">检查以下配置（不同</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">芯片配置路径一致）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">核心配置：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">Device Drivers → USB support → USB Core support</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（必开）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">控制器驱动：根据芯片型号开启对应控制器，如</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3399</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">需开</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">DWC3 USB Controller</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3288</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">需开</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">DWC2 USB Controller</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备类驱动：按需开启，如</span></span></font><span><span style="background-color:rgb(255,255,255);">U</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">盘（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">USB Mass Storage support</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、</span></span></font><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">相机（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">USB Video Class (UVC)</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、</span></span></font><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">网卡（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">USB <a href="https://www.elecfans.com/tags/ethernet/" target="_blank"><u>Ethernet</u></a> Adapte<a href="https://www.elecfans.com/tags/rs/" target="_blank"><u>rs</u></a></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备树配置：确认</span></span></font><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">控制器节点未被禁用，如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DWC3</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">节点需设置</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dr_mode = "host"</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">Host</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">模式）或</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">"peripheral"</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">Device</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">模式），避免模式配置错误导致功能异常。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">4.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">第四步：工具验证</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">——</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">用轻量工具快速定位</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">lsusb</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：列出已枚举的</span></span></font><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备，如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">Bus 004 Device 002: ID 174c:55aa</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（总线</span></span></font><span><span style="background-color:rgb(255,255,255);">4</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，设备</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，厂商</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ID +</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">产品</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">ID</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），若看不到目标设备，说明枚举失败；若能看到但无法使用，需查驱动匹配。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">lsusb -t</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：查看</span></span></font><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备拓扑，确认设备挂载的总线速率（如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">Speed=5000M</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为</span></span></font><span><span style="background-color:rgb(255,255,255);">USB3.0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">Speed=480M</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">为</span></span></font><span><span style="background-color:rgb(255,255,255);">USB2.0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），避免</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“USB3.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备跑在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB2.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">速率</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的问题。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;background:rgb(0,255,255);"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><span><span style="background-color:rgb(255,255,255);">blktr<a href="https://m.hqchip.com/app/1703" target="_blank"><u>ac</u></a>e</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：针对</span></span></font><span><span style="background-color:rgb(255,255,255);">USB Disk</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">场景，若拷贝卡顿，用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">blktrace</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">分析</span></span></font><span><span style="background-color:rgb(255,255,255);">IO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">性能，排查是否存在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">IO</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">阻塞（需</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Kernel</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">开启</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">CONFIG_BLK_DEV_IO_TRACE</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">附：</span></span></font><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题排查流程图</span></span></font></span></b></h3>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixCAFzLcAAa4Ce8TngM106.png" alt="wKgZPGkaixCAFzLcAAa4Ce8TngM106.png"/><h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">二、</span></span></font><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">性能分析：从测试到优化的实战技巧</span></span></font></span></b></h2>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">性能常见诉求是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">传输速率达标</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，但实际速率受硬件、驱动、系统多因素影响，需先</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">测准</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">再</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">优化</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">先搞懂：影响</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">性能的核心因素</span></span></font></span></b></h3>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">在</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台调试中，我们总结出</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">4</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">个关键影响因素：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<table style="border-collapse:collapse;margin-left:-0.6pt;border:none;"><tbody><tr><td style="padding:3pt 6pt 1.5pt;border-width:1pt;border-style:solid;border-color:rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">层面</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">具体因素</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:1pt solid rgb(222,224,227);border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">影响表现</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">版本（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">2.0/3.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）、信号质量</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">USB3.0</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">理论速率</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">5Gbps</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，信号差会掉速到</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB2.0</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">传输类型</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">批量（</span></span></font><span><span style="background-color:rgb(255,255,255);">Disk</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">&gt;</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">同步（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Camera</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">&gt;</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">中断（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">HID</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">批量传输适合大数据（如</span></span></font><span><span style="background-color:rgb(255,255,255);">U</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">盘），同步适合实时（如相机）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">系统配置</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>CPU</u></a></span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">频率、内存缓存、文件系统</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">CPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">低频会拖慢数据拷贝，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">N<a href="https://m.hqchip.com/app/1522" target="_blank"><u>TF</u></a>S</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">比</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">EXT4</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">慢（小文件）</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr><tr><td style="padding:3pt 6pt 1.5pt;border-left:1pt solid rgb(222,224,227);border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动参数</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">URB Buffer</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">大小、</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://www.elecfans.com/tags/dma/" target="_blank"><u>DMA</u></a> Burst Length</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
				<td style="padding:3pt 6pt 1.5pt;border-left:none;border-right:1pt solid rgb(222,224,227);border-top:none;border-bottom:1pt solid rgb(222,224,227);" valign="top" width="184">
					<p>
						<span style="font-family:Arial;font-size:11pt;"><span><span style="background-color:rgb(255,255,255);">Buffer</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">小导致中断频繁，速率上不去</span></span></font></span></p>
					<p>
						</p>
					<p>
						</p>
				</td>
			</tr></tbody></table><h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">分场景测试：不同</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">功能的性能验证方法</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB Disk</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：测读写速率（避坑指南）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">USB Disk</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">是最常见场景，测试需避免</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">缓存干扰</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，推荐两种方法：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">方法</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></b><span><span><span style="background-color:rgb(255,255,255);">dd</span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">命令（精准测控制器性能）</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">先创建大文件（建议</span></span></font><span><span style="background-color:rgb(255,255,255);">2GB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">以上，避免缓存影响），再测试：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 清缓存（必做！避免用内存缓存冒充磁盘速度）</span></span></code><code><span><span class="code-snippet__built_in">echo</span>3 &gt; /proc/sys/vm/drop_caches</span></code><code><span><span class="code-snippet__comment"># 测读速率（从U盘读入/dev/null，排除目标存储影响）</span></span></code><code><span>busybox ddif=/mnt/usb/test of=/dev/null bs=512K count=4K conv=fsync</span></code><code><span><span class="code-snippet__comment"># 测写速率（从/dev/zero写入U盘）</span></span></code><code><span>busybox ddif=/dev/zero of=/mnt/usb/test bs=512K count=4K conv=fsync</span></code></pre>
	<p style="margin-left:36pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">◦</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">正常范围：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK USB2.0 Host</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">读</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">/</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">写</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">25-35MBps</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB3.0 Host</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（非</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UAS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">60-100MBps</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UAS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB3.0 Disk</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">可达</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">350MBps</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">方法</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span></b><span><span><span style="background-color:rgb(255,255,255);">cp</span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">命令（测实际用户体验）</span></span></font></span></b></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);"><a href="https://bbs.elecfans.com/group_715" target="_blank"><u>ti</u></a>me</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">统计大文件拷贝时间，计算速率：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span>time<span class="code-snippet__built_in">cp</span>/mnt/usb/test /<a href="https://www.hqchip.com/app/1522" target="_blank"><u>sd</u></a>card/ <span class="code-snippet__comment"># 从U盘拷到EMMC</span></span></code></pre>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">若速率远低于</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dd</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">测试结果，需排查目标存储（如</span></span></font><span><span style="background-color:rgb(255,255,255);">EMMC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）的写性能瓶颈。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB Ethernet</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：测带宽（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UDP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">模式更准）</span></span></font></span></b></h4>
	<p>
		</p>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">用</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">ipe<a href="https://www.elecfans.com/tongxin/rf/" target="_blank"><u>rf</u></a></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">工具测试</span></span></font><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">网卡带宽（优先</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UDP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">模式，能测极限带宽）：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">PC</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">端（服务器）</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">iperf -u -s</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（开启</span></span></font><span><span style="background-color:rgb(255,255,255);">UDP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">服务器）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">端（客户端）</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：先配置</span></span></font><span><span style="background-color:rgb(255,255,255);">IP</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">ifconfig eth1 192.168.1.2 up</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），再测试：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># USB2.0网卡：-b设100M；USB3.0网卡：-b设1000M</span></span></code><code><span><span class="code-snippet__attribute">iperf</span>-u -c<span class="code-snippet__number">192.168.1.1</span>-b<span class="code-snippet__number">1000</span>M -t<span class="code-snippet__number">60</span></span></code></pre>
	<p>
		<span><font face="等线"><span><span style="background-color:rgb(255,255,255);">正常范围：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK USB2.0 Ethernet 95-100Mbps</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB3.0 Ethernet 750-800Mbps</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">3</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB Camera</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">：测帧率（实时性关键）</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">看帧率日志</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：通过</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">logcat</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看相机预览帧率，如</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">CameraHal: debugShowFPS: 30.000 FPS</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（正常），若帧率低于预期（如</span></span></font><span><span style="background-color:rgb(255,255,255);">1080P@30fps</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">掉至</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">15fps</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），需排查同步传输性能。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">UVCTrace</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">辅助</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：开启</span></span></font><span><span style="background-color:rgb(255,255,255);">UVCTrace</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">查看传输细节：</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<ul class="code-snippet__line-index code-snippet__js"><li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
			<li>
				</li>
		</ul><pre class="code-snippet__js">
<code><span><span class="code-snippet__comment"># 开启UVCTrace</span></span></code><code><span><span class="code-snippet__built_in">echo</span>0xffff &gt; /sys/module/uvcvideo/pa<a href="https://www.elecfans.com/tags/ram/" target="_blank"><u>ram</u></a>eters/trace</span></code><code><span><span class="code-snippet__built_in">echo</span>8 &gt; /proc/sysrq-trigger</span></code><code><span><span class="code-snippet__comment"># 查看统计信息</span></span></code><code><span><span class="code-snippet__built_in">cat</span>/d/usb/uvcvideo/*/stats</span></code></pre>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">3.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">针对性优化：从驱动到系统的调优方向</span></span></font></span></b></h3>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">1</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）驱动参数优化</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调整</span></span></font><span><span style="background-color:rgb(255,255,255);">URB Buffer</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">大小</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK DWC2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">控制器支持最大</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">512KB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DWC3</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">16MB-1B</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，增大</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Buffer</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">可减少中断次数（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">MTP</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动将</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Tx/Rx Buffer</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">设为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1MB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，速率提升</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">20%+</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">优化</span></span></font><span><span style="background-color:rgb(255,255,255);">DMA</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：将</span></span></font><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">控制器的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">AHB CLK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">提至</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">150MHz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">以上，</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DMA Burst Length</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">设为最大（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DWC2</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">设为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">16</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），提升</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">DMA</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">传输效率。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">开启</span></span></font><span><span style="background-color:rgb(255,255,255);">UAS</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">协议</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3399/RK3328</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB3.0</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">控制器支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UAS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB Attached S<a href="https://www.elecfans.com/tags/csi/" target="_blank"><u>CSI</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），开启后</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB3.0 Disk</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">速率可从</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">100MBps</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">提升至</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">350MBps</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（需</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Kernel</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">开</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">CONFIG_USB_UAS</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">，且</span></span></font><span><span style="background-color:rgb(255,255,255);">U</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">盘支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">UAS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h4>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">2</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">）系统与文件系统优化</span></span></font></span></b></h4>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><span><span style="background-color:rgb(255,255,255);">CPU</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">定频</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：将</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">大核（如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK3399</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">A72</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">）设为最高频（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">1.8GHz</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），避免</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">CPU</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">变频导致的数据拷贝卡顿。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">文件系统选择</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">USB Disk</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">优先用</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">VFAT/EXT4</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Kernel block</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">层会合并小文件为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">120K</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），避免</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">NTFS</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（用户空间写入，小文件速率低）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">缓存配置</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：调整</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dirty_background_ratio</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（默认</span></span></font><span><span style="background-color:rgb(255,255,255);">5%</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），如</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);"><a href="https://m.elecfans.com/v/tag/9979/" target="_blank"><u>4G</u></a></span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">内存设为</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">10%</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">echo 10 &gt; /proc/sys/vm/dirty_background_ratio</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），减少频繁刷盘对速率的影响。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">附：</span></span></font><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">性能分析脑图</span></span></font></span></b></h3>
	<p>
		</p>
	<img src="https://file1.elecfans.com//web3/M00/3C/92/wKgZPGkaixCAZYtuAAEZ6x6cfLY845.png" alt="wKgZPGkaixCAZYtuAAEZ6x6cfLY845.png"/><h2>
		<b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">三、实用工具</span></span></font><span><span style="background-color:rgb(255,255,255);">&amp;</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试心得</span></span></font></span></b></h2>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">1.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">必备工具清单</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件工具：万用表（测供电）、示波器（测眼图）、原厂</span></span></font><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">线。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">•</span></span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">软件工具：</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dmesg</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（日志）、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">lsusb</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（设备枚举）、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">iperf</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（带宽）、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">blktrace</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（</span></span></font><span><span style="background-color:rgb(255,255,255);">IO</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">分析）、</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dd</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">（速率测试）。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<h3>
		<b><span><span><span style="background-color:rgb(255,255,255);">2.</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试心得</span></span></font></span></b></h3>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">1.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">先定位瓶颈再优化</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：比如</span></span></font><span><span style="background-color:rgb(255,255,255);">RK3399 USB3 Disk</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">速率慢，先测</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dd</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">读速率（</span></span></font><span><span style="background-color:rgb(255,255,255);">80MBps</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">正常），再测</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">EMMC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">写速率（</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">25MBps</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">），发现瓶颈在</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">EMMC</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">，无需改</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">驱动。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">2.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">避免缓存</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">欺骗</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：测试速率时必须清缓存，大文件建议</span></span></font><span><span style="background-color:rgb(255,255,255);">2GB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">以上，加</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">conv=fsync</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">确保数据写入磁盘。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p style="margin-left:14.4pt;">
		<span style="font-family:Arial;color:rgb(51,112,255);font-weight:bold;font-size:11pt;"><span><span><span style="background-color:rgb(255,255,255);">3.</span></span></span></span><b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">关注控制器模式</span></span></font></span></b><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">：</span></span></font><span><span style="background-color:rgb(255,255,255);">RK</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">控制器支持</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">OTG</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">模式，需确认</span></span></font></span><span><span><span style="background-color:rgb(255,255,255);">dr_mode</span></span></span><span><font face="等线"><span><span style="background-color:rgb(255,255,255);">配置（</span></span></font><span><span style="background-color:rgb(255,255,255);">Host/Device</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">），避免</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“Host</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">模式接</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">Device</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">设备</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的低级错误。</span></span></font></span></p>
	<p>
		</p>
	<p>
		</p>
	<p>
		<span><span><span style="background-color:rgb(255,255,255);">USB</span></span><font face="等线"><span><span style="background-color:rgb(255,255,255);">调试是</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">细节决定成败</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的过程，掌握</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">“</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">硬件排查</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">日志分析</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">性能测试</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">→</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">针对性优化</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">”</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">的流程，能帮我们快速解决</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">90%</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">以上的</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">RK</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">平台</span></span></font><font face="Arial"><span><span style="background-color:rgb(255,255,255);">USB</span></span></font><font face="等线"><span><span style="background-color:rgb(255,255,255);">问题。大家在调试中遇到过哪些坑？欢迎在评论区分享你的解决方案～</span></span></font></span></p>
	
		</div>]]></description></item><item>    <title><![CDATA[中创新航斩获多家主机厂客户荣誉奖项]]></title>    <link>https://www.elecfans.com/d/7642022.html</link>    <guid>https://www.elecfans.com/d/7642022.html</guid>    <pubDate>2026-02-06 17:14:00</pubDate>    <description><![CDATA[<p style="text-indent:2em;">
	近期，中创新航喜讯不断，连续荣获来自小鹏、零跑、长安等多家客户颁发的“实力派”奖项。累累硕果印证了中创新航全球战略布局正加速推进——2025年中创新航动力电池装机量同比增长53%，单月装机排名全球TOP3，再攀高峰。</p>
<p style="text-indent:2em;">
	<strong>小鹏</strong> <strong>双奖加冕 实至名归</strong></p>
<p style="text-indent:2em;">
	2025年，中创新航第三年蝉联小鹏汽车最高荣誉：优秀供应商和鹏翼杯金奖两项殊荣，彰显了客户对中创新航的高度认可与信赖，是公司行业领先的实力见证。</p>
<p style="text-indent:2em;">
	中创新航以领先的产品和可靠的产能交付，全面保障小鹏中高端全系车型的交付达成，3MIS等指标连续为零，质量评分持续满分，赢得了客户的高度认可和信任。2026年，中创新航“顶流”超充等新技术将助力MONA、小鹏GX等若干款新车成为爆款车型。</p>
<p style="text-indent:2em;">
	<strong>零跑</strong> <strong>智造领先 坚如磐石</strong>  </p>
<p style="text-indent:2em;">
	近日，中创新航荣获零跑汽车2025年度“质量磐石奖”。</p>
<p style="text-indent:2em;">
	作为零跑全球战略核心伙伴，2025年中创新航先后助力零跑C平台多款主力车型改款上市，同时B10、B01、Lafa5车型全新上市海内外累计装车量超10万台，3MIS及0公里评价满分，以行业领先的智造实力、稳定优质的供货能力，第三次获此殊荣。</p>
<p style="text-indent:2em;">
	<strong>长安</strong> <strong>双向奔赴 聚力共赢</strong></p>
<p style="text-indent:2em;">
	中创新航再次荣膺长安汽车2025年度“优秀供应商”奖项，第八次将这一殊荣收入囊中，并凭借对长安马自达达成全球战略的突出贡献，首次荣获长安马自达“优秀供应商”奖项。</p>
<p style="text-indent:2em;">
	2025年中创新航全面保障长安汽车启源系列、深蓝系列爆款车型的稳定量产交付，首发配套长安马自达全球战略车型 EZ-60，搭载产品通过 C-NCAP、C-IASI、E-NCAP 等国内外权威高标准安全<a href="https://bbs.elecfans.com/group_776" target="_blank"><u>认证</u></a>，为长安冲击全球前十的战略目标筑牢能源根基。质量方面，2025年中创新航长安供应商QCA评分、ppm/mis指标等较2024年持续上升，赢得客户的高度肯定。</p>]]></description></item><item>    <title><![CDATA[探索MAX17526C：多功能电流限制器的卓越应用]]></title>    <link>https://www.elecfans.com/d/7642020.html</link>    <guid>https://www.elecfans.com/d/7642020.html</guid>    <pubDate>2026-02-06 17:15:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7642020" value="https://file1.elecfans.com/web3/M00/4B/15/wKgZO2mFsDGAJLT3ABGQO-3YAKg169.pdf"/><h1>
	探索MAX17526A/MAX17526B/MAX17526C：多功能<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>限制器的卓越应用</h1>
<h2>
	一、引言</h2>
<p>
	在电子设计的世界里，可靠的<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>保护和电流控制至关重要。<a href="https://bbs.elecfans.com/group_65" target="_blank"><u>Analog</u></a> Devices推出的MAX17526A/MAX17526B/MAX17526C系列产品，作为5.5V至60V、6A电流限制器，具备过压、欠压、反向保护和功率限制等功能，在众多领域展现出强大的应用潜力。</p>
<p>
	文件下载：<a href="javascript:;" data-annex="annex0_7642020" target="_blank">MAX17526C.pdf</a></p>
<h2>
	二、产品概述</h2>
<h3>
	2.1 整体特性</h3>
<p>
	MAX17526A是该系列的核心产品，它是一款高度集成的系统保护解决方案，具有多种保护特性，包括可调节的输入过压和欠压保护、正负输入电压保护、过流保护、反向电流保护和过温保护等。其内置的低导通电阻（典型值30mΩ）NFET以及集成的<a href="https://www.hqchip.com/app/1715" target="_blank"><u>栅极驱动</u></a>，为外部NFET的使用提供了便利。</p>
<h3>
	2.2 关键参数</h3>
<ul><li>
		<strong>输入电压范围</strong>：5.5V至60V，适应多种电源环境。</li>
	<li>
		<strong>电流限制范围</strong>：可从0.2A<a href="https://bbs.elecfans.com/group_75" target="_blank"><u>编程</u></a>到6.0A，满足不同的负载需求。</li>
	<li>
		<strong>过压和欠压保护范围</strong>：输入欠压保护水平可在5.5V至24V之间调节，输入过压保护水平可在6V至40V之间调节。</li>
</ul><h2>
	三、功能详解</h2>
<h3>
	3.1 过压和欠压保护</h3>
<p>
	过压和欠压保护是保障系统稳定运行的重要功能。通过连接外部<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>，可以调节输入欠压锁定（UVLO）和过压锁定（OVLO）阈值。当输入电压超出预设范围时，设备会及时采取措施，保护系统免受损坏。例如，当输入电压低于UVLO阈值或高于OVLO阈值时，FLAG引脚会发出低电平<a href="https://www.hqchip.com/app/1072" target="_blank"><u>信号</u></a>，提示故障发生。</p>
<h3>
	3.2 电流限制</h3>
<p>
	电流限制功能通过将电阻连接到SE<a href="https://www.elecfans.com/tags/ti/" target="_blank"><u>TI</u></a>引脚来编程。当设备电流达到编程阈值时，内部NFET的电阻会被调制，以限制电流。该设备提供三种电流限制行为模式：连续模式、自动重试模式和锁断模式。不同的模式适用于不同的应用场景，例如自动重试模式在过流或短路情况下可以减少系统功耗。</p>
<h3>
	3.3 反向电流保护</h3>
<p>
	在使用外部NFET时，反向电流保护功能会被启用，防止电流从OUT引脚流向IN引脚。当检测到反向电流条件时，外部NFET会被关闭，直到反向电流条件消失。这种保护机制在复杂的电源系统中尤为重要，可以避免因反向电流导致的设备损坏。</p>
<h3>
	3.4 功率限制</h3>
<p>
	功率限制功能可以根据外部电压动态调整电流限制。通过连接到PLIM引脚的<a href="https://m.hqchip.com/app/1261" target="_blank"><u>电位器</u></a>对输入或输出电压进行采样，当外部电压超过预设阈值时，功率限制功能会降低编程的电流限制，从而实现对输入或输出功率的控制。这一功能在一些对功率有严格要求的应用中非常实用，例如电池充电系统。</p>
<h2>
	四、典型应用电路</h2>
<p>
	文档中给出了典型的操作电路，展示了各个引脚的连接方式。在实际设计中，需要根据具体的应用需求进行合理的电路布局。例如，对于长输出电缆或感性负载，需要在输出引脚采取相应的措施，以确保系统的稳定性。</p>
<h2>
	五、应用注意事项</h2>
<h3>
	5.1 <a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>选择</h3>
<ul><li>
		<strong>输入电容</strong>：建议在IN引脚和GND之间连接1μF的陶瓷电容，以在负载电流突然变化时保持输入电压的稳定。</li>
	<li>
		<strong>输出电容</strong>：最大电容负载（(C<em>{MAX})）与电流限制设置、启动初始时间和启动超时时间以及输入电压有关。需要根据具体参数计算(C</em>{MAX})，避免因输出电容过大触发虚假过流条件。</li>
</ul><h3>
	5.2 布局和散热</h3>
<p>
	为了优化开关对输出短路条件的响应，应尽量缩短所有走线长度，减少寄生电感的影响。同时，合理的<a href="https://www.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>布局和散热设计对于保证设备的性能至关重要。建议使用四层PCB结构，提供足够的铜面积用于散热，并确保各个引脚的连接符合要求。</p>
<h3>
	5.3 <a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a>保护</h3>
<p>
	所有引脚都具有±2kV（HBM）的ESD保护，在IN引脚不需要额外的电容。但在使用外部NFET的应用中，需要参考IN电容部分的建议。</p>
<h2>
	六、总结</h2>
<p>
	MAX17526A/MAX17526B/MAX17526C系列产品凭借其丰富的保护功能、灵活的编程特性和广泛的应用范围，为<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>提供了一个可靠的电源保护和电流控制解决方案。在实际设计中，<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>需要根据具体的应用需求，合理选择参数和模式，同时注意电路布局、电容选择和散热设计等方面的问题，以充分发挥该系列产品的性能优势。你在使用这类产品时，遇到过哪些挑战呢？欢迎在评论区分享你的经验。</p>]]></description></item><item>    <title><![CDATA[保隆科技产品技术展示会走进长城汽车]]></title>    <link>https://www.elecfans.com/d/7642037.html</link>    <guid>https://www.elecfans.com/d/7642037.html</guid>    <pubDate>2026-02-06 17:18:00</pubDate>    <description><![CDATA[<p style="text-indent:2em;">
	2月5日，为进一步深化与长城汽车的技术协作，精准匹配长城汽车在智能化、轻量化领域的技术需求，共享汽车零部件前沿创新成果，保隆科技在长城汽车新技术<a href="https://www.hqchip.com/tags" target="_blank"><u>中心</u></a>成功举办产品技术展示会。活动以“产品展示+游戏互动”的创新形式，吸引了双方核心团队深度参与，期间还开展了管理层交流，长城汽车副总裁李树会、全球海外采购负责人张开德、精工汽车董事长郑立朋、总经理王朝久、保隆科技高级副总裁王胜全、市场与业务发展中心总经理兼IDS单元副总经理张敏、ECAS单元副总经理王小青等领导参加，为后续深化合作奠定坚实基础。</p>
<p style="text-indent:2em;">
	保隆科技是长城汽车一级供应商，双方合作始于2005年，保隆科技为其提供气门嘴、平衡块、TPMS、智能悬架储气罐、轻量化结构件等产品。凭借高效的开发响应速度、准时的交付能力、精益求精的产品质量以及专业的技术服务，保隆科技在合作过程中赢得了长城汽车的高度认可。</p>
<p style="text-indent:2em;">
	在此次展示会上，保隆科技围绕长城汽车技术研发与产品升级需求，全面展示了智能悬架系统、智能驾驶、车辆智能<a href="https://www.elecfans.com/v/tag/117/" target="_blank"><u>传感器</u></a>、<a href="https://m.elecfans.com/v/tag/293/" target="_blank"><u>新能源</u></a>汽车关键技术、汽车金属管件、轻量化结构件、车轮部件七大核心领域的最新产品与技术解决方案，为长城汽车带来一站式的零部件技术体验。保隆科技组建了专业的展台支持团队，全程为长城汽车技术人员提供产品讲解与技术答疑，现场互动氛围热烈。</p>
<p style="text-indent:2em;">
	活动当天，长城汽车管理层率先参观展示区域，保隆科技团队针对核心产品技术进行专项汇报，双方就技术研发方向、未来合作重点展开深入交流；自由参观交流环节，长城汽车技术专家、<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>团队深入展区，围绕各展品的技术参数、应用场景、定制化开发可能性等展开细致探讨，保隆科技技术人员现场演示产品功能，解答技术疑问。游戏互动区的设置成为此次活动的一大亮点，通过趣味互动形式，让参会人员在轻松氛围中加深对保隆科技产品技术的理解，进一步拉近了双方团队的距离，为后续技术协作营造了良好氛围。</p>
<p style="text-indent:2em;">
	此次保隆科技产品技术展示会在长城汽车新技术中心的成功举办，全面展现了保隆科技在汽车零部件领域的技术实力与创新能力，更搭建了双方<a href="https://bbs.elecfans.com/zhuti_1183_1.html" target="_blank"><u>技术交流</u></a>的高效平台，深化了彼此互信。未来，保隆科技将继续深耕汽车零部件前沿技术，聚焦长城汽车的发展需求，为长城汽车提供更多定制化优秀技术解决方案和产品。双方将以此次活动为契机，在更多的领域开展深度合作，让更多人受益于汽车科技的发展！</p>
<p style="text-indent:2em;">
	·   ·  · ·  </p>]]></description></item><item>    <title><![CDATA[向您推荐上海贝岭BL1117双极型低压差线性稳压器]]></title>    <link>https://www.elecfans.com/d/7642065.html</link>    <guid>https://www.elecfans.com/d/7642065.html</guid>    <pubDate>2026-02-06 17:19:00</pubDate>    <description><![CDATA[<p style="margin-left:0px;text-align:justify;">BL1117是一款低dropout三端稳压器系列，其在1安培负载<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>下的dropout电压为1.3伏。与竞争对手的5毫安待机电流相比，BL1117的待机电流仅为2毫安。除了提供固定的输出电压（1.2伏、1.5伏、1.8伏、2.5伏、3.3伏、5伏和12伏）外，BL1117还提供可调版本，仅需两个外部<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>即可调节输出电压范围从1.25伏到12伏。BL1117具备热关断和电流限制功能，确保芯片和<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>系统的稳定性。</p><p style="margin-left:0px;text-align:justify;">此外，它采用微调技术，保证输出电压的精度在± 2%以内。用户还可以根据需求定制其他输出电压精度，例如±1%。BL1117提供SOT223和TO252-2两种功率封装。</p><p style="margin-left:0px;text-align:center;"><strong>BL1117典型应用电路</strong></p><p style="margin-left:0px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:justify;"><br/></p><p style="text-align:justify;"><img src="http://images.elecfans.net/uploads/20260206/ff511c24-033c-11f1-96ea-92fbcf53809c.jpg" alt="ff511c24-033c-11f1-96ea-92fbcf53809c.jpg"/></p><p style="margin-left:0px;text-align:justify;"><br/><br/></p><p style="margin-left:0px;text-align:center;"><strong>优势特点</strong></p><p style="margin-left:0px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:justify;">除了固定版本和可调版本，其他电压规格可根据需求定制</p><p style="margin-left:0px;text-align:justify;">最大输出电流为1A</p><p style="margin-left:0px;text-align:justify;">工作输入电压范围：最大18V</p><p style="margin-left:0px;text-align:justify;">待机电流：2mA(典型值)</p><p style="margin-left:0px;text-align:justify;">电压线性度：0.1%/V(典型值)</p><p style="margin-left:0px;text-align:justify;">负载线性度：10mV(典型值)</p><p style="margin-left:0px;text-align:justify;">环境温度：-40℃~85℃</p><p style="margin-left:0px;text-align:justify;">封装形式：SOT-223、TO-252</p><p style="margin-left:0px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:center;"><strong>BL1117应用</strong></p><p style="margin-left:0px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:justify;">计算机主板和显卡：为这些关键部件提供稳定、可靠的电源。</p><p style="margin-left:0px;text-align:justify;">LCD监视器和LCDTV：确保显示设备的电源稳定，提高画质和可靠性。</p><p style="margin-left:0px;text-align:justify;">DVD解码器：为解码器提供精确的电源电压，确保解码质量和稳定性。</p><p style="margin-left:0px;text-align:justify;"><a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a>SL等<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>设备：为通信设备提供稳定的电源，确保通信质量和稳定性。</p><p style="margin-left:0px;text-align:justify;"><a href="https://www.hqchip.com/app/1703" target="_blank"><u>开关电源</u></a>的后级稳压：作为开关电源的后级稳压器，进一步提高电源的稳定性和精度。</p><p style="margin-left:0px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:center;"><strong>BL1117命名规则及管脚排列</strong></p><p style="margin-left:0px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:justify;"><br/></p><p style="text-align:justify;"><img src="http://images.elecfans.net/uploads/20260206/ff6187bc-033c-11f1-96ea-92fbcf53809c.png" alt="ff6187bc-033c-11f1-96ea-92fbcf53809c.png"/></p><p style="margin-left:0px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:center;"><strong>BL1117型号推荐</strong></p><p style="margin-left:0px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:justify;"><br/></p><table><tbody><tr><td style="background-color:rgb(160,160,160);border-color:rgb(62,62,62);border-width:0px;padding:0px;"><p style="margin-left:0px;text-align:center;"><strong>产品型号</strong></p></td><td style="background-color:rgb(160,160,160);border-color:rgb(62,62,62);border-width:0px;padding:0px;"><p style="margin-left:0px;text-align:center;"><strong>输出电压规格</strong></p></td><td style="background-color:rgb(160,160,160);border-color:rgb(62,62,62);border-width:0px;padding:0px;"><p style="margin-left:0px;text-align:center;"><strong>封装形式</strong></p></td></tr><tr><td style="background-color:rgb(239,247,255);border-color:rgb(62,62,62);border-width:0px;padding:0px;"><p style="margin-left:0px;text-align:center;">BL1117-33CX</p></td><td style="background-color:rgb(209,227,251);border-color:rgb(62,62,62);border-width:0px;padding:0px;"><p style="margin-left:0px;text-align:center;">3.3V</p></td><td style="background-color:rgba(231,247,239,0.5);border-color:rgb(62,62,62);border-width:0px;padding:0px;"><p style="margin-left:0px;text-align:center;">SOT-223</p></td></tr><tr><td style="background-color:rgb(239,247,255);border-color:rgb(62,62,62);border-width:0px;padding:0px;"><p style="margin-left:0px;text-align:center;">BL1117-50CX</p></td><td style="background-color:rgb(209,227,251);border:0px solid rgb(62,62,62);padding:0px;"><p style="margin-left:0px;text-align:center;">5V</p></td><td style="background-color:rgba(231,247,239,0.5);border-color:rgb(62,62,62);border-width:0px;padding:0px;"><p style="margin-left:0px;text-align:center;">SOT-223</p></td></tr><tr><td style="background-color:rgb(239,247,255);border-color:rgb(62,62,62);border-width:0px;padding:0px;"><p style="margin-left:0px;text-align:center;">BL1117-CY</p></td><td style="background-color:rgb(209,227,251);border-color:rgb(62,62,62);border-width:0px;padding:0px;"><p style="margin-left:0px;text-align:center;">ADJ</p></td><td style="background-color:rgba(231,247,239,0.5);border-color:rgb(62,62,62);border-width:0px;padding:0px;"><p style="margin-left:0px;text-align:center;">TO-252</p></td></tr></tbody></table><p style="margin-left:0px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:center;"><strong>BL1117产品手册</strong></p><p style="margin-left:0px;text-align:justify;"><br/></p><p style="margin-left:0px;text-align:justify;"><br/></p><p style="text-align:justify;"><img src="http://images.elecfans.net/uploads/20260206/ff707998-033c-11f1-96ea-92fbcf53809c.jpg" alt="ff707998-033c-11f1-96ea-92fbcf53809c.jpg"/><img src="http://images.elecfans.net/uploads/20260206/ff828700-033c-11f1-96ea-92fbcf53809c.jpg" alt="ff828700-033c-11f1-96ea-92fbcf53809c.jpg"/><img src="http://images.elecfans.net/uploads/20260206/ff94befc-033c-11f1-96ea-92fbcf53809c.jpg" alt="ff94befc-033c-11f1-96ea-92fbcf53809c.jpg"/><img src="http://images.elecfans.net/uploads/20260206/ffa322bc-033c-11f1-96ea-92fbcf53809c.jpg" alt="ffa322bc-033c-11f1-96ea-92fbcf53809c.jpg"/></p>]]></description></item><item>    <title><![CDATA[深入解析MAX17527A：5.5V至60V、6A功率限流器的卓越性能与应用]]></title>    <link>https://www.elecfans.com/d/7642030.html</link>    <guid>https://www.elecfans.com/d/7642030.html</guid>    <pubDate>2026-02-06 17:20:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7642030" value="https://file1.elecfans.com/web2/M00/A8/07/wKgaomUo73mAMHYeABw6P8sa-Kk428.pdf"/><h1>深入解析MAX17527A：5.5V至60V、6A功率限流器的卓越性能与应用</h1>
<p>在电子设备的设计中，<a href="https://www.hqchip.com/app/1731" target="_blank"><u>电源管理</u></a>和保护是至关重要的环节。今天我们要深入探讨的是<a href="https://bbs.elecfans.com/group_65" target="_blank"><u>Analog</u></a> Devices推出的MAX17527A，一款具备过压（OV）、欠压（UV）、反极性和接地丢失保护功能的5.5V至60V、6A功率限流器。它为电子系统提供了强大而灵活的保护解决方案，下面我们将详细了解它的特性、<a href="https://m.elecfans.com/v/tag/773/" target="_blank"><u>工作原理</u></a>和应用场景。</p><p>文件下载：<a href="javascript:;" data-annex="annex0_7642030" target="_blank">MAX17527A.pdf</a></p>
<h2>产品亮点</h2>
<h3>1. 强大保护，减少系统停机时间</h3>
<p>MAX17527A拥有一系列保护功能，能有效应对各种<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>故障，确保系统稳定运行。其输入电压范围为+5.5V至+60V，可适应多种电源环境。在全温度范围内，<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>限制精度高，3A至6A之间的电流限制精度为±4%，0.6A至6A之间为±5%，100W、24V时的功率限制精度为±7%，能为负载提供精确的保护。</p>
<h3>2. 灵活设计，最大化复用和最小化重新认证</h3>
<p>它具有可调节的欠压锁定（UVLO）和过压锁定（OVLO）阈值，能根据不同应用需求进行灵活设置。±3%精确的SE<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>电流读出功能，可实时监测电流。此外，还提供可<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>的过流响应模式，包括连续、自动重试和锁存关闭模式，满足多样化的设计需求。</p>
<h3>3. 减小解决方案占地面积</h3>
<p>采用20引脚5mm x 5mm TQFN - EP封装，集成了nFET，满足常见的保护需求，有效减小了电路板空间。</p>
<h2>关键应用</h2>
<h3>1. 接地丢失保护</h3>
<p>在接地丢失事件中，如接地路径上的单故障安全<a href="https://www.hqchip.com/app/1598" target="_blank"><u>保险丝</u></a><a href="https://www.hqchip.com/app/1597" target="_blank"><u>熔断</u></a>时，MAX17527A会中断负载电流，并将输出与输入断开，保护设备安全。</p>
<h3>2. UL1310 Class 2功率限流器</h3>
<p>在UL1310 Class 2电源应用中，其精确的电流和功率限制功能提供了严格的保护边界，最大程度地将功率输送到负载。</p>
<h2><a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性与参数</h2>
<h3>1. 电源相关参数</h3>
<p>输入电压范围为5.5V至60V，关机输入电流、关机输出电流、关机输入到输出电流等参数都有明确的规定。例如，关机输入电流在不同电压条件下有所不同，V_EN = 0V，V_IN = V_SN = 24V，V_OUT = 0V时，典型值为21μA，最大值为48μA。</p>
<h3>2. UVLO和OVLO参数</h3>
<p>内部欠压跳闸电平、过压跳闸电平都有相应的典型值和范围。如内部欠压跳闸电平，V_IN上升时，UVLO连接到GND，典型值为12.4V，最大值为13.0V；V_IN下降时，典型值为12.0V，最小值为11.5V。</p>
<h3>3. 电流限制和功率限制参数</h3>
<p>电流限制调整范围为0.6A至6.0A，不同电流范围的电流限制精度不同。功率限制功能可根据外部电压动态调整电流限制，实现精确的功率控制。</p>
<h3>4. 逻辑输入和输出参数</h3>
<p>EN输入逻辑高、低电平，CLMODE输入逻辑高、低电平，以及FLAG输出的逻辑低电压等参数，确保了与其他系统的良好兼容性和控制功能。</p>
<h2>引脚配置与功能</h2>
<h3>1. 输入引脚（IN）</h3>
<p>1 - 5引脚为输入引脚，需用最小1µF陶瓷<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>将IN旁路到GND。对于热插拔应用，有特定的应用信息。</p>
<h3>2. 外部nFET相关引脚（GN、SN）</h3>
<p>GN是外部nFET的<a href="https://www.hqchip.com/app/1715" target="_blank"><u>栅极驱动</u></a>输出引脚，若不使用外部nFET，可将GN引脚悬空。SN是外部nFET栅极驱动的返回和输入电压感测引脚，需连接到外部nFET的源极，并使用最小4.7μF电容将SN旁路到GND。</p>
<h3>3. UVLO和OVLO引脚</h3>
<p>UVLO和OVLO引脚用于调整欠压和过压锁定阈值。可连接到GND使用默认内部阈值，也可通过外部<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>分压器进行外部设置。</p>
<h3>4. PLIM引脚</h3>
<p>功率限制调整引脚，通过连接外部电阻分压器可定义功率限制功能开始降低电流限制阈值的阈值。连接到GND可禁用该功能。</p>
<h3>5. 输出引脚（OUT）</h3>
<p>11 - 15引脚为输出引脚，对于长输出电缆或感性负载，有相关应用信息。</p>
<h3>6. FLAG引脚</h3>
<p>开漏故障指示输出引脚，当出现多种故障条件时，FLAG引脚会拉低，如(V_IN - V_OUT)电压超过V_FA、热关断激活、输入电压低于UVLO阈值或高于OVLO阈值、R_SETI小于3.2kΩ等。</p>
<h3>7. CLMODE引脚</h3>
<p>电流限制模式选择引脚，可选择连续模式、自动重试模式或锁存关闭模式。</p>
<h3>8. SETI引脚</h3>
<p>过流限制调整引脚和电流监测输出引脚，通过连接电阻到GND可设置过流限制。</p>
<h3>9. EN引脚</h3>
<p>高电平有效使能输入引脚，内部上拉到1.45V。</p>
<h3>10. GND引脚</h3>
<p>接地引脚，是所有控制<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>的参考引脚。</p>
<h3>11. EP引脚</h3>
<p>暴露焊盘，连接到大型GND平面，通过多个热过孔实现最佳热性能。</p>
<h2>详细工作原理与特性</h2>
<h3>1. UVLO和OVLO功能</h3>
<p>当UVLO或OVLO引脚电压满足特定条件时，可选择使用默认内部阈值或进入可调节模式。通过外部电阻分压器可调整阈值，同时具有一定的迟滞特性。当满足相应条件时，内部nFET会快速关闭，FLAG引脚会被置位；故障消除后，经过一定时间，内部和外部nFET会重新开启，FLAG引脚复位。</p>
<h3>2. 输入反极性保护</h3>
<p>通过外部nFET实现输入反极性保护，在输入电源端子接线错误时，外部nFET会关闭，保护负载。反极性电压保护的幅度取决于负载总线电压和外部nFET的耐压能力。</p>
<h3>3. 输出反极性保护</h3>
<p>MAX17527A能保护自身和输入电源连接免受输出反极性意外连接的影响，可承受一定范围的负输出电压。</p>
<h3>4. 输入去抖保护</h3>
<p>只有当输入电压高于UVLO阈值且持续时间超过去抖时间（tDEB）时，设备才会开始工作。若在tDEB内输入电压低于UVLO阈值，开关将保持关闭。</p>
<h3>5. 使能功能</h3>
<p>通过EN引脚可控制设备的开启和关闭。在锁存关闭模式下，EN引脚需拉低至少30µs（典型值）以复位故障条件。</p>
<h3>6. 启动控制</h3>
<p>在启动初始时间（tSTI）内，设备会将电流限制在设定值，以快速充电输出电容。若温度达到热折返阈值，设备会进入限流模式。若在启动超时时间（tSTO）内输出未充电到指定水平，开关将关闭，需重新“切换”IN或EN引脚才能恢复正常运行。</p>
<h3>7. 电流限制设置</h3>
<p>通过在SETI和GND之间连接电阻可设置电流限制阈值。SETI引脚还可提供与输入电流成比例的电压，用于监测电流。</p>
<h3>8. 电流限制模式</h3>
<p>提供连续、自动重试和锁存关闭三种电流限制模式。不同模式下，设备在过流时的响应不同，可根据实际需求选择合适的模式。</p>
<h3>9. 短路保护</h3>
<p>在输出短路事件中，快速跳闸电流比较器会在3μs内关闭内部nFET，200μs后重新开启并将输出电流限制在设定值。</p>
<h3>10. 反向电流保护</h3>
<p>使用外部nFET时，反向电流保护功能会在检测到反向电流时关闭外部nFET，反向电流条件消除后，经过一定时间重新开启。</p>
<h3>11. 功率限制功能</h3>
<p>MAX17527A可根据外部电压动态调整电流限制，实现功率限制。通过设置电阻分压器和电流限制，可精确控制输出功率。</p>
<h3>12. 故障输出</h3>
<p>FLAG引脚作为故障指示输出，在多种故障条件下会拉低，同时具有60V耐压和电流保护功能。</p>
<h3>13. 接地丢失保护</h3>
<p>在接地丢失事件中，设备会关闭内部和外部nFET，保护负载。</p>
<h3>14. 热关断保护</h3>
<p>当结温达到150°C（典型值）时，电流限制会降低以减少功耗；结温超过165°C（典型值）时，设备会关闭并置位FLAG引脚。温度下降后，设备会根据不同模式恢复正常运行。</p>
<h2>应用信息</h2>
<h3>1. 电容选择</h3>
<p>IN引脚建议连接1μF电容，以应对负载电流的突然变化。OUT引脚的最大电容负载与电流限制设置、启动时间和输入电压有关，需根据公式计算合适的电容值。</p>
<h3>2. 热插拔应用</h3>
<p>在IN和OUT<a href="https://m.hqchip.com/app/1529" target="_blank"><u>端子</u></a>的热插拔应用中，需考虑寄生电缆电感和电容引起的过冲和振铃问题，可使用瞬态电压抑制器（<a href="https://m.hqchip.com/app/1587" target="_blank"><u>TVS</u></a>）进行保护。</p>
<h3>3. 输入短路保护</h3>
<p>设备能检测到OUT引脚的反向电流并关闭外部nFET，保护系统免受输入短路的影响。</p>
<h3>4. 电压中断响应</h3>
<p>在输入电源欠压测试中，MAX17527A能快速恢复，内部nFET在200µs（典型值）内开启，外部nFET在1.2ms（典型值）内开启。</p>
<h3>5. 布局和散热</h3>
<p>为优化开关对输出短路条件的响应，应尽量缩短走线，减少寄生电感。合理的<a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>布局和散热设计对于设备的性能至关重要，包括使用合适的铜层厚度、过孔和大面积铜平面等。</p>
<h3>6. <a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a>保护</h3>
<p>所有引脚具有±2kV（HBM）ESD保护，IN引脚无需额外电容。</p>
<p>综上所述，MAX17527A是一款功能强大、性能卓越的功率限流器，能为电子系统提供全面的电源保护和灵活的设计方案。在实际应用中，<a href="https://bbs.elecfans.com/zhuti_lecture_1.html" target="_blank"><u>工程师</u></a>们可以根据具体需求，充分发挥其各项特性，确保设备的稳定运行。你在实际设计中是否遇到过类似功率限流器的应用难题呢？欢迎在评论区分享你的经验和见解。 </p>]]></description></item><item>    <title><![CDATA[探索CDCDB803：PCIe时钟缓冲的理想之选]]></title>    <link>https://www.elecfans.com/d/7642031.html</link>    <guid>https://www.elecfans.com/d/7642031.html</guid>    <pubDate>2026-02-06 17:20:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7642031" value="https://file1.elecfans.com/web3/M00/4B/15/wKgZO2mFr_yAO8MjABr_AF-zfZM375.pdf"/><h1>探索C<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>DB803：PCIe<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>缓冲的理想之选</h1>
<p>在电子设计领域，<a href="https://www.elecfans.com/tags/时钟缓冲器/" target="_blank"><u>时钟缓冲器</u></a>对于确保<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>的稳定传输至关重要。今天，我们来深入了解<a href="https://www.elecfans.com/tags/德州仪器/" target="_blank"><u>德州仪器</u></a>（<a href="https://www.elecfans.com/tags/te/" target="_blank"><u>Te</u></a>xas Instruments）的CDCDB803，一款专为PCIe Gen 1至Gen 6设计的8输出时钟缓冲器。</p><p>文件下载：<a href="javascript:;" data-annex="annex0_7642031" target="_blank">cdcdb803.pdf</a></p>
<h2>一、CDCDB803 核心特性</h2>
<h3>1.1 输出能力与控制</h3>
<p>CDCDB803拥有8个LP - HCSL输出，并且每个输出的差分输出端接电阻可通过<a href="https://www.elecfans.com/v/tag/1315/" target="_blank"><u>编程</u></a>设置为85Ω（默认）或100Ω。这为不同的应用场景提供了灵活性，可适配不同阻抗要求的电路板。同时，它具备8个硬件输出使能（OE#）控制引脚，能独立控制每个输出通道的开启和关闭，方便系统进行个性化配置。</p>
<h3>1.2 低抖动性能</h3>
<p>在当今对信号质量要求极高的应用中，低抖动是关键指标。CDCDB803在不同<a href="https://www.elecfans.com/tags/滤波器/" target="_blank"><u>滤波器</u></a>下展现出出色的低抖动性能：经过PCIE Gen 6滤波器后，附加相位抖动最大仅20 fs <a href="https://m.hqchip.com/app/1718" target="_blank"><u>RMS</u></a>；经过PCIE Gen 5滤波器后，最大为25 fs RMS；经过DB2000Q滤波器后，最大为38 fs RMS。如此低的抖动确保了信号的精准传输，有效减少信号失真。</p>
<h3>1.3 架构支持与兼容性</h3>
<p>它支持Common Clock（CC）和Individual Reference（IR）架构，能够适应多种不同的时钟分配架构。并且与扩频技术兼容，适用于对<a href="https://bbs.elecfans.com/group_40" target="_blank"><u>电磁兼容</u></a>性有要求的应用场景。此外，输出间的偏斜（skew）小于50 ps，输入到输出的延迟小于3 ns，保证了信号的同步性和及时性。</p>
<h3>1.4 其他特性</h3>
<p>CDCDB803具备故障安全输入功能，在<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>未施加时驱动设备输入也不会损坏器件。其输出摆率控制可通过编程进行调整，以补偿因电路板设计导致的输出走线长度增加的影响。它还拥有9个可选的SMBus地址，方便在多设备系统中进行<a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>和控制。采用3.3 - V核心和IO电源电压，硬件控制的低功耗模式（PD#）使能时，最大电流消耗仅72 mA，功耗较低。封装为6 - mm × 6 - mm、48引脚的VQFN封装，体积小巧，适合对空间有要求的应用。</p>
<h2>二、应用场景广泛</h2>
<h3>2.1 服务器领域</h3>
<p>在微服务器和塔式服务器、机架服务器中，CDCDB803可用于分配PCIe参考时钟，确保各个组件之间的时钟信号同步，提高服务器的整体性能和稳定性。</p>
<h3>2.2 存储与网络</h3>
<p>在存储区域网络（SAN）和主机总线适配器卡（HBA）、网络附属存储（<a href="https://www.elecfans.com/tags/nas/" target="_blank"><u>NAS</u></a>）中，它能为数据传输提供稳定的时钟信号，保证数据的准确读写和高效传输。</p>
<h3>2.3 硬件加速</h3>
<p>对于硬件加速器，CDCDB803可以满足其对<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>时钟信号的需求，提升加速器的运算速度和处理能力。</p>
<h2>三、规格参数详解</h2>
<h3>3.1 <a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性</h3>
<p>在电源电压方面，VDD和VDD_R在3.3 V ± 5 % 范围内，工作温度范围为 -40°C 至 105°C。输入<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>方面，核心电源电流在不同模式下有相应的取值，输出开启时和输出禁用时的IO电源电流也有明确的参数。输入频率范围为50 MHz至250 MHz，能适应多种时钟频率应用。输出电压方面，输出高电压、输出低电压等参数在不同负载条件下有严格的规格要求，确保输出信号的质量。</p>
<h3>3.2 时序要求</h3>
<p>SMBus<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>的各项时序参数对于设备之间的通信至关重要。例如，SMBus的工作频率范围为10 kHz至400 kHz，总线空闲时间、起始条件保持时间、设置时间等都有明确规定，以保证通信的稳定性和可靠性。</p>
<h3>3.3 热特性</h3>
<p>了解设备的热特性对于确保其在正常工作温度范围内至关重要。CDCDB803的结温最高可达125°C，存储温度范围为 -65°C 至 150°C。其热阻参数，如结到环境热阻（RθJA）为32.2°C/W，结到外壳顶部热阻（RθJC(top)）为22.3°C/W等，为散热设计提供了重要依据。</p>
<h2>四、设计与应用要点</h2>
<h3>4.1 电源设计</h3>
<p>高性能时钟缓冲器对电源噪声非常敏感，电源噪声会显著增加缓冲器的附加抖动。因此，在电源设计中，需要使用滤波<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>消除低频噪声，旁路电容为高频噪声提供低阻抗路径。建议在板级电源和芯片电源之间插入铁氧体磁珠，隔离高频开关噪声，但要选择直流<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>低的磁珠，以保证芯片电源的稳定。</p>
<h3>4.2 布局设计</h3>
<p>在<a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>布局方面，要确保良好的热性能和电源连接。对于连接CKx引脚的传输线，要根据输出阻抗设置相应的差分阻抗和单端阻抗，如默认85Ω输出阻抗时，传输线应为85Ω差分阻抗和42.5Ω单端阻抗；启用100Ω输出阻抗时，传输线应为100Ω差分阻抗和50Ω单端阻抗。同时，要尽量消除或减少传输线上的短截线，以避免反射和辐射发射增加。</p>
<h3>4.3 编程与控制</h3>
<p>CDCDB803可通过SMBus对其8个输出<a href="https://m.hqchip.com/app/1847" target="_blank"><u>驱动器</u></a>的状态进行编程。用户可以选择使用SMBus编程寄存器（软件）或硬件OE#引脚来控制输出。在使用软件控制时，硬件OE#引脚可浮空；使用硬件控制时，需将OE#引脚连接到GPIO<a href="https://www.hqchip.com/app/1716" target="_blank"><u>控制器</u></a>，并根据引脚配置和功能设置输出状态。SMBus地址可从9个可选地址中选择，通过对SADR0和SADR1引脚的配置来确定。</p>
<h2>五、总结</h2>
<p>CDCDB803凭借其出色的性能、广泛的应用场景和易于设计的特性，成为PCIe时钟缓冲应用中的优秀选择。在实际设计中，<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>需要充分考虑其各项特性和规格参数，合理进行电源设计、布局设计以及编程控制，以充分发挥其优势，满足不同应用的需求。大家在使用CDCDB803的过程中，有没有遇到过一些独特的挑战或者经验呢？欢迎在评论区分享。 </p>]]></description></item><item>    <title><![CDATA[揭秘LMK1D210x：高性能LVDS时钟缓冲器的卓越之选]]></title>    <link>https://www.elecfans.com/d/7642032.html</link>    <guid>https://www.elecfans.com/d/7642032.html</guid>    <pubDate>2026-02-06 17:20:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7642032" value="https://file1.elecfans.com/web3/M00/4B/15/wKgZPGmFr_2ATfvQABh9zYkCElk258.pdf"/><h1>揭秘LMK1D210x：高性能LVDS<a href="https://www.elecfans.com/tags/时钟缓冲器/" target="_blank"><u>时钟缓冲器</u></a>的卓越之选</h1>
<p>在电子工程领域，<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>缓冲器作为<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>处理与传输的关键角色，其性能直接影响着整个系统的稳定性与可靠性。今天，就带大家深入了解<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>推出的LMK1D210x系列低附加抖动LVDS时钟缓冲器，看看它究竟有何独特之处。</p><p>文件下载：<a href="javascript:;" data-annex="annex0_7642032" target="_blank">lmk1d2102.pdf</a></p>
<h2>一、产品特性</h2>
<p>LMK1D210x系列时钟缓冲器具有一系列令人瞩目的特性，使其在众多应用场景中脱颖而出。</p>
<h3>高性能与低抖动</h3>
<p>它属于高性能LVDS时钟缓冲器家族，支持高达2 GHz的频率，这为高速信号处理提供了坚实的基础。同时，具备极低的附加抖动，在12 - kHz至20 - MHz的积分范围内，最大仅为60 fs <a href="https://m.hqchip.com/app/1718" target="_blank"><u>RMS</u></a>（@156.25 MHz），能有效确保信号的准确性和稳定性。此外，极低的相位噪声底至 - 164 dBc/Hz（典型值），进一步提升了信号的纯净度。</p>
<h3>输入输出灵活性</h3>
<p>有双1:2和双1:4差分缓冲器两种类型可供选择，每个输入可扩展出最多四个LVDS输出，提供了丰富的输出配置选项。其输入具有很强的通用性，能接受LVDS、LVPECL、LVCMOS、HCSL和CML等多种信号电平，方便与不同类型的设备进行<a href="https://m.hqchip.com/app/1787" target="_blank"><u>接口</u></a>。并且，还提供LVDS参考电压V<a href="https://m.hqchip.com/app/1703" target="_blank"><u>AC</u></a>_REF，适用于<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a><a href="https://www.elecfans.com/tags/耦合/" target="_blank"><u>耦合</u></a>输入。</p>
<h3>宽电压与温度范围</h3>
<p>供电电压范围为1.71 V至3.465 V，可灵活适应不同的<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>环境。工作在 - 40°C至105°C的工业温度范围，即使在恶劣的环境条件下，也能保持稳定可靠的工作。</p>
<h3>封装小巧</h3>
<p>LMK1D2102采用3 - mm x 3 - mm、16 - 引脚的VQFN封装，LMK1D2104则是5 - mm x 5 - mm、28 - 引脚的VQFN封装，小巧的封装节省了电路板空间，适合对空间要求较高的应用。</p>
<h2>二、应用领域</h2>
<p>凭借其卓越的性能，LMK1D210x系列时钟缓冲器在多个领域都有着广泛的应用。</p>
<h3><a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>与网络</h3>
<p>在现代通信和网络系统中，对时钟信号的稳定性和准确性要求极高。LMK1D210x的低抖动和低相位噪声特性，能有效满足高速数据传输和处理的需求，确保信号的可靠传输。</p>
<h3>医疗成像</h3>
<p>医疗成像设备需要<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>的时钟信号来保证图像的质量和准确性。该系列时钟缓冲器能够提供稳定的时钟信号，减少信号干扰，从而提高成像的清晰度和精度。</p>
<h3>测试与测量</h3>
<p>在测试和测量仪器中，精确的时钟信号是保证测量结果准确性的关键。LMK1D210x的高性能使其成为测试和测量设备的理想选择，能够满足各种复杂测试环境的需求。</p>
<h3>无线基础设施</h3>
<p>无线基站等无线基础设施需要可靠的时钟信号来支持高速数据传输和信号处理。LMK1D210x的高频率支持和低抖动特性，能够有效提高<a href="https://www.elecfans.com/soft/data/43-45/" target="_blank"><u>无线通信</u></a>系统的性能和稳定性。</p>
<h3>专业音视频与标识</h3>
<p>在专业音视频设备和标识系统中，稳定的时钟信号对于保证音视频的同步和质量至关重要。LMK1D210x能够提供精确的时钟信号，确保音视频的流畅播放和准确显示。</p>
<h2>三、参数解读</h2>
<h3>绝对最大额定值</h3>
<p>需要注意的是，器件的绝对最大额定值是其正常工作的边界条件。如VDD供电电压范围为 - 0.3至3.6 V，VIN输入电压范围同样是 - 0.3至3.6 V等。在实际设计中，必须严格遵守这些额定值，否则可能会导致器件永久性损坏。即使在绝对最大额定值范围内但超出推荐工作条件使用，也可能会影响器件的可靠性、功能性和性能，并缩短其使用寿命。</p>
<h3>静电放电（<a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a>）额定值</h3>
<p>器件的ESD额定值为人体模型（HBM）±3000 V，带电设备模型（CDM）±1000 V。在操作和使用过程中，要采取适当的静电防护措施，以避免ESD对器件造成损坏。</p>
<h3>推荐工作条件</h3>
<p>LMK1D210x的推荐工作条件包括不同供电电压下的范围，如3.3 - V供电为3.135至3.465 V，2.5 - V供电为2.375至2.625 V，1.8 - V供电为1.71至1.89 V等。同时，对供电电压的斜坡速率也有要求，需要单调斜坡（VDD的10 - 90%）在0.1至20 ms之间。工作环境温度范围为 - 40°C至105°C，结温范围为 - 40°C至135°C。在设计电源和散热方案时，必须充分考虑这些条件，以确保器件在最佳状态下工作。</p>
<h3><a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性</h3>
<p>器件的电气特性包括电源特性、输入输出特性等多个方面。例如，在电源特性中，静态<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>IDD_STAT在不同型号和工作条件下有所不同；输入特性涵盖了输入频率、电压幅度、电流等参数；输出特性则包括差分输出电压幅度、输出偏斜、传播延迟等关键指标。这些特性是评估器件性能和进行<a href="https://www.elecfans.com/v/tag/167/" target="_blank"><u>电路设计</u></a>的重要依据。</p>
<h2>四、设计要点</h2>
<h3>输入输出端接</h3>
<p>在设计过程中，正确的端接方式对于确保信号完整性至关重要。对于LVDS输出，推荐在接收端使用100 Ω的端接电阻来匹配负载，以实现最佳的信号传输效果。可以选择<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>耦合或AC耦合端接方式，具体要根据实际情况进行选择。TI建议将端接电阻靠近<a href="https://m.hqchip.com/app/1847" target="_blank"><u>接收器</u></a>放置，如果接收器内部偏置电压与LMK1D210x的输出共模电压不同，则必须使用AC耦合。对于输入<a href="https://m.hqchip.com/app/1808" target="_blank"><u>端口</u></a>，LMK1D210x可以与LVDS、LVPECL、HCSL或LVCMOS驱动接口，同样需要根据不同的驱动类型选择合适的端接方式。</p>
<h3>电源去耦</h3>
<p>由于高性能时钟缓冲器对电源噪声非常敏感，电源噪声可能会显著增加缓冲器的附加抖动。因此，必须采取有效的电源去耦措施来降低系统电源的噪声。可以使用滤波电容来消除电源的低频噪声，旁路电容则为高频噪声提供低阻抗路径，保护电源系统免受感应波动的影响。这些旁路电容应具有低等效串联<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>（ESR），并放置在靠近电源引脚的位置，以减少电感的影响。TI建议在封装的每个电源引脚处添加高频（如0.1 - μF）旁路电容，并在板级电源和芯片电源之间插入铁氧体磁珠，以隔离时钟<a href="https://m.hqchip.com/app/1847" target="_blank"><u>驱动器</u></a>产生的高频开关噪声。</p>
<h3>布局设计</h3>
<p>合理的布局设计对于器件的性能和可靠性至关重要。为了确保散热效果，器件的裸片温度应限制在最高135°C以内。器件封装有一个暴露的焊盘，它是向印刷电路板（<a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>）散热的主要路径。因此，在<a href="https://bbs.elecfans.com/group_1221" target="_blank"><u>PCB设计</u></a>中，应在封装的占位面积内加入包括多个过孔到接地层的热焊盘图案，并确保热焊盘被焊接牢固，以实现良好的热传导。</p>
<h2>五、总结</h2>
<p>LMK1D210x系列低附加抖动LVDS时钟缓冲器以其高性能、低抖动、宽电压范围、小封装等特点，在众多领域都具有广泛的应用前景。在使用过程中，<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>们需要充分了解其特性和参数，严格遵守推荐工作条件，正确进行端接、电源去耦和布局设计，以发挥其最大性能。大家在实际应用中，有没有遇到过与时钟缓冲器相关的问题呢？又是如何解决的呢？欢迎在评论区分享你的经验和见解。 </p>]]></description></item><item>    <title><![CDATA[探索LMK1D210x低附加抖动LVDS缓冲器的卓越性能与应用]]></title>    <link>https://www.elecfans.com/d/7642033.html</link>    <guid>https://www.elecfans.com/d/7642033.html</guid>    <pubDate>2026-02-06 17:20:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7642033" value="https://file1.elecfans.com/web3/M00/4B/15/wKgZPGmFr_2AKC4SABh9zYkCElk227.pdf"/><h1>探索LMK1D210x低附加抖动LVDS缓冲器的卓越性能与应用</h1>
<p>在电子设计领域，<a href="https://www.elecfans.com/tags/时钟缓冲器/" target="_blank"><u>时钟缓冲器</u></a>的性能对于系统的稳定性和可靠性起着至关重要的作用。今天，我们将深入探讨<a href="https://bbs.elecfans.com/group_715" target="_blank"><u>TI</u></a>的LMK1D210x系列低附加抖动LVDS缓冲器，它在众多领域展现出了卓越的性能。</p><p>文件下载：<a href="javascript:;" data-annex="annex0_7642033" target="_blank">lmk1d2104.pdf</a></p>
<h2>一、LMK1D210x的突出特性</h2>
<h3>高性能与低抖动</h3>
<p>LMK1D210x属于高性能LVDS<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>缓冲器家族，支持高达2 GHz的参考时钟频率。其低附加抖动特性尤为出色，在12 - kHz至20 - MHz频段内，于156.25 MHz时钟频率下，最大均方根抖动小于60 fs，同时具有极低的相位噪声基底，典型值为 - 164 dBc/Hz。如此低的抖动和噪声水平，能够有效减少<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>失真，提高系统的稳定性。</p>
<h3>宽电压范围与多信号兼容性</h3>
<p>该系列缓冲器的<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>电压范围为1.71 V至3.465 V，可适应不同的电源环境。其输入具有通用性，能接受LVDS、LVPECL、LVCMOS、HCSL和CML等多种信号电平，这使得它在不同的系统设计中具有很强的适应性。</p>
<h3>其他特性</h3>
<p>LMK1D210x还具备故障安全输入操作功能，即使在电源未施加的情况下驱动输入，也不会损坏设备。此外，它的传播延迟极短，最大不超过575 ps，输出偏斜最大为20 ps，这些特性有助于确保信号的准确传输和同步。其工作温度范围为 - 40°C至105°C，适用于工业环境。在封装方面，LMK1D2102采用3 - mm x 3 - mm、16 - <a href="https://www.elecfans.com/tags/pi/" target="_blank"><u>Pi</u></a>n VQFN封装，LMK1D2104采用5 - mm x 5 - mm、28 - Pin VQFN封装，体积小巧，便于集成。</p>
<h2>二、广泛的应用领域</h2>
<h3><a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>与网络</h3>
<p>在通信和网络系统中，时钟信号的稳定性对于数据传输的准确性至关重要。LMK1D210x的低抖动和低偏斜特性能够确保时钟信号的精确分配，从而提<a href="https://www.elecfans.com/tags/高通/" target="_blank"><u>高通</u></a>信系统的性能和可靠性。</p>
<h3>医疗成像</h3>
<p>医疗成像设备对图像质量要求极高，时钟信号的干扰可能会导致图像失真。LMK1D210x的低噪声和高性能能够为医疗成像设备提供稳定的时钟信号，保证图像的清晰和准确。</p>
<h3>测试与测量</h3>
<p>测试和测量设备需要精确的时钟信号来进行数据采集和分析。LMK1D210x的<a href="https://m.hqchip.com/app/1252" target="_blank"><u>高精度</u></a>和稳定性使其成为测试和测量领域的理想选择。</p>
<h3>无线基础设施</h3>
<p>无线基础设施对时钟信号的稳定性和可靠性要求严格，LMK1D210x能够满足无线基站等设备对时钟信号的需求，确保无线通信的顺畅。</p>
<h3>专业音视频与标识</h3>
<p>在专业音视频和标识系统中，时钟信号的同步对于音视频的播放和显示效果至关重要。LMK1D210x的低偏斜和高性能能够保证音视频的同步播放，提升用户体验。</p>
<h2>三、技术细节剖析</h2>
<h3>引脚配置与功能</h3>
<p>LMK1D210x具有明确的引脚配置和功能。输入引脚（IN0_P、IN0_N和IN1_P、IN1_N）可接受差分或单端时钟输入，输出引脚（OUT0_P - OUT7_P和OUT0_N - OUT7_N）提供差分LVDS输出。控制引脚EN用于控制输出组的启用或禁用，通过内部上拉和下拉<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>实现不同的控制逻辑。</p>
<h3><a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性</h3>
<p>在电气特性方面，LMK1D210x的电源特性、输入输出特性都经过精心设计。例如，在不同的电源电压和频率条件下，其功耗表现稳定。输出特性方面，差分输出电压幅度、输出共模电压等参数都有明确的规格，确保了信号的准确输出。</p>
<h3>热性能</h3>
<p>热性能也是衡量一个设备优劣的重要指标。LMK1D210x具有良好的热性能，通过不同的热阻参数（如RθJA、RθJC等）可以看出，它能够在工业温度范围内有效地散热，保证设备的正常运行。</p>
<h2>四、应用设计要点</h2>
<h3>典型应用案例</h3>
<p>以J<a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a>204B/C <a href="https://www.elecfans.com/tags/adc/" target="_blank"><u>ADC</u></a>系统为例，LMK1D210x可用于分配<a href="https://bbs.elecfans.com/zhuti_1472_1.html" target="_blank"><u>AD</u></a>C时钟和SYSREF时钟。在该应用中，A<a href="https://m.hqchip.com/app/1703" target="_blank"><u>DC</u></a>时钟<a href="https://m.hqchip.com/app/1847" target="_blank"><u>接收器</u></a>通常采用<a href="https://m.hqchip.com/app/1703" target="_blank"><u>AC</u></a><a href="https://www.elecfans.com/tags/耦合/" target="_blank"><u>耦合</u></a>，SYSREF时钟接收器通常采用DC耦合，根据接收器的不同情况，合理选择是否使用外部终端电阻。</p>
<h3>电源供应建议</h3>
<p>高性能时钟缓冲器对电源噪声非常敏感，因此需要采取有效的电源滤波和去耦措施。建议使用滤波<a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>消除低频噪声，旁路电容提供高频噪声的低阻抗路径，并将旁路电容靠近电源引脚布局，以减少电感。此外，可在板级电源和芯片电源之间插入铁氧体磁珠，隔离高频开关噪声。</p>
<h3>布局设计</h3>
<p>在布局设计方面，为了确保设备的可靠性和性能，需要将芯片的裸片温度限制在135°C以内。通过在<a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>上设计包含多个过孔的热焊盘图案，将热量传导到接地层，同时确保热焊盘与PCB的良好焊接，以提高散热效率。</p>
<h2>五、总结与思考</h2>
<p>LMK1D210x低附加抖动LVDS缓冲器以其卓越的性能和广泛的适用性，为<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>在设计高性能时钟分配系统时提供了一个优秀的选择。在实际应用中，我们需要根据具体的系统需求，合理选择引脚配置、电源供应和布局设计，以充分发挥其性能优势。</p>
<p>各位电子工程师们，在你们的设计中是否遇到过时钟信号分配的难题呢？LMK1D210x是否能为你们的设计带来新的思路和解决方案呢？欢迎在评论区分享你们的经验和想法。 </p>]]></description></item><item>    <title><![CDATA[深度解析LMK1D1204P：高性能LVDS时钟缓冲器的卓越之选]]></title>    <link>https://www.elecfans.com/d/7642034.html</link>    <guid>https://www.elecfans.com/d/7642034.html</guid>    <pubDate>2026-02-06 17:20:00</pubDate>    <description><![CDATA[<input type="hidden" id="annex0_7642034" value="https://file1.elecfans.com/web3/M00/4B/15/wKgZO2mFr_6AN5X1ABJc2QW7CUw167.pdf"/><h1>深度解析LMK1D1204P：高性能LVDS<a href="https://www.elecfans.com/tags/时钟缓冲器/" target="_blank"><u>时钟缓冲器</u></a>的卓越之选</h1>
<p>在电子设计领域，<a href="https://www.elecfans.com/tags/时钟/" target="_blank"><u>时钟</u></a>缓冲器的性能直接影响着整个系统的稳定性和可靠性。今天，我们就来深入探讨一款高性能的LVDS时钟缓冲器——LMK1D1204P，看看它究竟有哪些独特之处。</p><p>文件下载：<a href="javascript:;" data-annex="annex0_7642034" target="_blank">lmk1d1204p.pdf</a></p>
<h2>一、LMK1D1204P的核心特性</h2>
<h3>1. 高性能架构</h3>
<p>LMK1D1204P属于高性能LVDS时钟缓冲器家族，具备2个输入和4个输出（2:4）的配置，输出频率最高可达2 GHz。这种架构使得它能够在高速<a href="https://m.hqchip.com/app/1072" target="_blank"><u>信号</u></a>处理中发挥出色的性能，满足多种应用场景的需求。</p>
<h3>2. 低抖动与低噪声</h3>
<p>它的低抖动特性是一大亮点，在12 kHz至20 MHz的频率范围内，最大随机加性抖动小于60 fs <a href="https://m.hqchip.com/app/1718" target="_blank"><u>rms</u></a>（在156.25 MHz时）。同时，极低的相位噪声本底（典型值为 -164 dBc/Hz），确保了信号的纯净度和稳定性，对于对信号质量要求极高的应用来说至关重要。</p>
<h3>3. 宽电压与宽温度范围</h3>
<p>该缓冲器支持1.8 V、2.5 V和3.3 V ± 5%的<a href="https://www.hqchip.com/app.html" target="_blank"><u>电源</u></a>电压，具有很强的适应性。而且，它的工作温度范围为 -40°C至105°C，适用于工业环境等各种复杂的工作场景。</p>
<h3>4. 输入输出灵活性</h3>
<p>输入方面，它可以接受LVDS、LVPECL、LVCMOS、HCSL和CML等多种信号类型，为系统设计提供了极大的灵活性。输出则通过硬件引脚可以单独启用或禁用每个输出通道，方便用户根据实际需求进行配置。</p>
<h2>二、应用领域广泛</h2>
<h3>1. <a href="https://www.elecfans.com/v/tag/1301/" target="_blank"><u>通信</u></a>与网络</h3>
<p>在通信和网络设备中，时钟信号的稳定性对于数据传输的准确性至关重要。LMK1D1204P的低抖动和高带宽特性，使其能够满足高速数据传输的需求，确保通信系统的稳定运行。</p>
<h3>2. 医疗成像</h3>
<p>医疗成像设备对图像质量要求极高，而时钟信号的精度会直接影响图像的清晰度和准确性。LMK1D1204P的高性能特性可以为医疗成像设备提供稳定可靠的时钟信号，有助于提高成像质量。</p>
<h3>3. 测试与测量</h3>
<p>测试和测量设备需要精确的时钟信号来进行数据采集和分析。该缓冲器的低抖动和高稳定性，能够为<a href="https://www.elecfans.com/soft/data/50-103/" target="_blank"><u>测试测量</u></a>系统提供准确的时钟基准，保证测量结果的可靠性。</p>
<h3>4. 无线基础设施</h3>
<p>无线基站等无线基础设施对时钟信号的要求也很高，LMK1D1204P可以为<a href="https://www.elecfans.com/soft/data/43-45/" target="_blank"><u>无线通信</u></a>系统提供稳定的时钟支持，确保无线信号的准确传输和接收。</p>
<h3>5. 音视频与 signage</h3>
<p>在专业<a href="https://m.hqchip.com/app/1537" target="_blank"><u>音频</u></a>、视频和数字 signage领域，时钟信号的同步性对于音视频的播放效果至关重要。LMK1D1204P可以实现多个设备之间的时钟同步，提升音视频的播放质量。</p>
<h2>三、内部结构与<a href="https://m.elecfans.com/v/tag/773/" target="_blank"><u>工作原理</u></a></h2>
<h3>1. 功能框图概述</h3>
<p>从功能框图来看，LMK1D1204P主要由输入选择器、LVDS<a href="https://m.hqchip.com/app/1847" target="_blank"><u>驱动器</u></a>和输出控制等部分组成。输入选择器可以通过IN_SEL引脚选择IN0或IN1作为输入信号，然后将其分配到4个LVDS输出通道。</p>
<h3>2. 输入选择机制</h3>
<p>IN_SEL引脚具有内部上拉和下拉<a href="https://www.hqchip.com/app/485" target="_blank"><u>电阻</u></a>，通过设置该引脚的电平，可以方便地选择输入<a href="https://m.hqchip.com/app/1808" target="_blank"><u>端口</u></a>。当IN_SEL为低电平时，选择IN0作为输入；当IN_SEL为高电平时，选择IN1作为输入；如果IN_SEL引脚悬空，则输入缓冲器被禁用。</p>
<h3>3. 输出控制方式</h3>
<p>每个LVDS输出通道都可以通过对应的OEx引脚进行单独控制。当OEx引脚为高电平时，对应的输出通道启用；当OEx引脚为低电平时，输出通道处于高阻状态，从而降低功耗。</p>
<h2>四、<a href="https://m.elecfans.com/v/tag/2364/" target="_blank"><u>电气</u></a>特性深度剖析</h2>
<h3>1. 绝对最大额定值</h3>
<p>在使用LMK1D1204P时，需要注意其绝对最大额定值。例如，电源电压范围为 -0.3 V至3.6 V，输入电压范围同样为 -0.3 V至3.6 V，超出这些范围可能会导致器件永久性损坏。</p>
<h3>2. <a href="https://m.hqchip.com/app/1587" target="_blank"><u>ESD</u></a>防护能力</h3>
<p>该器件具有一定的ESD防护能力，人体模型（HBM）下所有引脚的静电放电电压可达 ±3000 V，带电设备模型（CDM）下为 ±1000 V。但在实际操作中，仍需采取适当的防静电措施，以确保器件的可靠性。</p>
<h3>3. 推荐工作条件</h3>
<p>为了保证器件的最佳性能，推荐在特定的工作条件下使用。例如，核心电源电压在不同供电情况下有相应的范围，如3.3 V供电时为3.135 V至3.465 V。同时，电源电压的上升时间也有要求，需要在0.1 ms至20 ms之间进行单调上升。</p>
<h3>4. 电气参数分析</h3>
<p>输入方面，不同供电电压下的输入高、低电压阈值和输入<a href="https://www.elecfans.com/tags/电流/" target="_blank"><u>电流</u></a>等参数都有明确规定。输出方面，LVDS输出的直流和交流特性，如输出电压幅度、共模电压、抖动等，都对系统的性能产生重要影响。例如，随机加性抖动在特定条件下最大为60 fs rms，这对于保证信号的准确性至关重要。</p>
<h2>五、实际应用与设计要点</h2>
<h3>1. 典型应用案例</h3>
<p>以线路卡应用为例，LMK1D1204P可以选择来自背板的156.25 MHz LVDS时钟或2.5 V的LVCMOS<a href="https://www.hqchip.com/app/850" target="_blank"><u>振荡器</u></a>作为输入，然后将信号扇出到PHY、<a href="https://bbs.elecfans.com/zhuti_fpga_1.html" target="_blank"><u>ASIC</u></a>、<a href="https://www.elecfans.com/soft/data/30-91/" target="_blank"><u>FPGA</u></a>和<a href="https://m.elecfans.com/v/tag/132/" target="_blank"><u>CPU</u></a>等设备。不同设备与LMK1D1204P的连接方式有所不同，如PHY和ASIC具有内部终端，无需额外组件；而FPGA和CPU则需要外部交流<a href="https://www.elecfans.com/tags/耦合/" target="_blank"><u>耦合</u></a><a href="https://www.elecfans.com/tags/电容/" target="_blank"><u>电容</u></a>。</p>
<h3>2. 电源设计要点</h3>
<p>高性能时钟缓冲器对电源噪声非常敏感，因此电源设计至关重要。建议使用滤波电容和旁路电容来减少电源噪声，旁路电容应靠近电源引脚放置，并采用短回路布局以降低电感。同时，可以在板级电源和芯片电源之间插入铁氧体磁珠，以隔离高频开关噪声。</p>
<h3>3. <a href="https://m.elecfans.com/v/tag/82/" target="_blank"><u>PCB</u></a>布局注意事项</h3>
<p>为了保证器件的可靠性和性能，PCB布局需要遵循一定的原则。例如，芯片的散热垫必须焊接到PCB上，以确保良好的热传导。在布局时，应采用热焊盘和多个过孔连接到接地平面，以提高散热效率。同时，输入输出信号的布线应尽量短且避免交叉，以减少信号干扰。</p>
<h2>六、总结与展望</h2>
<p>LMK1D1204P作为一款高性能的LVDS时钟缓冲器，凭借其低抖动、低噪声、宽电压和宽温度范围等特性，在多个领域都有广泛的应用前景。在实际设计中，我们需要充分了解其电气特性和工作原理，合理进行电源设计和PCB布局，以发挥其最佳性能。随着电子技术的不断发展，相信类似的高性能时钟缓冲器将在更多的领域得到应用，为电子系统的发展提供更强大的支持。</p>
<p>各位<a href="https://m.elecfans.com/v/tag/125/" target="_blank"><u>电子工程师</u></a>们，在你们的设计中是否使用过类似的时钟缓冲器呢？在实际应用中遇到过哪些问题？欢迎在评论区分享你们的经验和见解。</p>]]></description></item>  </channel></rss>